=== Build LinuxKit
[2017-06-22 16:24.38] Starting...
Cloning into '/tmp/with_clonee7c8b65'...
done.
HEAD is now at 125469a4 Merge pull request #2093 from MagnusS/add-dfm-build-test
[2017-06-22 16:24.39] Running "cp" "-p" "--" "/gcloud/ci-setup.sh" "/tmp/with_clonee7c8b65/ci-setup.sh"
[2017-06-22 16:24.39] Running "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-2"
make clean
make[1]: Entering directory '/tmp/with_clonee7c8b65'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make GOOS=darwin
make[1]: Entering directory '/tmp/with_clonee7c8b65'
mkdir -p bin
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make clean
make[1]: Entering directory '/tmp/with_clonee7c8b65'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make GOOS=linux
make[1]: Entering directory '/tmp/with_clonee7c8b65'
mkdir -p bin
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make clean
make[1]: Entering directory '/tmp/with_clonee7c8b65'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make GOOS=windows
make[1]: Entering directory '/tmp/with_clonee7c8b65'
mkdir -p bin
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make clean
make[1]: Entering directory '/tmp/with_clonee7c8b65'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make
make[1]: Entering directory '/tmp/with_clonee7c8b65'
mkdir -p bin
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=125469a4c572c02f97b07566cbcd7a3fe59e9f09 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make install
make[1]: Entering directory '/tmp/with_clonee7c8b65'
cp -R ./bin/* /usr/local//bin
make[1]: Leaving directory '/tmp/with_clonee7c8b65'
make -C test all
make[1]: Entering directory '/tmp/with_clonee7c8b65/test'
rm -rf ../artifacts
mkdir -p ../artifacts
/usr/local/bin/moby build -output gcp -pull -name ../artifacts/test hack/test.yml
Extract kernel image: linuxkit/kernel:4.9.x
Pull image: docker.io/linuxkit/kernel:4.9.x@sha256:1631c1ceea2007b308ae4efeee9179c1e7d578a5dedab54fbcc64746532f2828
Add init containers:
Process init image: linuxkit/init:17693d233dd009b2a3a8d23673cb85969e1dce80
Pull image: docker.io/linuxkit/init:17693d233dd009b2a3a8d23673cb85969e1dce80@sha256:cb2c1a01777004f34e4e1400a1deab0c7c68e252f97d5387a6708e59483228ef
Process init image: linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38
Pull image: docker.io/linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38@sha256:dd096c6ea03e6da232a0c6d01c1e0d2290c4031408f9c6000c89c9e6590a39da
Process init image: linuxkit/containerd:be69ded7ed4437e2989da850581b631bac877d3e
Pull image: docker.io/linuxkit/containerd:be69ded7ed4437e2989da850581b631bac877d3e@sha256:ff2c41daa7e03429bfcebc5f565309f5a27cf856b9a17f239a6cb3a0032cfdbd
Add onboot containers:
  Create OCI config for linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
  Create OCI config for linuxkit/test-kernel-config:2acaa564c1801dd2ae1546c70c472dc58ac030a1
Pull image: linuxkit/test-kernel-config:2acaa564c1801dd2ae1546c70c472dc58ac030a1
  Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Create outputs:
  ../artifacts/test.img.tar.gz
LABELS: build, linux, Alpine, 3.5.2, amd64
ID: b98ff6b1-5f0b-4101-8fa1-926d8ac8e37b
[PASS    ] linuxkit.build.examples.minimal 25.74s
[PASS    ] linuxkit.build.examples.docker 55.23s
[PASS    ] linuxkit.build.examples.sshd 35.49s
[PASS    ] linuxkit.build.examples.redis 32.13s
[PASS    ] linuxkit.build.examples.swap 39.04s
[PASS    ] linuxkit.build.examples.node_exporter 32.49s
[PASS    ] linuxkit.build.blueprints.docker_for_mac 61.33s
[PASS    ] linuxkit.build.outputs 373.50s
[PASS    ] linuxkit.platforms.qemu.run_kernel 74.12s
[PASS    ] linuxkit.platforms.qemu.run_iso 66.52s
[CANCEL  ] linuxkit.platforms.qemu.run_efi 0.00s
[PASS    ] linuxkit.platforms.qemu.run_qcow 175.52s
[PASS    ] linuxkit.platforms.qemu.run_raw 179.25s
[FAIL    ] linuxkit.platforms.qemu.container 26.07s
[PASS    ] linuxkit.kernel.config_4.4.x 80.76s
[PASS    ] linuxkit.kernel.config_4.9.x 94.35s
[FAIL    ] linuxkit.kernel.config_4.11.x 67.20s
[PASS    ] linuxkit.kernel.kmod_4.9.x 70.63s
[SKIP    ] linuxkit.security.docker-bench 0.00s
[PASS    ] linuxkit.security.ports 76.42s
[PASS    ] linuxkit.packages.binfmt 85.70s
[PASS    ] linuxkit.packages.ca-certificates 78.06s
[PASS    ] linuxkit.packages.containerd 735.92s
[PASS    ] linuxkit.packages.dhcpcd 63.56s
[PASS    ] linuxkit.packages.mkimage 179.99s
[PASS    ] linuxkit.packages.sysctl 60.06s
[SUMMARY ] LogDir: b98ff6b1-5f0b-4101-8fa1-926d8ac8e37b
[SUMMARY ] Version: 3.5.2
[SUMMARY ] Passed: 22
[SUMMARY ] Failed: 2
[SUMMARY ] Cancelled: 1
[SUMMARY ] Skipped: 3
[SUMMARY ] Duration: 2769.16s
Some tests failed
make[1]: *** [Makefile:53: test-pr] Error 1
make[1]: Leaving directory '/tmp/with_clonee7c8b65/test'
make: *** [Makefile:73: ci] Error 2
[2017-06-22 17:16.19] Removing test VM...
[2017-06-22 17:16.19] Running "/gcloud/destroy.py" "linuxkit-ci-2"
INFO:root:Destroying VM
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
Traceback (most recent call last):
  File "/gcloud/destroy.py", line 12, in <module>
    resp = common.compute.instances().delete(instance=name, project=common.project, zone=common.zone).execute()
  File "/usr/lib/python2.7/site-packages/oauth2client/_helpers.py", line 133, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/googleapiclient/http.py", line 840, in execute
    raise HttpError(resp, content, uri=self.uri)
googleapiclient.errors.HttpError: <HttpError 404 when requesting https://www.googleapis.com/compute/v1/projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-2?alt=json returned "The resource 'projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-2' was not found">
[2017-06-22 17:16.21] Failed: Command "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-2" exited with status 2
