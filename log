=== Build LinuxKit
[2017-06-05 16:42.10] Starting...
Cloning into '/tmp/with_clone18a9a484'...
done.
HEAD is now at 12a2ea51 Merge pull request #1959 from justincormack/mobyup
[2017-06-05 16:42.11] Running "cp" "-p" "--" "/gcloud/ci-setup.sh" "/tmp/with_clone18a9a484/ci-setup.sh"
[2017-06-05 16:42.11] Running "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-0"
make clean
make[1]: Entering directory '/tmp/with_clone18a9a484'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clone18a9a484'
make
make[1]: Entering directory '/tmp/with_clone18a9a484'
mkdir -p bin
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit 3a16c02f100d1e01ea405a33d21a02de2a85904f --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=12a2ea51434e04b5ebd298f58b54c8fd2d329f7a -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out '3a16c02f100d1e01ea405a33d21a02de2a85904f'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3a16c02... Merge pull request #69 from justincormack/gcp-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=12a2ea51434e04b5ebd298f58b54c8fd2d329f7a -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 3ced00340aacfc1932e8c03281bf3bfc586c147c --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=3ced00340aacfc1932e8c03281bf3bfc586c147c -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '3ced00340aacfc1932e8c03281bf3bfc586c147c'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3ced003... Merge pull request #12 from dave-tucker/exit-1-fail
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clone18a9a484'
make install
make[1]: Entering directory '/tmp/with_clone18a9a484'
cp -R ./bin/* /usr/local//bin
make[1]: Leaving directory '/tmp/with_clone18a9a484'
make -C test all
make[1]: Entering directory '/tmp/with_clone18a9a484/test'
rm -rf ../artifacts
mkdir -p ../artifacts
/usr/local/bin/moby build -output gcp-img -pull -name ../artifacts/test hack/test.yml
Building LinuxKit image mkimage to generate output formats
Extract kernel image: linuxkit/kernel:4.9.x
Add init containers:
Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
Pull image: docker.io/linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b@sha256:d081ed43b48948ae1ba4a913d8ade115b6052ac2b00934bc28306f9176c3844a
Add onboot containers:
  Create OCI config for linuxkit/mkimage:5ad60299be03008f29c5caec3c5ea4ac0387aae6
Pull image: docker.io/linuxkit/mkimage:5ad60299be03008f29c5caec3c5ea4ac0387aae6@sha256:5fc18c2a1e9035404568ce04e8f7917458c4403e5e13d2867423d0ec416f05c7
  Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
Pull image: docker.io/linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8@sha256:1c553c4d6b3d63eb45f5710ed31a63d77ebfb7c44b818f0be8b0c813c6e55d52
Extract kernel image: linuxkit/kernel:4.9.x
Pull image: docker.io/linuxkit/kernel:4.9.x@sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
Add init containers:
Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
Pull image: docker.io/linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037@sha256:8e80db5f2ccd7214ccbee3ea1d2cf3b844d668676a2352c3739fa891942fe1df
Process init image: linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38
Pull image: docker.io/linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38@sha256:dd096c6ea03e6da232a0c6d01c1e0d2290c4031408f9c6000c89c9e6590a39da
Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
Pull image: docker.io/linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2@sha256:b20227524bf770b9f8669d3e473afb75e6424565367e5686ad03be1f4d60226a
Add onboot containers:
  Create OCI config for linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
  Create OCI config for linuxkit/test-kernel-config:ecff41279ccbc408079a3996a956432651c6eb9c
Pull image: linuxkit/test-kernel-config:ecff41279ccbc408079a3996a956432651c6eb9c
  Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Create outputs:
  ../artifacts/test.img.tar.gz
LABELS: build, linux, Alpine, 3.5.2, amd64
ID: 68e5795a-d25d-45e1-8a99-711dbd376bc7
[PASS    ] linuxkit.build.examples.minimal 24.30s
[PASS    ] linuxkit.build.examples.docker 57.70s
[PASS    ] linuxkit.build.examples.sshd 37.56s
[FAIL    ] linuxkit.build.examples.redis 7.25s
[PASS    ] linuxkit.build.examples.swap 41.57s
[PASS    ] linuxkit.build.examples.node_exporter 30.87s
[PASS    ] linuxkit.build.outputs 400.11s
[PASS    ] linuxkit.platforms.qemu.run_kernel 52.38s
[PASS    ] linuxkit.platforms.qemu.run_iso 66.61s
[CANCEL  ] linuxkit.platforms.qemu.run_efi 0.00s
[PASS    ] linuxkit.platforms.qemu.run_qcow 177.18s
[PASS    ] linuxkit.platforms.qemu.run_raw 188.07s
[FAIL    ] linuxkit.platforms.qemu.container 27.29s
[PASS    ] linuxkit.kernel.config_4.4.x 87.03s
[PASS    ] linuxkit.kernel.config_4.9.x 93.71s
[PASS    ] linuxkit.kernel.config_4.11.x 100.42s
[PASS    ] linuxkit.kernel.kmod_4.9.x 52.14s
[SKIP    ] linuxkit.security.docker-bench 0.00s
[PASS    ] linuxkit.packages.binfmt 60.78s
[PASS    ] linuxkit.packages.ca-certificates 78.17s
[PASS    ] linuxkit.packages.dhcpcd 58.69s
[PASS    ] linuxkit.packages.mkimage 173.64s
[PASS    ] linuxkit.packages.sysctl 56.34s
[SUMMARY ] LogDir: 68e5795a-d25d-45e1-8a99-711dbd376bc7
[SUMMARY ] Version: 3.5.2
[SUMMARY ] Passed: 19
[SUMMARY ] Failed: 2
[SUMMARY ] Cancelled: 1
[SUMMARY ] Skipped: 3
[SUMMARY ] Duration: 1871.86s
Some tests failed
make[1]: *** [Makefile:53: test-pr] Error 1
make[1]: Leaving directory '/tmp/with_clone18a9a484/test'
make: *** [Makefile:61: ci] Error 2
[2017-06-05 17:16.35] Removing test VM...
[2017-06-05 17:16.35] Running "/gcloud/destroy.py" "linuxkit-ci-0"
INFO:root:Destroying VM
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
Traceback (most recent call last):
  File "/gcloud/destroy.py", line 12, in <module>
    resp = common.compute.instances().delete(instance=name, project=common.project, zone=common.zone).execute()
  File "/usr/lib/python2.7/site-packages/oauth2client/_helpers.py", line 133, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/googleapiclient/http.py", line 840, in execute
    raise HttpError(resp, content, uri=self.uri)
googleapiclient.errors.HttpError: <HttpError 404 when requesting https://www.googleapis.com/compute/v1/projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-0?alt=json returned "The resource 'projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-0' was not found">
[2017-06-05 17:16.37] Failed: Command "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-0" exited with status 2
