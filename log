=== Build LinuxKit
[2017-06-27 20:29.00] Starting...
Cloning into '/tmp/with_clone333b4c1d'...
done.
HEAD is now at fe5b683d Merge pull request #2114 from riyazdf/sig-agenda-memorizer
[2017-06-27 20:29.01] Running "cp" "-p" "--" "/gcloud/ci-setup.sh" "/tmp/with_clone333b4c1d/ci-setup.sh"
[2017-06-27 20:29.01] Building with timeout of 120 minutes
[2017-06-27 20:29.01] Running "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-2"
make clean
make[1]: Entering directory '/tmp/with_clone333b4c1d'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make -j 3 GOOS=darwin tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/with_clone333b4c1d'
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=fe5b683d8fdfde66f76e00400903b859b7586509 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Cloning into '.'...
Cloning into '.'...
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make clean
make[1]: Entering directory '/tmp/with_clone333b4c1d'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make -j 3 GOOS=windows tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/with_clone333b4c1d'
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=fe5b683d8fdfde66f76e00400903b859b7586509 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Cloning into '.'...
Cloning into '.'...
gofmt...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make clean
make[1]: Entering directory '/tmp/with_clone333b4c1d'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make -j 3 GOOS=linux tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/with_clone333b4c1d'
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=fe5b683d8fdfde66f76e00400903b859b7586509 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Cloning into '.'...
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
govet...
gofmt...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make clean
make[1]: Entering directory '/tmp/with_clone333b4c1d'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make
make[1]: Entering directory '/tmp/with_clone333b4c1d'
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
mkdir -p bin
tar xf tmp_moby_bin.tar
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=fe5b683d8fdfde66f76e00400903b859b7586509 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make install
make[1]: Entering directory '/tmp/with_clone333b4c1d'
cp -R ./bin/* /usr/local//bin
make[1]: Leaving directory '/tmp/with_clone333b4c1d'
make -C test all
make[1]: Entering directory '/tmp/with_clone333b4c1d/test'
rm -rf ../artifacts
mkdir -p ../artifacts
/usr/local/bin/moby build -output gcp -pull -name ../artifacts/test hack/test.yml
Extract kernel image: linuxkit/kernel:4.9.34
Pull image: docker.io/linuxkit/kernel:4.9.34@sha256:d1e0b542fd21b71dd99639c46535ada6335bc8abcd397ad09c40229e66fe7d6b
Add init containers:
Process init image: linuxkit/init:36c56f0664d49c5a6adc1120d1bf5ba6ac30b389
Pull image: docker.io/linuxkit/init:36c56f0664d49c5a6adc1120d1bf5ba6ac30b389@sha256:6ca9b70e9d4f802fcac9f8bc6006302fd8d6c2e79b0ed6d20d16e685b9355ff7
Process init image: linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38
Pull image: docker.io/linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38@sha256:dd096c6ea03e6da232a0c6d01c1e0d2290c4031408f9c6000c89c9e6590a39da
Process init image: linuxkit/containerd:1e3e8f207421de8deac8cedc26a138d6b1661a0d
Pull image: docker.io/linuxkit/containerd:1e3e8f207421de8deac8cedc26a138d6b1661a0d@sha256:cb0def679f5a26b02842c0c6cac919d792e052d44d3de941af618b5beb29fb60
Add onboot containers:
  Create OCI config for linuxkit/dhcpcd:6c1ca76dbf808d5c27d10cbf22a8d4399be5c8ae
Pull image: docker.io/linuxkit/dhcpcd:6c1ca76dbf808d5c27d10cbf22a8d4399be5c8ae@sha256:129a415917480edacc3751d0dbbcd9c27b21a0def79546e5c9945d872923e4ea
  Create OCI config for linuxkit/test-kernel-config:9f08e3b99f8ac2f422251b3e8c94ce874ee34119
Pull image: linuxkit/test-kernel-config:9f08e3b99f8ac2f422251b3e8c94ce874ee34119
  Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Create outputs:
  ../artifacts/test.img.tar.gz
LABELS: Alpine, 3.5.2, amd64, build, linux
ID: 3130f0a6-c8e0-4a8f-8134-d22fb5ba9651
[PASS    ] linuxkit.build.examples.minimal 33.60s
[PASS    ] linuxkit.build.examples.docker 58.53s
[PASS    ] linuxkit.build.examples.sshd 35.76s
[PASS    ] linuxkit.build.examples.redis 32.78s
[PASS    ] linuxkit.build.examples.swap 60.66s
[PASS    ] linuxkit.build.examples.node_exporter 36.72s
[PASS    ] linuxkit.build.blueprints.docker_for_mac 64.73s
[PASS    ] linuxkit.build.outputs 389.39s
[PASS    ] linuxkit.platforms.qemu.run_kernel 86.57s
[PASS    ] linuxkit.platforms.qemu.run_iso 88.70s
[CANCEL  ] linuxkit.platforms.qemu.run_efi 0.00s
[PASS    ] linuxkit.platforms.qemu.run_qcow 170.41s
[PASS    ] linuxkit.platforms.qemu.run_raw 192.82s
[FAIL    ] linuxkit.platforms.qemu.container 33.03s
[PASS    ] linuxkit.kernel.config_4.4.x 97.74s
[PASS    ] linuxkit.kernel.config_4.9.x 128.56s
[PASS    ] linuxkit.kernel.config_4.11.x 122.55s
[PASS    ] linuxkit.kernel.kmod_4.9.x 77.87s
[SKIP    ] linuxkit.security.docker-bench 0.00s
[PASS    ] linuxkit.security.ports 82.50s
[PASS    ] linuxkit.packages.binfmt 92.99s
[PASS    ] linuxkit.packages.ca-certificates 81.91s
[PASS    ] linuxkit.packages.containerd 683.95s
[PASS    ] linuxkit.packages.dhcpcd 83.18s
[FAIL    ] linuxkit.packages.getty-containerd 38.01s
[PASS    ] linuxkit.packages.mkimage 224.00s
[PASS    ] linuxkit.packages.sysctl 73.78s
[SUMMARY ] LogDir: 3130f0a6-c8e0-4a8f-8134-d22fb5ba9651
[SUMMARY ] Version: 3.5.2
[SUMMARY ] Passed: 23
[SUMMARY ] Failed: 2
[SUMMARY ] Cancelled: 1
[SUMMARY ] Skipped: 3
[SUMMARY ] Duration: 3070.82s
Some tests failed
make[1]: *** [Makefile:53: test-pr] Error 1
make[1]: Leaving directory '/tmp/with_clone333b4c1d/test'
make: *** [Makefile:85: ci] Error 2
[2017-06-27 21:24.29] Removing test VM...
[2017-06-27 21:24.29] Running "/gcloud/destroy.py" "linuxkit-ci-2"
INFO:root:Destroying VM
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
Traceback (most recent call last):
  File "/gcloud/destroy.py", line 12, in <module>
    resp = common.compute.instances().delete(instance=name, project=common.project, zone=common.zone).execute()
  File "/usr/lib/python2.7/site-packages/oauth2client/_helpers.py", line 133, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/googleapiclient/http.py", line 840, in execute
    raise HttpError(resp, content, uri=self.uri)
googleapiclient.errors.HttpError: <HttpError 404 when requesting https://www.googleapis.com/compute/v1/projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-2?alt=json returned "The resource 'projects/moby-datakit-ci/zones/europe-west1-b/instances/linuxkit-ci-2' was not found">
[2017-06-27 21:24.32] Failed: Command "make" "ci" "CLOUDSDK_IMAGE_NAME=linuxkit-ci-2" exited with status 2
