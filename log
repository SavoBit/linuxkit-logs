=== Build LinuxKit
[2017-06-27 09:15.25] Starting...
Cloning into '/tmp/with_clone253cf720'...
done.
HEAD is now at 6d386c32 Update hashes for new init
[2017-06-27 09:15.26] Running "cp" "-p" "--" "/gcloud/ci-setup.sh" "/tmp/with_clone253cf720/ci-setup.sh"
[2017-06-27 09:15.26] Running "/gcloud/create.py" "linuxkit-ci-3"
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
INFO:root:Using source disk image https://www.googleapis.com/compute/v1/projects/moby-datakit-ci/global/images/linuxkit-ci-builder-4
INFO:root:Creating VM
INFO:root:Waiting for zone operation to finish
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Getting VM details
[2017-06-27 09:15.45] Created new VM linuxkit-ci-3
[2017-06-27 09:15.45] Running "ssh" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.189.224.250" "/usr/local/bin/test.sh"
Warning: Permanently added '35.189.224.250' (ECDSA) to the list of known hosts.
+ rm -rf /tmp/build
+ mkdir /tmp/build
+ cd /tmp/build
+ tar xf -
+ '[' -x ci-setup.sh ']'
+ ./ci-setup.sh
+ mkdir -p /tmp/build/test/_results /tmp/build/artifacts
+ sysctl vm.overcommit_memory=1
vm.overcommit_memory = 1
+ make ci-pr
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make -j 3 GOOS=darwin tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/build'
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=6d386c32760fe646fd63ae1dd9d43d5be1219539 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Unable to find image 'linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df' locally
Unable to find image 'linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df' locally
Unable to find image 'linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df' locally
6579a00b44686d0e504d513fc4860094769fe7df: Pulling from linuxkit/go-compile
6579a00b44686d0e504d513fc4860094769fe7df: Pulling from linuxkit/go-compile
6579a00b44686d0e504d513fc4860094769fe7df: Pulling from linuxkit/go-compile
7bee6021d73b: Pulling fs layer
bc2351846d69: Pulling fs layer
f445d9c10f23: Pulling fs layer
7bee6021d73b: Pulling fs layer
bc2351846d69: Pulling fs layer
f445d9c10f23: Pulling fs layer
7bee6021d73b: Pulling fs layer
bc2351846d69: Pulling fs layer
f445d9c10f23: Pulling fs layer
f445d9c10f23: Verifying Checksum
f445d9c10f23: Verifying Checksum
f445d9c10f23: Verifying Checksum
f445d9c10f23: Download complete
f445d9c10f23: Download complete
f445d9c10f23: Download complete
bc2351846d69: Verifying Checksum
bc2351846d69: Verifying Checksum
bc2351846d69: Download complete
bc2351846d69: Verifying Checksum
bc2351846d69: Download complete
bc2351846d69: Download complete
7bee6021d73b: Verifying Checksum
7bee6021d73b: Verifying Checksum
7bee6021d73b: Verifying Checksum
7bee6021d73b: Download complete
7bee6021d73b: Download complete
7bee6021d73b: Download complete
7bee6021d73b: Pull complete
7bee6021d73b: Pull complete
7bee6021d73b: Pull complete
bc2351846d69: Pull complete
bc2351846d69: Pull complete
bc2351846d69: Pull complete
f445d9c10f23: Pull complete
f445d9c10f23: Pull complete
f445d9c10f23: Pull complete
Digest: sha256:65aa61308f71f509fd003bac05d60644243c863def805992948a0e5a02b95c09
Digest: sha256:65aa61308f71f509fd003bac05d60644243c863def805992948a0e5a02b95c09
Digest: sha256:65aa61308f71f509fd003bac05d60644243c863def805992948a0e5a02b95c09
Status: Downloaded newer image for linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df
Status: Downloaded newer image for linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df
Status: Image is up to date for linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df
Cloning into '.'...
Cloning into '.'...
gofmt...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make -j 3 GOOS=windows tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/build'
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=6d386c32760fe646fd63ae1dd9d43d5be1219539 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Cloning into '.'...
Cloning into '.'...
gofmt...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make -j 3 GOOS=linux tmp_moby_bin.tar tmp_rtf_bin.tar tmp_linuxkit_bin.tar
make[1]: Entering directory '/tmp/build'
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=6d386c32760fe646fd63ae1dd9d43d5be1219539 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
Cloning into '.'...
Cloning into '.'...
gofmt...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
govet...
golint...
ineffassign...
go build...
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make
make[1]: Entering directory '/tmp/build'
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit d8cc1b3f08df02ad563d3f548ac2527931a925a6 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=d8cc1b3f08df02ad563d3f548ac2527931a925a6 -X main.Version=0.0" -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'd8cc1b3f08df02ad563d3f548ac2527931a925a6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at d8cc1b3... Merge pull request #82 from justincormack/source-ifpresent
gofmt...
govet...
golint...
ineffassign...
go build...
mkdir -p bin
tar xf tmp_moby_bin.tar
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=6d386c32760fe646fd63ae1dd9d43d5be1219539 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 34ec986e726d661f2a25ff085d669e057e3e5345 --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=34ec986e726d661f2a25ff085d669e057e3e5345 -X github.com/linuxkit/rtf/cmd.Version=0.0" -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '34ec986e726d661f2a25ff085d669e057e3e5345'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 34ec986... Merge pull request #18 from dave-tucker/label-fix
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/build'
make install
make[1]: Entering directory '/tmp/build'
cp -R ./bin/* /usr/local//bin
make[1]: Leaving directory '/tmp/build'
make -C test pr
make[1]: Entering directory '/tmp/build/test'
rm -rf ../artifacts
mkdir -p ../artifacts
/usr/local/bin/moby build -output gcp -pull -name ../artifacts/test hack/test.yml
Extract kernel image: linuxkit/kernel:4.9.x
Pull image: docker.io/linuxkit/kernel:4.9.x@sha256:14f5467dd92bc8955d46f4b4e108261922ad4c0c2e1abfce5b775d3c8fbb9610
Add init containers:
Process init image: linuxkit/init:687e89ff0d1edcd5d19428afab98d0b4d4ea0664
Pull image: docker.io/linuxkit/init:687e89ff0d1edcd5d19428afab98d0b4d4ea0664@sha256:51fe2ca394a853d5df419515e7fc22972f54c2d6d7253c82b427034775c09594
Process init image: linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38
Pull image: docker.io/linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38@sha256:dd096c6ea03e6da232a0c6d01c1e0d2290c4031408f9c6000c89c9e6590a39da
Process init image: linuxkit/containerd:a33cdcf50b8107ffe14c92802c460fe7ada39acd
Pull image: docker.io/linuxkit/containerd:a33cdcf50b8107ffe14c92802c460fe7ada39acd@sha256:bda31ce34bb2e62411ef94c582db5a0079994a67ab7fbdf88b5852f28bc89bb4
Add onboot containers:
  Create OCI config for linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
  Create OCI config for linuxkit/test-kernel-config:9f08e3b99f8ac2f422251b3e8c94ce874ee34119
Pull image: linuxkit/test-kernel-config:9f08e3b99f8ac2f422251b3e8c94ce874ee34119
Pull image: linuxkit/test-kernel-config:9f08e3b99f8ac2f422251b3e8c94ce874ee34119
  Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Create outputs:
  ../artifacts/test.img.tar.gz
LABELS: build, linux, Debian, 8.7, amd64
ID: febfc6f9-9773-44f2-9301-e678791987af
[PASS    ] linuxkit.build.examples.minimal 32.17s
[PASS    ] linuxkit.build.examples.docker 76.47s
[PASS    ] linuxkit.build.examples.sshd 33.22s
[PASS    ] linuxkit.build.examples.redis 26.62s
[PASS    ] linuxkit.build.examples.swap 47.51s
[PASS    ] linuxkit.build.examples.node_exporter 28.97s
[PASS    ] linuxkit.build.blueprints.docker_for_mac 64.22s
[PASS    ] linuxkit.build.outputs 478.07s
[PASS    ] linuxkit.platforms.qemu.run_kernel 73.59s
[PASS    ] linuxkit.platforms.qemu.run_iso 84.72s
[CANCEL  ] linuxkit.platforms.qemu.run_efi 0.04s
[PASS    ] linuxkit.platforms.qemu.run_qcow 162.04s
[PASS    ] linuxkit.platforms.qemu.run_raw 155.05s
[CANCEL  ] linuxkit.platforms.qemu.container 0.07s
[PASS    ] linuxkit.kernel.config_4.4.x 159.61s
[PASS    ] linuxkit.kernel.config_4.9.x 151.43s
[PASS    ] linuxkit.kernel.config_4.11.x 161.12s
[PASS    ] linuxkit.kernel.kmod_4.9.x 87.91s
[SKIP    ] linuxkit.security.docker-bench 0.00s
[PASS    ] linuxkit.security.ports 61.11s
[PASS    ] linuxkit.packages.binfmt 70.74s
[PASS    ] linuxkit.packages.ca-certificates 71.10s
[2017-06-27 10:15.26] Switch was turned off, so killing process "ssh" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.189.224.250" "/usr/local/bin/test.sh"
[2017-06-27 10:15.26] Removing test VM...
[2017-06-27 10:15.26] Running "/gcloud/destroy.py" "linuxkit-ci-3"
[2017-06-27 10:15.26] Fetching results
[2017-06-27 10:15.26] Running "scp" "-r" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.189.224.250:/tmp/build/test/_results" "."
[2017-06-27 10:15.26] Switch was turned off, so killing process "scp" "-r" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.189.224.250:/tmp/build/test/_results" "."
[2017-06-27 10:15.26] Error fetching results: (Failure Cancelled)
[2017-06-27 10:15.26] Results directory "/tmp/linuxkit-3f4250a6/_results" not found, so not saving
[2017-06-27 10:15.26] Failed: Exceeded timeout of 60.00 minutes
