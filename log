=== Build LinuxKit
[2017-06-14 15:18.26] Starting...
Cloning into '/tmp/with_clone3949c81'...
done.
HEAD is now at ca2b4f2e init: replace ctr with a custom client using the containerd client library
[2017-06-14 15:18.27] Running "cp" "-p" "--" "/gcloud/ci-setup.sh" "/tmp/with_clone3949c81/ci-setup.sh"
[2017-06-14 15:18.27] Running "/gcloud/create.py" "linuxkit-ci-3"
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
INFO:root:Using source disk image https://www.googleapis.com/compute/v1/projects/moby-datakit-ci/global/images/linuxkit-ci-builder-3
INFO:root:Creating VM
INFO:root:Waiting for zone operation to finish
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Getting VM details
[2017-06-14 15:18.46] Created new VM linuxkit-ci-3
[2017-06-14 15:18.46] Running "ssh" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.187.7.40" "/usr/local/bin/test.sh"
Warning: Permanently added '35.187.7.40' (ECDSA) to the list of known hosts.
+ rm -rf /tmp/build
+ mkdir /tmp/build
+ cd /tmp/build
+ tar xf -
+ '[' -x ci-setup.sh ']'
+ ./ci-setup.sh
+ mkdir -p /tmp/build/test/_results /tmp/build/artifacts
+ sysctl vm.overcommit_memory=1
vm.overcommit_memory = 1
+ make ci-pr
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make GOOS=darwin
make[1]: Entering directory '/tmp/build'
mkdir -p bin
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit e0aac90f4476c7dadfec9ab4116cf1363e51ce77 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Unable to find image 'linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df' locally
6579a00b44686d0e504d513fc4860094769fe7df: Pulling from linuxkit/go-compile
7bee6021d73b: Pulling fs layer
bc2351846d69: Pulling fs layer
f445d9c10f23: Pulling fs layer
f445d9c10f23: Verifying Checksum
f445d9c10f23: Download complete
bc2351846d69: Verifying Checksum
bc2351846d69: Download complete
7bee6021d73b: Verifying Checksum
7bee6021d73b: Download complete
7bee6021d73b: Pull complete
bc2351846d69: Pull complete
f445d9c10f23: Pull complete
Digest: sha256:65aa61308f71f509fd003bac05d60644243c863def805992948a0e5a02b95c09
Status: Downloaded newer image for linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df
Cloning into '.'...
Note: checking out 'e0aac90f4476c7dadfec9ab4116cf1363e51ce77'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at e0aac90... Merge pull request #74 from justincormack/raw-name
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none -e GOOS=darwin linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 3ced00340aacfc1932e8c03281bf3bfc586c147c --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=3ced00340aacfc1932e8c03281bf3bfc586c147c -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '3ced00340aacfc1932e8c03281bf3bfc586c147c'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3ced003... Merge pull request #12 from dave-tucker/exit-1-fail
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make GOOS=linux
make[1]: Entering directory '/tmp/build'
mkdir -p bin
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit e0aac90f4476c7dadfec9ab4116cf1363e51ce77 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'e0aac90f4476c7dadfec9ab4116cf1363e51ce77'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at e0aac90... Merge pull request #74 from justincormack/raw-name
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 3ced00340aacfc1932e8c03281bf3bfc586c147c --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=3ced00340aacfc1932e8c03281bf3bfc586c147c -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '3ced00340aacfc1932e8c03281bf3bfc586c147c'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3ced003... Merge pull request #12 from dave-tucker/exit-1-fail
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make GOOS=windows
make[1]: Entering directory '/tmp/build'
mkdir -p bin
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit e0aac90f4476c7dadfec9ab4116cf1363e51ce77 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'e0aac90f4476c7dadfec9ab4116cf1363e51ce77'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at e0aac90... Merge pull request #74 from justincormack/raw-name
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none -e GOOS=windows linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 3ced00340aacfc1932e8c03281bf3bfc586c147c --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=3ced00340aacfc1932e8c03281bf3bfc586c147c -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '3ced00340aacfc1932e8c03281bf3bfc586c147c'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3ced003... Merge pull request #12 from dave-tucker/exit-1-fail
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/build'
make clean
make[1]: Entering directory '/tmp/build'
rm -rf bin *.log *-kernel *-cmdline *-state *.img *.iso *.gz *.qcow2 *.vhd *.vmx *.vmdk *.tar 
make[1]: Leaving directory '/tmp/build'
make
make[1]: Entering directory '/tmp/build'
mkdir -p bin
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/moby/tool --clone https://github.com/moby/tool.git --commit e0aac90f4476c7dadfec9ab4116cf1363e51ce77 --package github.com/moby/tool/cmd/moby --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/moby > tmp_moby_bin.tar
Cloning into '.'...
Note: checking out 'e0aac90f4476c7dadfec9ab4116cf1363e51ce77'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at e0aac90... Merge pull request #74 from justincormack/raw-name
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_moby_bin.tar > bin/moby
rm tmp_moby_bin.tar
touch bin/moby
tar cf - vendor -C src/cmd/linuxkit . | docker run --rm --net=none --log-driver=none -i  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --package github.com/linuxkit/linuxkit --ldflags "-X main.GitCommit=ca2b4f2e2f8c21ad5062c878ff1524ee33ee2637 -X main.Version="0.0" " -o bin/linuxkit > tmp_linuxkit_bin.tar
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_linuxkit_bin.tar > bin/linuxkit
rm tmp_linuxkit_bin.tar
touch bin/linuxkit
docker run --rm --log-driver=none  linuxkit/go-compile:6579a00b44686d0e504d513fc4860094769fe7df --clone-path github.com/linuxkit/rtf --clone https://github.com/linuxkit/rtf.git --commit 3ced00340aacfc1932e8c03281bf3bfc586c147c --package github.com/linuxkit/rtf --ldflags "-X github.com/linuxkit/rtf/cmd.GitCommit=3ced00340aacfc1932e8c03281bf3bfc586c147c -X github.com/linuxkit/rtf/cmd.Version="0.0" " -o bin/rtf > tmp_rtf_bin.tar
Cloning into '.'...
Note: checking out '3ced00340aacfc1932e8c03281bf3bfc586c147c'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 3ced003... Merge pull request #12 from dave-tucker/exit-1-fail
gofmt...
govet...
golint...
ineffassign...
go build...
tar xf tmp_rtf_bin.tar > bin/rtf
rm tmp_rtf_bin.tar
touch bin/rtf
make[1]: Leaving directory '/tmp/build'
make install
make[1]: Entering directory '/tmp/build'
cp -R ./bin/* /usr/local//bin
make[1]: Leaving directory '/tmp/build'
make -C test pr
make[1]: Entering directory '/tmp/build/test'
rm -rf ../artifacts
mkdir -p ../artifacts
/usr/local/bin/moby build -output gcp -pull -name ../artifacts/test hack/test.yml
Extract kernel image: linuxkit/kernel:4.9.x
Pull image: docker.io/linuxkit/kernel:4.9.x@sha256:ae1b7926df08ea7451f1404e28bef8cf7ece2d342eeeecf007d6708e7abbbc16
Add init containers:
Process init image: linuxkit/init:d235d79635ffdd55b24df0f4c4b0351a7d03c394
Pull image: docker.io/linuxkit/init:d235d79635ffdd55b24df0f4c4b0351a7d03c394@sha256:46ac6a9432ad7008493154571311ed02fed8d58256dff155d0b47d0bba759a29
Process init image: linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38
Pull image: docker.io/linuxkit/runc:2649198589ef0020d99f613adaeda45ce0093a38@sha256:dd096c6ea03e6da232a0c6d01c1e0d2290c4031408f9c6000c89c9e6590a39da
Process init image: linuxkit/containerd:da02bbeae3c3b16d444e33f82abd2d00a818deae
Pull image: docker.io/linuxkit/containerd:da02bbeae3c3b16d444e33f82abd2d00a818deae@sha256:8eb0fb5f2bbc72007c25d978be0190e298b0869d53d655ca42c6cc94bf81dfa9
Add onboot containers:
  Create OCI config for linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
Pull image: docker.io/linuxkit/dhcpcd:7d2b8aaaf20c24ad7d11a5ea2ea5b4a80dc966f1@sha256:b1bef35accd165a4235ad301f9bef6544922cb6eafdb60268b05d8c9d0b1566b
  Create OCI config for linuxkit/test-kernel-config:2acaa564c1801dd2ae1546c70c472dc58ac030a1
Pull image: linuxkit/test-kernel-config:2acaa564c1801dd2ae1546c70c472dc58ac030a1
Pull image: linuxkit/test-kernel-config:2acaa564c1801dd2ae1546c70c472dc58ac030a1
  Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
Create outputs:
  ../artifacts/test.img.tar.gz
LABELS: linux, Debian, 8.7, amd64, build
ID: 95ee702d-56f7-4dba-a582-e6418b4dc257
[PASS    ] linuxkit.build.examples.minimal 30.00s
[PASS    ] linuxkit.build.examples.docker 76.17s
[PASS    ] linuxkit.build.examples.sshd 29.42s
[PASS    ] linuxkit.build.examples.redis 25.46s
[PASS    ] linuxkit.build.examples.swap 43.96s
[PASS    ] linuxkit.build.examples.node_exporter 27.97s
[PASS    ] linuxkit.build.outputs 436.85s
[PASS    ] linuxkit.platforms.qemu.run_kernel 44.66s
[PASS    ] linuxkit.platforms.qemu.run_iso 48.76s
[PASS    ] linuxkit.platforms.qemu.run_efi 49.84s
[PASS    ] linuxkit.platforms.qemu.run_qcow 139.28s
[PASS    ] linuxkit.platforms.qemu.run_raw 137.37s
[CANCEL  ] linuxkit.platforms.qemu.container 0.02s
[PASS    ] linuxkit.kernel.config_4.4.x 80.95s
[PASS    ] linuxkit.kernel.config_4.9.x 75.47s
[PASS    ] linuxkit.kernel.config_4.11.x 81.97s
[PASS    ] linuxkit.kernel.kmod_4.9.x 78.35s
[SKIP    ] linuxkit.security.docker-bench 0.00s
[PASS    ] linuxkit.security.ports 54.98s
[PASS    ] linuxkit.packages.binfmt 59.88s
[PASS    ] linuxkit.packages.ca-certificates 57.48s
[PASS    ] linuxkit.packages.dhcpcd 64.52s
[PASS    ] linuxkit.packages.mkimage 192.90s
[PASS    ] linuxkit.packages.sysctl 57.82s
[SUMMARY ] LogDir: 95ee702d-56f7-4dba-a582-e6418b4dc257
[SUMMARY ] Version: 8.7
[SUMMARY ] Passed: 22
[SUMMARY ] Failed: 0
[SUMMARY ] Cancelled: 1
[SUMMARY ] Skipped: 3
[SUMMARY ] Duration: 1894.31s
make[1]: Leaving directory '/tmp/build/test'
make -C pkg tag
make[1]: Entering directory '/tmp/build/pkg'
find: paths must precede expression: 1
Usage: find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|ratesmake[1]: Leaving directory '/tmp/build/pkg'
|opt|exec] [path...] [expression]
find: paths must precede expression: 1
Usage: find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec] [path...] [expression]
[2017-06-14 16:06.07] Fetching results
[2017-06-14 16:06.07] Running "scp" "-r" "-i" "/run/secrets/builder-ssh" "-o" "StrictHostKeyChecking=no" "root@35.187.7.40:/tmp/build/test/_results" "root@35.187.7.40:/tmp/build/artifacts" "."
[2017-06-14 16:06.13] Removing test VM...
[2017-06-14 16:06.13] Running "/gcloud/destroy.py" "linuxkit-ci-3"
INFO:root:Destroying VM
INFO:oauth2client.transport:Attempting refresh to obtain initial access_token
INFO:oauth2client.client:Refreshing access_token
INFO:root:Waiting for zone operation to finish
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
INFO:root:Operation in progress... waiting...
[2017-06-14 16:07.02] Saved build result test.img.tar.gz (cfdc09dd066a7f5a0d68b8a40a8d7b4585ba66f79065cb55ad3a23a116af0c1c)
[2017-06-14 16:07.02] Success
