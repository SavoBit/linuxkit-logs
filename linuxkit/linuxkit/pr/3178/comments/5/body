Accelerated versus non-accelerated is a good point on Mac OS as that could cause unexpected behavior. Do you know if it is possible to nest HVF virtualization and run it in Docker for Mac still?

My ideal situation would be containerized Qemu that still supports acceleration. This is how we deploy our images - Qemu inside Docker in Marathon. Inside that image, before running Qemu, we setup the disk, TAP interface, metadata disk, and run the image in a loop. But we’re not easily able to test the image in that environment on a Mac because our options are run directly in HyperKit or an unaccellerated Qemu container.

My container doesn’t actually invoke Linuxkit to run Qemu at runtime (we call Qemu from a bash script), but for users that deploy their images to Qemu and dev on a Mac, the closer it can be to a standard environment that people would use Qemu in the better (i.e. a Linux-like host).