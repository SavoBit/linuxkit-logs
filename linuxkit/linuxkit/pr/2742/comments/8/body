Is this over a year and a half old already? Wow.

Reviewing this, I _definitely_ prefer env vars over files. Even better would be if it actually could check the tty state itself, but this is good enough for now. I am going to rebase and push out to kick off CI again. If it passes, I would like to merge it in.