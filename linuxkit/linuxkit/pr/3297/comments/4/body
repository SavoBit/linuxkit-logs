With the latest commits, the kernel build is fixed but I had to disable the `perf` build (see https://github.com/linuxkit/linuxkit/issues/3299). To make this easier, I refactored the build of the `linuxkit/kernel-perf` package and moved the compilation into the `Dockerfile.perf`.

I've verified with a locally build kernel that the `kmod` tests pass with this new arrangement but have not yet recompiled all the current kernels. So the CI will fail again with this update.

@justincormack if you are ok with disabling `perf` builds for now (and the two new commits), I'll rebuild the current  set of kernel with the updated kernel build and kick CI again