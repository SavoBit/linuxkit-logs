See the individual commits for details (and smaller, more readable diffs). The none-cleanup changes are:

* support update of image with tagged release
* don't update a file in the vendor dir.