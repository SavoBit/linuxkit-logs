Sorry for all these changes
 - dropped putting GlobalConfig in its own namespace
 - squashed the git commit stuff
 - moved logging from Template to bake cli and writing it as comment into the result
 - add `Time.Now()` to log comment
 - gave Template a more defined surface based on a `Template`, `Result` and `Substitution` structures. `Template.Bake() (Result,error)` is the only public function. 

here is a result yml:

<details>

```

###-------------------------------AUTO-GENERATED-------------------------------###
#     time: 2018-01-12 08:28:29.070212358 +0100 CET m=+0.383653088
#-----------------------------------------------------------------------------------
# template: linuxkit/ca-certificates:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/ca-certificates
#   result: linuxkit/ca-certificates:de21b84d9b055ad9dcecc57965b654a7a24ef8e0
#-----------------------------------------------------------------------------------
# template: linuxkit/containerd:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/containerd
#   result: linuxkit/containerd:e58a382c33bb509ba3e0e8170dfaa5a100504c5b
#-----------------------------------------------------------------------------------
# template: linuxkit/dhcpcd:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/dhcpcd
#   result: linuxkit/dhcpcd:0d59a6cc03412289ef4313f2491ec666c1715cc9
#-----------------------------------------------------------------------------------
# template: linuxkit/getty:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/getty
#   result: linuxkit/getty:22e27189b6b354e1d5d38fc0536a5af3f2adb79f
#-----------------------------------------------------------------------------------
# template: linuxkit/init:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/init
#   result: linuxkit/init:5a577d070817b4f17821657823082651baafd4ed
#-----------------------------------------------------------------------------------
# template: linuxkit/rngd:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/rngd
#   result: linuxkit/rngd:94e01a4b16fadb053455cdc2269c4eb0b39199cd
#-----------------------------------------------------------------------------------
# template: linuxkit/runc:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/runc
#   result: linuxkit/runc:abc3f292653e64a2fd488e9675ace19a55ec7023
#-----------------------------------------------------------------------------------
# template: linuxkit/sysctl:<latest>
#   source: /home/user/go/src/github.com/linuxkit/linuxkit/pkg/sysctl
#   result: linuxkit/sysctl:4c1ef93bb5eb1a877318db4b2daa6768ed002e21
#-----------------------------------------------------------------------------------
kernel:
  image: linuxkit/kernel:4.9.75
  cmdline: console=tty0 console=ttyS0 console=ttyAMA0
init:
- linuxkit/init:5a577d070817b4f17821657823082651baafd4ed
- linuxkit/runc:abc3f292653e64a2fd488e9675ace19a55ec7023
- linuxkit/containerd:e58a382c33bb509ba3e0e8170dfaa5a100504c5b
- linuxkit/ca-certificates:de21b84d9b055ad9dcecc57965b654a7a24ef8e0
onboot:
- name: sysctl
  image: linuxkit/sysctl:4c1ef93bb5eb1a877318db4b2daa6768ed002e21
- name: dhcpcd
  image: linuxkit/dhcpcd:0d59a6cc03412289ef4313f2491ec666c1715cc9
  command:
  - /sbin/dhcpcd
  - --nobackground
  - -f
  - /dhcpcd.conf
  - "-1"
onshutdown:
- name: shutdown
  image: busybox:latest
  command:
  - /bin/echo
  - so long and thanks for all the fish
services:
- name: getty
  image: linuxkit/getty:22e27189b6b354e1d5d38fc0536a5af3f2adb79f
  env:
  - INSECURE=true
- name: rngd
  image: linuxkit/rngd:94e01a4b16fadb053455cdc2269c4eb0b39199cd
- name: nginx
  image: nginx:alpine
  capabilities:
  - CAP_NET_BIND_SERVICE
  - CAP_CHOWN
  - CAP_SETUID
  - CAP_SETGID
  - CAP_DAC_OVERRIDE
  binds:
  - /etc/resolv.conf:/etc/resolv.conf
trust:
  org:
  - linuxkit
  - library
files:
- path: etc/containerd/config.toml
  directory: false
  contents: |
    state = "/run/containerd"
    root = "/var/lib/containerd"
    snapshotter = "io.containerd.snapshotter.v1.overlayfs"
    differ = "io.containerd.differ.v1.base-diff"
    subreaper = false

    [grpc]
    address = "/run/containerd/containerd.sock"
    uid = 0
    gid = 0

    [debug]
    address = "/run/containerd/debug.sock"
    level = "info"

    [metrics]
    address = ":13337"
  optional: false
- path: etc/linuxkit-config
  directory: false
  metadata: yaml
  optional: false

```

</details>


It should be easier to review and extend now. I didnt implement 1:1 substitution because its not needed yet and pipes can be used.

EDIT: needed to add a deep copy function of `Moby` to make the result not change the initial template.