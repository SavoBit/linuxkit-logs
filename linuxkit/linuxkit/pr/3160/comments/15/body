Rebased against the tip of master, and made the requested changes to aarch64 and s390.  Added 4.18 to the mix, since it also has performance similar to that of 4.17.