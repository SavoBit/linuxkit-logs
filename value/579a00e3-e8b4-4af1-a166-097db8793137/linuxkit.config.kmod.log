[INFO    ] 2017-05-16T16:25:28.499177448Z: Running Test linuxkit.config.kmod in /tmp/with_clone39c0fc13/test/cases/000_config/010_kmod
[INFO    ] 2017-05-16T16:25:28.499292084Z: Running command: [/bin/sh -x /tmp/with_clone39c0fc13/test/cases/000_config/010_kmod/test.sh]
[STDERR  ] 2017-05-16T16:25:28.499755042Z: [    6.177538] ACPI: Power Button [PWRF]
[STDERR  ] 2017-05-16T16:25:28.499846715Z: [    6.182547] GHES: HEST is not enabled!
[STDERR  ] 2017-05-16T16:25:28.499916007Z: [    6.193856] ACPI: PCI Interrupt Link [GSIH] enabled at IRQ 23
[STDERR  ] 2017-05-16T16:25:28.499979008Z: [    6.199603] xenfs: not registering filesystem on non-xen platform
[STDERR  ] 2017-05-16T16:25:28.500053828Z: [    6.201866] Serial: 8250/16550 driver, 4 ports, IRQ sharing disabled
[STDERR  ] 2017-05-16T16:25:28.500112157Z: [    6.228185] 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A
[STDERR  ] 2017-05-16T16:25:28.500180341Z: [    6.235275] Initializing Nozomi driver 2.1d
[STDERR  ] 2017-05-16T16:25:28.500239651Z: [    6.239349] Non-volatile memory driver v1.3
[STDERR  ] 2017-05-16T16:25:28.500304866Z: [    6.245935] Hangcheck: starting hangcheck timer 0.9.1 (tick is 180 seconds, margin is 60 seconds).
[STDERR  ] 2017-05-16T16:25:28.500366121Z: [    6.250773] random: fast init done
[STDERR  ] 2017-05-16T16:25:28.50042111Z: [    6.251945] random: crng init done
[STDERR  ] 2017-05-16T16:25:28.500479484Z: [    6.286048] loop: module loaded
[STDERR  ] 2017-05-16T16:25:28.500537206Z: [    6.300706] nbd: registered device at major 43
[STDERR  ] 2017-05-16T16:25:28.50060192Z: [    6.342236] lpc_ich 0000:00:1f.0: I/O space for GPIO uninitialized
[STDERR  ] 2017-05-16T16:25:28.500663675Z: [    6.343828] VMware PVSCSI driver - version 1.0.7.0-k
[STDERR  ] 2017-05-16T16:25:28.500731615Z: [    6.344513] hv_vmbus: registering driver hv_storvsc
[STDERR  ] 2017-05-16T16:25:28.500793333Z: [    6.354817] ACPI: PCI Interrupt Link [GSIA] enabled at IRQ 16
[STDERR  ] 2017-05-16T16:25:28.50085773Z: [    6.360915] ahci 0000:00:1f.2: AHCI 0001.0000 32 slots 6 ports 1.5 Gbps 0x3f impl SATA mode
[STDERR  ] 2017-05-16T16:25:28.500914983Z: [    6.361577] ahci 0000:00:1f.2: flags: ncq only 
[STDERR  ] 2017-05-16T16:25:28.500961853Z: [    6.381453] scsi host0: ahci
[STDERR  ] 2017-05-16T16:25:28.50098062Z: [    6.384853] scsi host1: ahci
[STDERR  ] 2017-05-16T16:25:28.501075898Z: [    6.386987] scsi host2: ahci
[STDERR  ] 2017-05-16T16:25:28.501122093Z: [    6.389182] scsi host3: ahci
[STDERR  ] 2017-05-16T16:25:28.501182643Z: [    6.391482] scsi host4: ahci
[STDERR  ] 2017-05-16T16:25:28.501237609Z: [    6.393593] scsi host5: ahci
[STDERR  ] 2017-05-16T16:25:28.501298386Z: [    6.395338] ata1: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1100 irq 24
[STDERR  ] 2017-05-16T16:25:28.501355354Z: [    6.395877] ata2: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1180 irq 24
[STDERR  ] 2017-05-16T16:25:28.501366867Z: [    6.396361] ata3: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1200 irq 24
[STDERR  ] 2017-05-16T16:25:28.501468301Z: [    6.396836] ata4: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1280 irq 24
[STDERR  ] 2017-05-16T16:25:28.501525425Z: [    6.397312] ata5: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1300 irq 24
[STDERR  ] 2017-05-16T16:25:28.501584507Z: [    6.397786] ata6: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1380 irq 24
[STDERR  ] 2017-05-16T16:25:28.501641207Z: [    6.406847] Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)
[STDERR  ] 2017-05-16T16:25:28.501703973Z: [    6.425551] tun: Universal TUN/TAP device driver, 1.6
[STDERR  ] 2017-05-16T16:25:28.501760594Z: [    6.425928] tun: (C) 1999-2004 Max Krasnyansky <maxk@qualcomm.com>
[STDERR  ] 2017-05-16T16:25:28.501811376Z: [    6.427388] ena: Elastic Network Adapter (ENA) v1.0.2
[STDERR  ] 2017-05-16T16:25:28.501875057Z: [    6.428576] e1000: Intel(R) PRO/1000 Network Driver - version 7.3.21-k8-NAPI
[STDERR  ] 2017-05-16T16:25:28.50188622Z: [    6.429056] e1000: Copyright (c) 1999-2006 Intel Corporation.
[STDERR  ] 2017-05-16T16:25:28.501995199Z: [    6.437216] ACPI: PCI Interrupt Link [GSIG] enabled at IRQ 22
[STDERR  ] 2017-05-16T16:25:28.502065034Z: [    6.734477] ata2: SATA link down (SStatus 0 SControl 3
[STDERR  ] 2017-05-16T16:25:28.502154075Z: + set -e
[STDERR  ] 2017-05-16T16:25:28.502210124Z: + . /tmp/with_clone39c0fc13/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-16T16:25:28.502267188Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-16T16:25:28.502323436Z: + LINUXKIT_TMPDIR=/tmp/with_clone39c0fc13/test/cases/_tmp
[STDERR  ] 2017-05-16T16:25:28.502383925Z: + LINUXKIT_ARTIFACTS_DIR=/tmp/with_clone39c0fc13/test/cases/../../artifacts
[STDERR  ] 2017-05-16T16:25:28.502432127Z: + [ -f /tmp/with_clone39c0fc13/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-16T16:25:28.502500206Z: + . /tmp/with_clone39c0fc13/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-16T16:25:28.502563037Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone39c0fc13/test/cases/../../examples
[STDERR  ] 2017-05-16T16:25:28.50261569Z: + RT_CANCEL=253
[STDERR  ] 2017-05-16T16:25:28.502669062Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-16T16:25:28.502727109Z: + trap clean_up EXIT
[STDERR  ] 2017-05-16T16:25:28.502783119Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-16T16:25:31.58700645Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-16T16:25:31.644874861Z: Digest: sha256:dd706d391fddc3d2efc254a6c03223d6cb82b86a3dc059a9264063be2fd8911f
[STDOUT  ] 2017-05-16T16:25:31.644891522Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T16:25:31.647726009Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-16T16:25:31.659734285Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-16T16:25:31.82525999Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-16T16:25:31.884893947Z:  ---> cc9f6cd19506
[STDOUT  ] 2017-05-16T16:25:31.884926629Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-16T16:25:31.884945555Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-16T16:25:31.8849668Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-16T16:25:32.327060753Z:  ---> Using cache
[STDOUT  ] 2017-05-16T16:25:32.327101235Z:  ---> e8b0f171a47f
[STDOUT  ] 2017-05-16T16:25:32.327120607Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-16T16:25:32.344298254Z:  ---> Using cache
[STDOUT  ] 2017-05-16T16:25:32.344307487Z:  ---> 22f66ae165a4
[STDOUT  ] 2017-05-16T16:25:32.34433925Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-16T16:25:32.344374886Z:  ---> Using cache
[STDOUT  ] 2017-05-16T16:25:32.344395505Z:  ---> 08f7bb43d217
[STDOUT  ] 2017-05-16T16:25:32.344413629Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-16T16:25:32.34443208Z:  ---> Using cache
[STDOUT  ] 2017-05-16T16:25:32.344450657Z:  ---> c186beab57c7
[STDOUT  ] 2017-05-16T16:25:32.344470247Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-16T16:25:32.344488917Z:  ---> Using cache
[STDOUT  ] 2017-05-16T16:25:32.34450695Z:  ---> b9f31871c727
[STDOUT  ] 2017-05-16T16:25:32.344545827Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-16T16:25:32.344567259Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-16T16:25:32.34459461Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-16T16:25:32.850231937Z:  ---> d9c6aeee3d85
[STDOUT  ] 2017-05-16T16:25:32.867518096Z: Removing intermediate container 32cd3c67d056
[STDOUT  ] 2017-05-16T16:25:32.867540173Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-16T16:25:33.338231854Z:  ---> d7781eadde81
[STDOUT  ] 2017-05-16T16:25:33.355387175Z: Removing intermediate container 50f54a28d6ef
[STDOUT  ] 2017-05-16T16:25:33.355409174Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-16T16:25:33.47106797Z:  ---> Running in b3bbb9c28338
[STDOUT  ] 2017-05-16T16:25:33.658711856Z:  ---> 05c9f2945658
[STDOUT  ] 2017-05-16T16:25:33.675978196Z: Removing intermediate container b3bbb9c28338
[STDOUT  ] 2017-05-16T16:25:33.676000887Z: Successfully built 05c9f2945658
[STDOUT  ] 2017-05-16T16:25:33.67601329Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-16T16:25:33.757865573Z: + moby build kmod
[STDERR  ] 2017-05-16T16:25:33.767420192Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T16:25:37.732519568Z: Add init containers:
[STDERR  ] 2017-05-16T16:25:37.732665269Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-16T16:25:38.133924446Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-16T16:25:38.706335102Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-16T16:25:40.994236805Z: Add onboot containers:
[STDERR  ] 2017-05-16T16:25:40.994354355Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-16T16:25:41.476900329Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-16T16:25:41.964139462Z: Create outputs:
[STDERR  ] 2017-05-16T16:25:46.401155754Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-16T16:25:46.604964868Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-16T16:25:46.605003901Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-16T16:26:12.292003441Z: + clean_up
[STDERR  ] 2017-05-16T16:26:12.29202953Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-16T16:26:12.350689298Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-16T16:26:12.350702688Z: Deleted: sha256:05c9f2945658297803ef4d59b43101137bbf755033dc7eaf951dea2d92bce3ed
[STDOUT  ] 2017-05-16T16:26:12.350751418Z: Deleted: sha256:d7781eadde81a0fda0823789ec2a5a38507a22e4f53d1b6e36fec3001976d0fd
[STDOUT  ] 2017-05-16T16:26:12.350772293Z: Deleted: sha256:830b5ad79bc7942858da9f9337671d91c6e318a0210e0c411b9a1debbad16ed3
[STDOUT  ] 2017-05-16T16:26:12.350788416Z: Deleted: sha256:d9c6aeee3d85b3366617410c113b683137ffc4fa3583cd092c0a948c7c91ee38
[STDOUT  ] 2017-05-16T16:26:12.35082169Z: Deleted: sha256:5f46e8805aa3fbd2d6a067f60f0159241c8c5fb6deeae364467354ba9d15b065
[STDERR  ] 2017-05-16T16:26:12.353169474Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.config.kmod 43.87s
