[INFO    ] 2017-05-28T10:19:37.428188306Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_cloneb1cd7be/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-28T10:19:37.428299136Z: Running command: [/bin/sh -x /tmp/with_cloneb1cd7be/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-28T10:19:37.429549385Z: + set -e
[STDERR  ] 2017-05-28T10:19:37.429595417Z: + . /tmp/with_cloneb1cd7be/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-28T10:19:37.429678766Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-28T10:19:37.429734535Z: + LINUXKIT_TMPDIR=/tmp/with_cloneb1cd7be/test/cases/_tmp
[STDERR  ] 2017-05-28T10:19:37.429794958Z: + [ -f /tmp/with_cloneb1cd7be/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-28T10:19:37.429825926Z: + . /tmp/with_cloneb1cd7be/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-28T10:19:37.429878799Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_cloneb1cd7be/test/cases/../../examples
[STDERR  ] 2017-05-28T10:19:37.429923327Z: + RT_CANCEL=253
[STDERR  ] 2017-05-28T10:19:37.429968111Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-28T10:19:37.43001117Z: + trap clean_up EXIT
[STDERR  ] 2017-05-28T10:19:37.430050657Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-28T10:19:38.670395186Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-28T10:19:38.670412521Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-28T10:19:38.670422563Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-28T10:19:38.737640066Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-28T10:19:38.749410435Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-28T10:19:38.913403369Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-28T10:19:38.974339409Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-28T10:19:38.974391545Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-28T10:19:38.974419116Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-28T10:19:38.974427662Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-28T10:19:40.594414441Z:  ---> 59e822de06d5
[STDOUT  ] 2017-05-28T10:19:40.61534711Z: Removing intermediate container 139e65be912b
[STDOUT  ] 2017-05-28T10:19:40.61535536Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-28T10:19:40.74334938Z:  ---> Running in 265b11a47476
[STDOUT  ] 2017-05-28T10:19:45.71441878Z:  ---> 6c7a1a3afacd
[STDOUT  ] 2017-05-28T10:19:46.160446734Z: Removing intermediate container 265b11a47476
[STDOUT  ] 2017-05-28T10:19:46.160463081Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-28T10:19:46.562181509Z:  ---> ee51037650ed
[STDOUT  ] 2017-05-28T10:19:46.578939299Z: Removing intermediate container 4daf9c14585d
[STDOUT  ] 2017-05-28T10:19:46.578958336Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-28T10:19:47.266112271Z:  ---> a3b898f6611d
[STDOUT  ] 2017-05-28T10:19:47.282863848Z: Removing intermediate container 2aadfa7811a1
[STDOUT  ] 2017-05-28T10:19:47.282877528Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-28T10:19:47.399538483Z:  ---> Running in e3f9982ca59b
[STDOUT  ] 2017-05-28T10:19:47.836161415Z: make -C /usr/src/linux-headers-4.9.29-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-28T10:19:47.852937053Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-28T10:19:48.699268732Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-28T10:19:48.895148445Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-28T10:19:48.911956692Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-28T10:19:48.928726015Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-28T10:19:49.089372774Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-28T10:19:49.106058585Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-28T10:19:49.721835178Z:  ---> 8d0b9d49de91
[STDOUT  ] 2017-05-28T10:19:49.738615375Z: Removing intermediate container e3f9982ca59b
[STDOUT  ] 2017-05-28T10:19:49.73865927Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-28T10:19:49.738679337Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-28T10:19:49.738688162Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-28T10:19:50.24185477Z:  ---> 42a7f77ce894
[STDOUT  ] 2017-05-28T10:19:50.258562046Z: Removing intermediate container a16994b37f8e
[STDOUT  ] 2017-05-28T10:19:50.258582967Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-28T10:19:50.770052006Z:  ---> 6b0e1a21295b
[STDOUT  ] 2017-05-28T10:19:50.786747024Z: Removing intermediate container 9ac94c159f32
[STDOUT  ] 2017-05-28T10:19:50.78676649Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-28T10:19:50.888228399Z:  ---> Running in 99798ce1a99b
[STDOUT  ] 2017-05-28T10:19:51.082661181Z:  ---> ea223aa8b205
[STDOUT  ] 2017-05-28T10:19:51.099443086Z: Removing intermediate container 99798ce1a99b
[STDOUT  ] 2017-05-28T10:19:51.099496325Z: Successfully built ea223aa8b205
[STDOUT  ] 2017-05-28T10:19:51.099500911Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-28T10:19:51.191758872Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-28T10:19:51.201200381Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-28T10:19:53.807429378Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-28T10:19:53.807504321Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-28T10:20:00.781158167Z: Add init containers:
[STDERR  ] 2017-05-28T10:20:00.781286776Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-28T10:20:00.781318812Z: Pull image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-28T10:20:03.856061256Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-28T10:20:03.856100139Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-28T10:20:07.401764634Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-28T10:20:07.401806193Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-28T10:20:15.024716317Z: Add onboot containers:
[STDERR  ] 2017-05-28T10:20:15.024767058Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-28T10:20:15.603657958Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-28T10:20:15.640473396Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-28T10:20:19.21566842Z: Create outputs:
[STDERR  ] 2017-05-28T10:20:25.077682355Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-28T10:20:25.270586021Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-28T10:20:25.270784601Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-28T10:20:49.778970987Z: + clean_up
[STDERR  ] 2017-05-28T10:20:49.77904494Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-28T10:20:49.832111812Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-28T10:20:49.832151502Z: Deleted: sha256:ea223aa8b205584cc5ae6693cdf26e771de8636825a6b4bb0916b87c3e8075cb
[STDOUT  ] 2017-05-28T10:20:49.832179154Z: Deleted: sha256:6b0e1a21295b07608dbebe0cfe8f2b43b2c467fce70d80fa67bc121185bbae10
[STDOUT  ] 2017-05-28T10:20:49.832197149Z: Deleted: sha256:8af13a490811b0fae838a4e08a9abc21b1d2911d345ef526372da389a635ebd1
[STDOUT  ] 2017-05-28T10:20:49.832207512Z: Deleted: sha256:42a7f77ce8948f2f6eaf117b4e25a285ed72913bc16d2419298e187c53a85f8b
[STDOUT  ] 2017-05-28T10:20:49.832241748Z: Deleted: sha256:e9163a3bab30afb2b3a4947dc0e016527e9aa30c03f89209ef86eb42dc1b5964
[STDERR  ] 2017-05-28T10:20:49.833928058Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 72.43s
