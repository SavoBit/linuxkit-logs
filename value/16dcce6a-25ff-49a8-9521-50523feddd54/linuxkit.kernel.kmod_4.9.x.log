[INFO    ] 2017-07-31T14:35:10.943646688Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-07-31T14:35:10.943748834Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-07-31T14:35:10.949755457Z: + set -e
[STDERR  ] 2017-07-31T14:35:10.94984081Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-07-31T14:35:10.949854904Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-07-31T14:35:10.94986771Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-07-31T14:35:10.949877854Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-07-31T14:35:10.949896263Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-07-31T14:35:10.949906826Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-07-31T14:35:10.94993789Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/build/test/cases/../../blueprints
[STDERR  ] 2017-07-31T14:35:10.949951928Z: + RT_CANCEL=253
[STDERR  ] 2017-07-31T14:35:10.949962198Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-07-31T14:35:10.949973239Z: + trap clean_up EXIT
[STDERR  ] 2017-07-31T14:35:10.949983521Z: + docker pull linuxkit/kernel:4.9.40
[STDOUT  ] 2017-07-31T14:35:12.235097531Z: 4.9.40: Pulling from linuxkit/kernel
[STDOUT  ] 2017-07-31T14:35:12.235540903Z: Digest: sha256:ab0023aa0914639f651141dc6b15c583041dba506d0bc96cb4e6333aa79bd2b8
[STDOUT  ] 2017-07-31T14:35:12.235583228Z: Status: Image is up to date for linuxkit/kernel:4.9.40
[STDERR  ] 2017-07-31T14:35:12.23683055Z: + docker build -t kmod-test .
[STDOUT  ] 2017-07-31T14:35:12.281845185Z: Sending build context to Docker daemon  8.704kB
[STDOUT  ] 2017-07-31T14:35:12.371642482Z: Step 1/11 : FROM linuxkit/kernel:4.9.40 AS ksrc
[STDOUT  ] 2017-07-31T14:35:12.404023156Z:  ---> d87f93c03b45
[STDOUT  ] 2017-07-31T14:35:12.404108718Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-07-31T14:35:13.586264684Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-07-31T14:35:13.586315681Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-07-31T14:35:13.596902494Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-07-31T14:35:17.182594494Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-07-31T14:35:23.329857387Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-07-31T14:35:23.343715388Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-31T14:35:23.346548149Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-31T14:35:23.347124537Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-07-31T14:35:23.347150324Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-07-31T14:35:25.07271194Z:  ---> da9f2a9f72ca
[STDOUT  ] 2017-07-31T14:35:25.092530161Z: Removing intermediate container 5cf753fa31b1
[STDOUT  ] 2017-07-31T14:35:25.092579083Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-07-31T14:35:25.162628868Z:  ---> Running in 06071e3cbed3
[STDOUT  ] 2017-07-31T14:35:30.821091854Z:  ---> e2e9a0f4b7c3
[STDOUT  ] 2017-07-31T14:35:31.198925187Z: Removing intermediate container 06071e3cbed3
[STDOUT  ] 2017-07-31T14:35:31.198999173Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-07-31T14:35:31.473092036Z:  ---> 42a4540b3566
[STDOUT  ] 2017-07-31T14:35:31.479299087Z: Removing intermediate container 9e5a7c463d1c
[STDOUT  ] 2017-07-31T14:35:31.479354507Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-07-31T14:35:31.964942906Z:  ---> 652a00cb2cbe
[STDOUT  ] 2017-07-31T14:35:31.971085982Z: Removing intermediate container b44380ad663b
[STDOUT  ] 2017-07-31T14:35:31.971134415Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-07-31T14:35:32.042757537Z:  ---> Running in 75613a08ffab
[STDOUT  ] 2017-07-31T14:35:32.353625188Z: make -C /usr/src/linux-headers-4.9.40-linuxkit M=/kmod modules
[STDOUT  ] 2017-07-31T14:35:32.354773398Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.40-linuxkit'
[STDOUT  ] 2017-07-31T14:35:33.183708712Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-07-31T14:35:33.375242344Z:   Building modules, stage 2.
[STDOUT  ] 2017-07-31T14:35:33.383429226Z:   MODPOST 1 modules
[STDOUT  ] 2017-07-31T14:35:33.395152907Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-07-31T14:35:33.580356065Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-07-31T14:35:33.583529775Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.40-linuxkit'
[STDOUT  ] 2017-07-31T14:35:34.048865348Z:  ---> 3387b57b3067
[STDOUT  ] 2017-07-31T14:35:34.057256699Z: Removing intermediate container 75613a08ffab
[STDOUT  ] 2017-07-31T14:35:34.057325315Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-07-31T14:35:35.306544416Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-07-31T14:35:35.306608468Z: 019300c8a437: Pulling fs layer
[STDOUT  ] 2017-07-31T14:35:35.924378001Z: 019300c8a437: Verifying Checksum
[STDOUT  ] 2017-07-31T14:35:35.924504548Z: 019300c8a437: Download complete
[STDOUT  ] 2017-07-31T14:35:36.443289329Z: 019300c8a437: Pull complete
[STDOUT  ] 2017-07-31T14:35:36.502664054Z: Digest: sha256:af2a5bd2f8de8fc1ecabf1c76611cdc6a5f1ada1a2bdd7d3816e121b70300308
[STDOUT  ] 2017-07-31T14:35:37.114518535Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-07-31T14:35:37.114975509Z:  ---> 074d602a59d7
[STDOUT  ] 2017-07-31T14:35:37.115062796Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-07-31T14:35:37.464956129Z:  ---> 62e7d5e30f5b
[STDOUT  ] 2017-07-31T14:35:37.471227398Z: Removing intermediate container b4d65dea302c
[STDOUT  ] 2017-07-31T14:35:37.471292379Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-07-31T14:35:37.800888809Z:  ---> efe7a835cf92
[STDOUT  ] 2017-07-31T14:35:37.807242044Z: Removing intermediate container 8fd0187e3cb0
[STDOUT  ] 2017-07-31T14:35:37.807325163Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-07-31T14:35:37.881924752Z:  ---> Running in c2656fa3df0a
[STDOUT  ] 2017-07-31T14:35:38.029844664Z:  ---> 20315d918b27
[STDOUT  ] 2017-07-31T14:35:38.035704037Z: Removing intermediate container c2656fa3df0a
[STDOUT  ] 2017-07-31T14:35:38.035752204Z: Successfully built 20315d918b27
[STDOUT  ] 2017-07-31T14:35:38.040205376Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-07-31T14:35:38.075312607Z: + moby build -output kernel+initrd kmod.yml
[STDERR  ] 2017-07-31T14:35:38.085622306Z: Extract kernel image: linuxkit/kernel:4.9.40
[STDERR  ] 2017-07-31T14:35:39.78712778Z: Add init containers:
[STDERR  ] 2017-07-31T14:35:39.787195125Z: Process init image: linuxkit/init:4dcee04c04c900a5796dc719f8d16fea7e771059
[STDERR  ] 2017-07-31T14:35:41.017950249Z: Process init image: linuxkit/runc:f5960b83a8766ae083efc744fa63dbf877450e4f
[STDERR  ] 2017-07-31T14:35:42.276222701Z: Add onboot containers:
[STDERR  ] 2017-07-31T14:35:42.27629738Z:   Create OCI config for kmod-test
[STDERR  ] 2017-07-31T14:35:42.4365511Z:   Create OCI config for linuxkit/poweroff:3845c4d64d47a1ea367806be5547e44594b0fa91
[STDERR  ] 2017-07-31T14:35:43.65017603Z: Create outputs:
[STDERR  ] 2017-07-31T14:35:47.100799449Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-07-31T14:35:47.139978129Z: + linuxkit run kmod
[STDERR  ] 2017-07-31T14:35:47.158527948Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-07-31T14:35:47.636340245Z: qemu-system-x86_64: Device needs media, but drive is empty
[STDERR  ] 2017-07-31T14:35:47.636398589Z: qemu-system-x86_64: Initialization of device ide-hd failed: Device initialization failed.
[STDERR  ] 2017-07-31T14:35:47.9652073Z: time="2017-07-31T14:35:47Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-07-31T14:35:47.967303281Z: + RESULT=
[STDERR  ] 2017-07-31T14:35:47.96733361Z: + clean_up
[STDERR  ] 2017-07-31T14:35:47.96734962Z: + docker rmi kmod-test
[STDOUT  ] 2017-07-31T14:35:47.985642715Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-07-31T14:35:47.985701231Z: Deleted: sha256:20315d918b274f09bb8aa31cf85bf12a289a18ba31bfb6cf0c4df2a6efcd31cd
[STDOUT  ] 2017-07-31T14:35:47.985722421Z: Deleted: sha256:efe7a835cf92f4c6c932eba21e64ac42ae5937c6e1405d8db0dadb059a1d5272
[STDOUT  ] 2017-07-31T14:35:47.985730559Z: Deleted: sha256:b48fa7085983c189b655fb5e697c0a23c1c26f5e1f381db82b4c6006e7c5a923
[STDOUT  ] 2017-07-31T14:35:47.985737296Z: Deleted: sha256:62e7d5e30f5b8c89911fb9ba50d524dc118ccc7cb5a10147359a4eb76e42e793
[STDOUT  ] 2017-07-31T14:35:47.985744054Z: Deleted: sha256:960e999c3ef7106f690f22d8c53d3fcac6ca720cc6c6c7ffb05bbb6fef53a6b0
[STDERR  ] 2017-07-31T14:35:47.986683465Z: + find . -depth -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[FAIL    ] linuxkit.kernel.kmod_4.9.x 37.05s
