[INFO    ] 2017-05-26T22:17:16.008406626Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-26T22:17:16.008516819Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-26T22:17:16.028663062Z: + set -e
[STDERR  ] 2017-05-26T22:17:16.028746696Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-26T22:17:16.028834128Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-26T22:17:16.028892584Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-26T22:17:16.028932474Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-26T22:17:16.028972839Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-26T22:17:16.029016602Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-26T22:17:16.02904869Z: + RT_CANCEL=253
[STDERR  ] 2017-05-26T22:17:16.029074767Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-26T22:17:16.029109374Z: + trap clean_up EXIT
[STDERR  ] 2017-05-26T22:17:16.029138635Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-26T22:17:17.186790346Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-26T22:17:17.186942756Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-26T22:17:17.187069036Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-26T22:17:17.18805656Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-26T22:17:17.266515803Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-26T22:17:17.285905254Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-26T22:17:17.295085723Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-26T22:17:17.295154531Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-26T22:17:18.433965559Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-26T22:17:18.53953345Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-26T22:17:18.588220096Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-26T22:17:21.626937476Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-26T22:17:21.628378188Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-26T22:17:29.122124707Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-26T22:17:29.137131557Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-26T22:17:29.141390492Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-26T22:17:29.141746285Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-26T22:17:29.141855169Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-26T22:17:32.016080768Z:  ---> 0dddb8b5e4dc
[STDOUT  ] 2017-05-26T22:17:32.076109161Z: Removing intermediate container bd7b24f3907a
[STDOUT  ] 2017-05-26T22:17:32.076276765Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-26T22:17:32.252270684Z:  ---> Running in acb93b4d9425
[STDOUT  ] 2017-05-26T22:17:41.162466399Z:  ---> 12382227cede
[STDOUT  ] 2017-05-26T22:17:41.576141013Z: Removing intermediate container acb93b4d9425
[STDOUT  ] 2017-05-26T22:17:41.576283221Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-26T22:17:41.918965239Z:  ---> 03f9e5d639b0
[STDOUT  ] 2017-05-26T22:17:41.95305352Z: Removing intermediate container c1cc6f668241
[STDOUT  ] 2017-05-26T22:17:41.953273046Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-26T22:17:42.351098525Z:  ---> 21db13d9d247
[STDOUT  ] 2017-05-26T22:17:42.375783027Z: Removing intermediate container 6f46b5208d69
[STDOUT  ] 2017-05-26T22:17:42.375952399Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-26T22:17:42.527378459Z:  ---> Running in 97e8b8c78a35
[STDOUT  ] 2017-05-26T22:17:42.75278041Z: make -C /usr/src/linux-headers-4.9.29-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-26T22:17:42.754181025Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-26T22:17:43.922305373Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-26T22:17:44.138359371Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-26T22:17:44.145990329Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-26T22:17:44.157478042Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-26T22:17:44.399834637Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-26T22:17:44.403614927Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-26T22:17:44.720581603Z:  ---> 148abfc13f3c
[STDOUT  ] 2017-05-26T22:17:44.736322364Z: Removing intermediate container 97e8b8c78a35
[STDOUT  ] 2017-05-26T22:17:44.73640658Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-26T22:17:45.92340684Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-26T22:17:45.942824111Z: 6f821164d5b7: Already exists
[STDOUT  ] 2017-05-26T22:17:46.440761747Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-05-26T22:17:46.482918142Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-26T22:17:46.48331495Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-26T22:17:46.483440848Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-26T22:17:46.835098098Z:  ---> 82693aff1632
[STDOUT  ] 2017-05-26T22:17:46.880531484Z: Removing intermediate container 55b2e0596eea
[STDOUT  ] 2017-05-26T22:17:46.880672891Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-26T22:17:47.240842341Z:  ---> b0377cfe85dd
[STDOUT  ] 2017-05-26T22:17:47.274571673Z: Removing intermediate container 392dfae83f72
[STDOUT  ] 2017-05-26T22:17:47.274708761Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-26T22:17:47.473078637Z:  ---> Running in 6ce11e8bd225
[STDOUT  ] 2017-05-26T22:17:47.636269016Z:  ---> 370d53f03235
[STDOUT  ] 2017-05-26T22:17:47.654132162Z: Removing intermediate container 6ce11e8bd225
[STDOUT  ] 2017-05-26T22:17:47.654226631Z: Successfully built 370d53f03235
[STDOUT  ] 2017-05-26T22:17:47.676295809Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-26T22:17:47.730656716Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-26T22:17:47.740426285Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-26T22:17:48.35080525Z: Add init containers:
[STDERR  ] 2017-05-26T22:17:48.350849096Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-26T22:17:48.511837317Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-26T22:17:48.825724666Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-26T22:17:49.421129569Z: Add onboot containers:
[STDERR  ] 2017-05-26T22:17:49.421186702Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-26T22:17:49.761865721Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-26T22:17:49.980047222Z: Create outputs:
[STDERR  ] 2017-05-26T22:17:57.021130319Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-26T22:17:57.066130477Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-26T22:17:57.067002935Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-26T22:17:57.080608876Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-26T22:18:18.97655812Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-26T22:18:18.980078732Z: time="2017-05-26T22:18:18Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-26T22:18:18.980091526Z: + clean_up
[STDERR  ] 2017-05-26T22:18:18.980100685Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-26T22:18:19.014929595Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-26T22:18:19.014938575Z: Deleted: sha256:370d53f03235a90463e0aa1c496029dc382a2a7bbf94f834a5cdbf4b7ade56b2
[STDOUT  ] 2017-05-26T22:18:19.014952887Z: Deleted: sha256:b0377cfe85dd97a1c3598d07c0b252f8b5b990b6fdc7a5f11790db29b7c6aa04
[STDOUT  ] 2017-05-26T22:18:19.014962869Z: Deleted: sha256:56db7be31b730ae428c7a37993ace7d5297fd7c17e0b57680508a8e23e130fda
[STDOUT  ] 2017-05-26T22:18:19.014978093Z: Deleted: sha256:82693aff1632b8742e74b97a9e52f3fc991b56d0abfcb516ec89694177d834d5
[STDOUT  ] 2017-05-26T22:18:19.014984382Z: Deleted: sha256:4af3e92bc1e43dd716c8b3dc2f6d83c37036edd80a4823fbcc2fecb600902878
[STDERR  ] 2017-05-26T22:18:19.015773027Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 63.03s
