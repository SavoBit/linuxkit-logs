[INFO    ] 2017-05-22T20:34:10.541310408Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-22T20:34:10.541381611Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-22T20:34:10.571708156Z: + set -e
[STDERR  ] 2017-05-22T20:34:10.57174863Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-22T20:34:10.571804963Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-22T20:34:10.57184396Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-22T20:34:10.571881184Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-22T20:34:10.571911217Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-22T20:34:10.571938359Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-22T20:34:10.571978862Z: + RT_CANCEL=253
[STDERR  ] 2017-05-22T20:34:10.571993208Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-22T20:34:10.572031388Z: + trap clean_up EXIT
[STDERR  ] 2017-05-22T20:34:10.572058994Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-22T20:34:11.688042236Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-22T20:34:11.688226697Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-22T20:34:11.688262566Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-22T20:34:11.689146034Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-22T20:34:11.734200629Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-22T20:34:11.75599183Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-22T20:34:11.781686662Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-22T20:34:11.781839471Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-22T20:34:13.156773401Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-22T20:34:13.156794789Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-22T20:34:13.163574258Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-22T20:34:16.947049292Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-22T20:34:16.947111027Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-22T20:34:23.626961599Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-22T20:34:23.637736907Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-22T20:34:23.641098535Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-22T20:34:23.641512827Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-22T20:34:23.641624803Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-22T20:34:25.778805338Z:  ---> d01d8720050f
[STDOUT  ] 2017-05-22T20:34:25.793486495Z: Removing intermediate container 5a73e5687f58
[STDOUT  ] 2017-05-22T20:34:25.793603669Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-22T20:34:25.858993103Z:  ---> Running in be895968b5a5
[STDOUT  ] 2017-05-22T20:34:32.241089387Z:  ---> e858d065566a
[STDOUT  ] 2017-05-22T20:34:32.62859257Z: Removing intermediate container be895968b5a5
[STDOUT  ] 2017-05-22T20:34:32.628736538Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-22T20:34:32.914266438Z:  ---> f3f8c3ef7434
[STDOUT  ] 2017-05-22T20:34:32.928011092Z: Removing intermediate container 4871a53993bb
[STDOUT  ] 2017-05-22T20:34:32.928153662Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-22T20:34:33.274927727Z:  ---> 709cc312bf2d
[STDOUT  ] 2017-05-22T20:34:33.307489438Z: Removing intermediate container 565b685d9601
[STDOUT  ] 2017-05-22T20:34:33.307594105Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-22T20:34:33.482409436Z:  ---> Running in fd6b1b6265b6
[STDOUT  ] 2017-05-22T20:34:33.697222633Z: make -C /usr/src/linux-headers-4.9.29-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-22T20:34:33.698427666Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-22T20:34:34.725991263Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-22T20:34:34.91814991Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-22T20:34:34.925106665Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-22T20:34:34.935376578Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-22T20:34:35.107758702Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-22T20:34:35.110178289Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-22T20:34:35.58601837Z:  ---> 222709f0ce61
[STDOUT  ] 2017-05-22T20:34:35.609554608Z: Removing intermediate container fd6b1b6265b6
[STDOUT  ] 2017-05-22T20:34:35.609657207Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-22T20:34:36.721021582Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-22T20:34:36.734973511Z: cfc728c1c558: Already exists
[STDOUT  ] 2017-05-22T20:34:37.241196671Z: Digest: sha256:c0537ff6a5218ef531ece93d4984efc99bbf3f7497c0a7726c88e2bb7584dc96
[STDOUT  ] 2017-05-22T20:34:37.260932822Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-22T20:34:37.261249695Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-22T20:34:37.261342948Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-22T20:34:37.611296274Z:  ---> bfa4e7d9f673
[STDOUT  ] 2017-05-22T20:34:37.671312427Z: Removing intermediate container 5ce3d9a2a118
[STDOUT  ] 2017-05-22T20:34:37.671453675Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-22T20:34:37.959824193Z:  ---> 8eb8ae26330a
[STDOUT  ] 2017-05-22T20:34:37.973940261Z: Removing intermediate container 328ac51994a8
[STDOUT  ] 2017-05-22T20:34:37.974067206Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-22T20:34:38.059751063Z:  ---> Running in bec8adfcbb7e
[STDOUT  ] 2017-05-22T20:34:38.148269149Z:  ---> 1a3341bf9d0a
[STDOUT  ] 2017-05-22T20:34:38.170788696Z: Removing intermediate container bec8adfcbb7e
[STDOUT  ] 2017-05-22T20:34:38.170897541Z: Successfully built 1a3341bf9d0a
[STDOUT  ] 2017-05-22T20:34:38.179483978Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-22T20:34:38.192397437Z: + moby build kmod
[STDERR  ] 2017-05-22T20:34:38.202646493Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-22T20:34:38.720949269Z: Add init containers:
[STDERR  ] 2017-05-22T20:34:38.720987626Z: Process init image: linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
[STDERR  ] 2017-05-22T20:34:38.855781274Z: Process init image: linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
[STDERR  ] 2017-05-22T20:34:39.015452715Z: Process init image: linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
[STDERR  ] 2017-05-22T20:34:39.492442563Z: Add onboot containers:
[STDERR  ] 2017-05-22T20:34:39.492488696Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-22T20:34:39.627684383Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-22T20:34:39.759385472Z: Create outputs:
[STDERR  ] 2017-05-22T20:34:45.828977662Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-22T20:34:45.877776841Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-22T20:34:45.878714376Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-22T20:34:45.885248073Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-22T20:35:04.763832781Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-22T20:35:04.765518413Z: time="2017-05-22T20:35:04Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-22T20:35:04.765524331Z: + clean_up
[STDERR  ] 2017-05-22T20:35:04.765535451Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-22T20:35:04.844205557Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-22T20:35:04.844262126Z: Deleted: sha256:1a3341bf9d0aafbf2b9948eb5ed979e5be9a86bbaaf2cdb8bfc44f760d3a6b6b
[STDOUT  ] 2017-05-22T20:35:04.844265894Z: Deleted: sha256:8eb8ae26330ad42e615163f359fa0c9797bd9c142829ac3a112ef24eb7df9f96
[STDOUT  ] 2017-05-22T20:35:04.844275417Z: Deleted: sha256:aa2ec78d08dd5b993b70b365a829ea6e3991558c612d537cf2706e793506c569
[STDOUT  ] 2017-05-22T20:35:04.844285925Z: Deleted: sha256:bfa4e7d9f67376f7df418b18194eb7e37bf11b9cc47ae9173dccdf0400c5d7a0
[STDOUT  ] 2017-05-22T20:35:04.844292553Z: Deleted: sha256:5ed300fc3de8b02dc4e73bff870629679a368052f4c9e1469b24b04354780d0f
[STDERR  ] 2017-05-22T20:35:04.845025114Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 54.33s
