[INFO    ] 2017-05-16T10:51:06.434190799Z: Running Test linuxkit.config.kmod in /tmp/linuxkit-710e815/src/test/cases/000_config/010_kmod
[INFO    ] 2017-05-16T10:51:06.43429045Z: Running command: [/bin/sh -x /tmp/linuxkit-710e815/src/test/cases/000_config/010_kmod/test.sh]
[STDERR  ] 2017-05-16T10:51:06.454375273Z: + set -e
[STDERR  ] 2017-05-16T10:51:06.454436524Z: + . /tmp/linuxkit-710e815/src/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-16T10:51:06.454462643Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-16T10:51:06.454468847Z: + LINUXKIT_TMPDIR=/tmp/linuxkit-710e815/src/test/cases/_tmp
[STDERR  ] 2017-05-16T10:51:06.454503353Z: + LINUXKIT_ARTIFACTS_DIR=/tmp/linuxkit-710e815/src/test/cases/../../artifacts
[STDERR  ] 2017-05-16T10:51:06.454523621Z: + [ -f /tmp/linuxkit-710e815/src/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-16T10:51:06.454542756Z: + . /tmp/linuxkit-710e815/src/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-16T10:51:06.454564733Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/linuxkit-710e815/src/test/cases/../../examples
[STDERR  ] 2017-05-16T10:51:06.454577233Z: + RT_CANCEL=253
[STDERR  ] 2017-05-16T10:51:06.45460495Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-16T10:51:06.454632141Z: + trap clean_up EXIT
[STDERR  ] 2017-05-16T10:51:06.454651679Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-16T10:51:09.504703077Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-16T10:51:09.56459595Z: Digest: sha256:dd706d391fddc3d2efc254a6c03223d6cb82b86a3dc059a9264063be2fd8911f
[STDOUT  ] 2017-05-16T10:51:09.564624541Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T10:51:09.567658744Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-16T10:51:09.579265733Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-16T10:51:09.73000831Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-16T10:51:09.797087323Z:  ---> cc9f6cd19506
[STDOUT  ] 2017-05-16T10:51:09.797115241Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-16T10:51:09.797123045Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-16T10:51:09.797139557Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-16T10:51:10.240787134Z:  ---> Using cache
[STDOUT  ] 2017-05-16T10:51:10.240848317Z:  ---> e8b0f171a47f
[STDOUT  ] 2017-05-16T10:51:10.240878648Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-16T10:51:10.257755053Z:  ---> Using cache
[STDOUT  ] 2017-05-16T10:51:10.257782654Z:  ---> 22f66ae165a4
[STDOUT  ] 2017-05-16T10:51:10.2578218Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-16T10:51:10.257845406Z:  ---> Using cache
[STDOUT  ] 2017-05-16T10:51:10.257862003Z:  ---> 08f7bb43d217
[STDOUT  ] 2017-05-16T10:51:10.257911215Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-16T10:51:10.257930856Z:  ---> Using cache
[STDOUT  ] 2017-05-16T10:51:10.25795005Z:  ---> c186beab57c7
[STDOUT  ] 2017-05-16T10:51:10.257968694Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-16T10:51:10.257987603Z:  ---> Using cache
[STDOUT  ] 2017-05-16T10:51:10.258000168Z:  ---> b9f31871c727
[STDOUT  ] 2017-05-16T10:51:10.258036289Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-16T10:51:10.258060201Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-16T10:51:10.258079809Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-16T10:51:10.771130238Z:  ---> 68dc597d09f0
[STDOUT  ] 2017-05-16T10:51:10.787999624Z: Removing intermediate container 48ffcf014c0d
[STDOUT  ] 2017-05-16T10:51:10.788046924Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-16T10:51:11.274908785Z:  ---> 73d8c0da0864
[STDOUT  ] 2017-05-16T10:51:11.291793921Z: Removing intermediate container 29ee56267b97
[STDOUT  ] 2017-05-16T10:51:11.291857244Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-16T10:51:11.399542439Z:  ---> Running in 8034cc9caa0f
[STDOUT  ] 2017-05-16T10:51:11.611668096Z:  ---> 51c08de2e8d3
[STDOUT  ] 2017-05-16T10:51:11.628640989Z: Removing intermediate container 8034cc9caa0f
[STDOUT  ] 2017-05-16T10:51:11.628668925Z: Successfully built 51c08de2e8d3
[STDOUT  ] 2017-05-16T10:51:11.628689436Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-16T10:51:11.710909451Z: + moby build kmod
[STDERR  ] 2017-05-16T10:51:11.719747946Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T10:51:15.879874368Z: Add init containers:
[STDERR  ] 2017-05-16T10:51:15.879915188Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-16T10:51:16.309997667Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-16T10:51:17.013507683Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-16T10:51:19.966537765Z: Add onboot containers:
[STDERR  ] 2017-05-16T10:51:19.966552187Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-16T10:51:20.445083968Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-16T10:51:20.941689717Z: Create outputs:
[STDERR  ] 2017-05-16T10:51:25.772091219Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-16T10:51:25.970104025Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-16T10:51:25.986932623Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-16T10:51:50.790221373Z: + clean_up
[STDERR  ] 2017-05-16T10:51:50.790323986Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-16T10:51:50.845274718Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-16T10:51:50.845316999Z: Deleted: sha256:51c08de2e8d340d43c20db4929b37ba02ca2689c099a717625dca219e6fdbc5a
[STDOUT  ] 2017-05-16T10:51:50.845351676Z: Deleted: sha256:73d8c0da0864aeed1e7cd9801bcda5ad10ced91de163cd58171814ed767e3be7
[STDOUT  ] 2017-05-16T10:51:50.84541706Z: Deleted: sha256:eb445ccf32960e47680f3812630c7f6029e33ef494c609151b85333dcfaaeaae
[STDOUT  ] 2017-05-16T10:51:50.845453504Z: Deleted: sha256:68dc597d09f0a69200c3ee55079fed95d5c5fa7db894ab182843480127a5e5fa
[STDOUT  ] 2017-05-16T10:51:50.845487872Z: Deleted: sha256:5f46e8805aa3fbd2d6a067f60f0159241c8c5fb6deeae364467354ba9d15b065
[STDERR  ] 2017-05-16T10:51:50.84691226Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.config.kmod 44.43s
