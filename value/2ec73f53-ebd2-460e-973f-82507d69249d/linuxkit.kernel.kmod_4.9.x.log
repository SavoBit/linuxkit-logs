[INFO    ] 2017-05-26T14:47:37.041595386Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone27ed5e85/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-26T14:47:37.041758313Z: Running command: [/bin/sh -x /tmp/with_clone27ed5e85/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-26T14:47:37.058425304Z: + set -e
[STDERR  ] 2017-05-26T14:47:37.058469095Z: + . /tmp/with_clone27ed5e85/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-26T14:47:37.058481465Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-26T14:47:37.058490428Z: + LINUXKIT_TMPDIR=/tmp/with_clone27ed5e85/test/cases/_tmp
[STDERR  ] 2017-05-26T14:47:37.058505607Z: + [ -f /tmp/with_clone27ed5e85/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-26T14:47:37.058514955Z: + . /tmp/with_clone27ed5e85/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-26T14:47:37.058523703Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone27ed5e85/test/cases/../../examples
[STDERR  ] 2017-05-26T14:47:37.058532083Z: + RT_CANCEL=253
[STDERR  ] 2017-05-26T14:47:37.058539891Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-26T14:47:37.058565748Z: + trap clean_up EXIT
[STDERR  ] 2017-05-26T14:47:37.058579302Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-26T14:47:38.544830204Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-26T14:47:38.604544552Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-26T14:47:38.604554814Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-26T14:47:38.607655735Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-26T14:47:38.633151641Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-26T14:47:38.78703602Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-26T14:47:38.844513232Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-26T14:47:38.844548035Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-26T14:47:38.844557938Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-26T14:47:38.84457731Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-26T14:47:39.299087176Z:  ---> Using cache
[STDOUT  ] 2017-05-26T14:47:39.299149168Z:  ---> 0cfa3025a7d5
[STDOUT  ] 2017-05-26T14:47:39.29916208Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-26T14:47:39.315916705Z:  ---> Using cache
[STDOUT  ] 2017-05-26T14:47:39.3159345Z:  ---> b826ce78a5eb
[STDOUT  ] 2017-05-26T14:47:39.315952642Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-26T14:47:39.3159664Z:  ---> Using cache
[STDOUT  ] 2017-05-26T14:47:39.315980361Z:  ---> 3f1f74a8a50d
[STDOUT  ] 2017-05-26T14:47:39.315996235Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-26T14:47:39.316006612Z:  ---> Using cache
[STDOUT  ] 2017-05-26T14:47:39.316020362Z:  ---> acf1511849fc
[STDOUT  ] 2017-05-26T14:47:39.316036168Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-26T14:47:39.316049881Z:  ---> Using cache
[STDOUT  ] 2017-05-26T14:47:39.316057767Z:  ---> 73dd8d31fb60
[STDOUT  ] 2017-05-26T14:47:39.316070921Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-26T14:47:39.316085056Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-26T14:47:39.316094495Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-26T14:47:39.804231105Z:  ---> ef265d54c2b6
[STDOUT  ] 2017-05-26T14:47:39.821026264Z: Removing intermediate container 3d0b19e52636
[STDOUT  ] 2017-05-26T14:47:39.821062006Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-26T14:47:40.324279005Z:  ---> 10adffd6323a
[STDOUT  ] 2017-05-26T14:47:40.341220023Z: Removing intermediate container 8d66e38cc2c0
[STDOUT  ] 2017-05-26T14:47:40.341237761Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-26T14:47:40.465118009Z:  ---> Running in deed4b27026b
[STDOUT  ] 2017-05-26T14:47:40.660856561Z:  ---> c087c92532ca
[STDOUT  ] 2017-05-26T14:47:40.677655397Z: Removing intermediate container deed4b27026b
[STDOUT  ] 2017-05-26T14:47:40.677667067Z: Successfully built c087c92532ca
[STDOUT  ] 2017-05-26T14:47:40.677676346Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-26T14:47:40.768993216Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-26T14:47:40.778903071Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-26T14:47:45.271412169Z: Add init containers:
[STDERR  ] 2017-05-26T14:47:45.271436578Z: Process init image: linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
[STDERR  ] 2017-05-26T14:47:45.587785295Z: Process init image: linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
[STDERR  ] 2017-05-26T14:47:46.25337745Z: Process init image: linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
[STDERR  ] 2017-05-26T14:47:51.507725883Z: Add onboot containers:
[STDERR  ] 2017-05-26T14:47:51.507785771Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-26T14:47:52.100235066Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-26T14:47:52.682269983Z: Create outputs:
[STDERR  ] 2017-05-26T14:47:58.749446273Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-26T14:47:58.950396663Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-26T14:47:58.950410474Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-26T14:48:26.482470004Z: + clean_up
[STDERR  ] 2017-05-26T14:48:26.482487245Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-26T14:48:26.535270771Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-26T14:48:26.53534079Z: Deleted: sha256:c087c92532ca6842a209852ef3ef2b72f2920ddfe81f770a513c20bf9dbe9737
[STDOUT  ] 2017-05-26T14:48:26.53535975Z: Deleted: sha256:10adffd6323a1257e5914ac8f4f7eea2d71ecba830d0e87a5a074a58613dc1de
[STDOUT  ] 2017-05-26T14:48:26.535388158Z: Deleted: sha256:76638228983b3fd0f7163f821f40869b185d0f815c92bc987ddec28e47b47764
[STDOUT  ] 2017-05-26T14:48:26.535414222Z: Deleted: sha256:ef265d54c2b655abaa55fdf14c98b15a4503dc2a16e0db0aa96088a09e6c2e23
[STDOUT  ] 2017-05-26T14:48:26.53543063Z: Deleted: sha256:88ed7672ca14f215f87b4b293a9ba96917f3f72ff88c6a578c835bff50294fd2
[STDERR  ] 2017-05-26T14:48:26.537505758Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 49.52s
