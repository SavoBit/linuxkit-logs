[INFO    ] 2017-06-01T15:13:23.393900584Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-01T15:13:23.39395978Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-01T15:13:23.401334437Z: + set -e
[STDERR  ] 2017-06-01T15:13:23.401375809Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-01T15:13:23.401430104Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-01T15:13:23.401463704Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-01T15:13:23.401496235Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-01T15:13:23.401522038Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-01T15:13:23.401560462Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-01T15:13:23.401587011Z: + RT_CANCEL=253
[STDERR  ] 2017-06-01T15:13:23.40160557Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-01T15:13:23.401638761Z: + trap clean_up EXIT
[STDERR  ] 2017-06-01T15:13:23.401669352Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-01T15:13:24.587903136Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-01T15:13:24.588062256Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-01T15:13:24.588110844Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T15:13:24.588794076Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-01T15:13:24.628014556Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-01T15:13:24.630358435Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-01T15:13:24.682519371Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-01T15:13:24.682541626Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-01T15:13:25.995764923Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-01T15:13:26.049079261Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-01T15:13:26.110161547Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-01T15:13:29.682210102Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-01T15:13:29.683442251Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-01T15:13:36.532785355Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-01T15:13:36.553692114Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-01T15:13:36.557500699Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-01T15:13:36.55810962Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-01T15:13:36.558264443Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-01T15:13:38.700879028Z:  ---> ffe21a0f9368
[STDOUT  ] 2017-06-01T15:13:38.990032025Z: Removing intermediate container 9c24d330cc7f
[STDOUT  ] 2017-06-01T15:13:38.990174683Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-01T15:13:39.258829462Z:  ---> Running in 6bc3caeda52d
[STDOUT  ] 2017-06-01T15:13:45.755796373Z:  ---> ce9c28cf8857
[STDOUT  ] 2017-06-01T15:13:46.113609115Z: Removing intermediate container 6bc3caeda52d
[STDOUT  ] 2017-06-01T15:13:46.113727566Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-01T15:13:46.384702125Z:  ---> 4b63203fa722
[STDOUT  ] 2017-06-01T15:13:46.3953236Z: Removing intermediate container e04137b930d2
[STDOUT  ] 2017-06-01T15:13:46.395454961Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-01T15:13:46.692980172Z:  ---> cb30f7e2135f
[STDOUT  ] 2017-06-01T15:13:46.709401705Z: Removing intermediate container 51bae8bbdf82
[STDOUT  ] 2017-06-01T15:13:46.709548432Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-01T15:13:46.822594363Z:  ---> Running in 9f7b2c7b1f47
[STDOUT  ] 2017-06-01T15:13:47.020532427Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-01T15:13:47.021827316Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-01T15:13:48.192848593Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-01T15:13:48.392378188Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-01T15:13:48.399902745Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-01T15:13:48.4107235Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-01T15:13:48.602078079Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-01T15:13:48.604994755Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-01T15:13:48.952298886Z:  ---> 8f094cb38f19
[STDOUT  ] 2017-06-01T15:13:48.966527307Z: Removing intermediate container 9f7b2c7b1f47
[STDOUT  ] 2017-06-01T15:13:48.96684785Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-01T15:13:50.065350741Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-01T15:13:50.066406685Z: 6f821164d5b7: Pulling fs layer
[STDOUT  ] 2017-06-01T15:13:50.73237443Z: 6f821164d5b7: Verifying Checksum
[STDOUT  ] 2017-06-01T15:13:50.734073152Z: 6f821164d5b7: Download complete
[STDOUT  ] 2017-06-01T15:13:50.994268587Z: 6f821164d5b7: Pull complete
[STDOUT  ] 2017-06-01T15:13:51.057361038Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-01T15:13:51.083493643Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-01T15:13:51.083956938Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-01T15:13:51.0840589Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-01T15:13:51.459874665Z:  ---> cb70348122c5
[STDOUT  ] 2017-06-01T15:13:51.480936217Z: Removing intermediate container c91d4ba27736
[STDOUT  ] 2017-06-01T15:13:51.48115159Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-01T15:13:51.866871047Z:  ---> 998318b53433
[STDOUT  ] 2017-06-01T15:13:51.888639501Z: Removing intermediate container 594567f6b252
[STDOUT  ] 2017-06-01T15:13:51.888797496Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-01T15:13:52.030649911Z:  ---> Running in 273239c45b77
[STDOUT  ] 2017-06-01T15:13:52.132638719Z:  ---> e8bca8bb69d5
[STDOUT  ] 2017-06-01T15:13:52.148993893Z: Removing intermediate container 273239c45b77
[STDOUT  ] 2017-06-01T15:13:52.149136255Z: Successfully built e8bca8bb69d5
[STDOUT  ] 2017-06-01T15:13:52.176082358Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-01T15:13:52.202623627Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-01T15:13:52.212030662Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T15:13:55.263550212Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T15:13:55.263624531Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T15:13:58.868164704Z: Add init containers:
[STDERR  ] 2017-06-01T15:13:58.868208436Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T15:13:58.868226979Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T15:14:01.951133605Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T15:14:01.951178616Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T15:14:05.011537162Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T15:14:05.011584069Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T15:14:08.45445621Z: Add onboot containers:
[STDERR  ] 2017-06-01T15:14:08.454546903Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-01T15:14:08.688368145Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T15:14:08.690722777Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T15:14:11.732400694Z: Create outputs:
[STDERR  ] 2017-06-01T15:14:17.96788291Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-01T15:14:18.0303581Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-01T15:14:18.031442093Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-01T15:14:18.047599373Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-01T15:14:35.263058374Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-01T15:14:35.265572292Z: time="2017-06-01T15:14:35Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-01T15:14:35.265618576Z: + clean_up
[STDERR  ] 2017-06-01T15:14:35.265621959Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-01T15:14:35.30625826Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-01T15:14:35.306267861Z: Deleted: sha256:e8bca8bb69d587118c961e4579224498607bbe5459d87e7084bf64f360e9cff6
[STDOUT  ] 2017-06-01T15:14:35.306276401Z: Deleted: sha256:998318b53433b92222709fcb1cf96d6dc53ede6473ac1f4ffcf3e0a746c2498f
[STDOUT  ] 2017-06-01T15:14:35.306285591Z: Deleted: sha256:aca3d586173cc561b160c84968328eae27be36ee723658c0ea57e637cce5a08d
[STDOUT  ] 2017-06-01T15:14:35.306299551Z: Deleted: sha256:cb70348122c5763839445c0ce9025f05e01873df3bc2eabd0be1092152a3c794
[STDOUT  ] 2017-06-01T15:14:35.306308481Z: Deleted: sha256:d0f4f2b0f6062bbea9c5e434b7cb1df630f09b6cfe514ad61e7d2bb2904e83a9
[STDERR  ] 2017-06-01T15:14:35.307036948Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 71.94s
