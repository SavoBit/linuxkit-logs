[INFO    ] 2017-08-01T11:41:32.300577667Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-08-01T11:41:32.30068419Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-08-01T11:41:32.307260594Z: + set -e
[STDERR  ] 2017-08-01T11:41:32.307342856Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-08-01T11:41:32.30735532Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-08-01T11:41:32.307367543Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-08-01T11:41:32.307379416Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-08-01T11:41:32.307390836Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-08-01T11:41:32.307402806Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-08-01T11:41:32.307416601Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/build/test/cases/../../blueprints
[STDERR  ] 2017-08-01T11:41:32.30743116Z: + RT_CANCEL=253
[STDERR  ] 2017-08-01T11:41:32.307441439Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-08-01T11:41:32.307451941Z: + trap clean_up EXIT
[STDERR  ] 2017-08-01T11:41:32.307462279Z: + docker pull linuxkit/kernel:4.9.40
[STDOUT  ] 2017-08-01T11:41:33.700431709Z: 4.9.40: Pulling from linuxkit/kernel
[STDOUT  ] 2017-08-01T11:41:33.70088012Z: Digest: sha256:ab0023aa0914639f651141dc6b15c583041dba506d0bc96cb4e6333aa79bd2b8
[STDOUT  ] 2017-08-01T11:41:33.700905276Z: Status: Image is up to date for linuxkit/kernel:4.9.40
[STDERR  ] 2017-08-01T11:41:33.702278612Z: + docker build -t kmod-test .
[STDOUT  ] 2017-08-01T11:41:33.776444737Z: Sending build context to Docker daemon  8.704kB
[STDOUT  ] 2017-08-01T11:41:33.872043888Z: Step 1/11 : FROM linuxkit/kernel:4.9.40 AS ksrc
[STDOUT  ] 2017-08-01T11:41:33.899231585Z:  ---> d87f93c03b45
[STDOUT  ] 2017-08-01T11:41:33.899304625Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-08-01T11:41:35.028387796Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-08-01T11:41:35.028600657Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-08-01T11:41:35.034617734Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-08-01T11:41:38.466689955Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-08-01T11:41:38.467332627Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-08-01T11:41:44.616562502Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-08-01T11:41:44.622715579Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-08-01T11:41:44.625166314Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-08-01T11:41:44.625759342Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-08-01T11:41:44.625789233Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-08-01T11:41:46.337941811Z:  ---> 0744829f8fc1
[STDOUT  ] 2017-08-01T11:41:46.354074772Z: Removing intermediate container 9d6c131d0d71
[STDOUT  ] 2017-08-01T11:41:46.354120332Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-08-01T11:41:46.44752483Z:  ---> Running in 224d9e919c42
[STDOUT  ] 2017-08-01T11:41:52.902551948Z:  ---> 003fa336b738
[STDOUT  ] 2017-08-01T11:41:53.577919842Z: Removing intermediate container 224d9e919c42
[STDOUT  ] 2017-08-01T11:41:53.577968197Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-08-01T11:41:53.963104625Z:  ---> 20de6583867b
[STDOUT  ] 2017-08-01T11:41:53.968037049Z: Removing intermediate container b6fc6430ef40
[STDOUT  ] 2017-08-01T11:41:53.968120609Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-08-01T11:41:54.474947479Z:  ---> 1806ba497f80
[STDOUT  ] 2017-08-01T11:41:54.479892428Z: Removing intermediate container 1239d8a4fbfb
[STDOUT  ] 2017-08-01T11:41:54.47992361Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-08-01T11:41:54.547413561Z:  ---> Running in dcb0a91b1e0f
[STDOUT  ] 2017-08-01T11:41:54.838976738Z: make -C /usr/src/linux-headers-4.9.40-linuxkit M=/kmod modules
[STDOUT  ] 2017-08-01T11:41:54.839170918Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.40-linuxkit'
[STDOUT  ] 2017-08-01T11:41:55.613883804Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-08-01T11:41:55.795495319Z:   Building modules, stage 2.
[STDOUT  ] 2017-08-01T11:41:55.803166837Z:   MODPOST 1 modules
[STDOUT  ] 2017-08-01T11:41:55.814461146Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-08-01T11:41:55.978517226Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-08-01T11:41:55.981643483Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.40-linuxkit'
[STDOUT  ] 2017-08-01T11:41:56.395416242Z:  ---> 64de5961f6c4
[STDOUT  ] 2017-08-01T11:41:56.401133353Z: Removing intermediate container dcb0a91b1e0f
[STDOUT  ] 2017-08-01T11:41:56.401180007Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-08-01T11:41:57.485328938Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-08-01T11:41:57.485534035Z: 019300c8a437: Pulling fs layer
[STDOUT  ] 2017-08-01T11:41:58.137914607Z: 019300c8a437: Verifying Checksum
[STDOUT  ] 2017-08-01T11:41:58.138080234Z: 019300c8a437: Download complete
[STDOUT  ] 2017-08-01T11:41:58.39787522Z: 019300c8a437: Pull complete
[STDOUT  ] 2017-08-01T11:41:58.404333299Z: Digest: sha256:af2a5bd2f8de8fc1ecabf1c76611cdc6a5f1ada1a2bdd7d3816e121b70300308
[STDOUT  ] 2017-08-01T11:41:58.410090104Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-08-01T11:41:58.410571327Z:  ---> 074d602a59d7
[STDOUT  ] 2017-08-01T11:41:58.410630561Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-08-01T11:41:58.77145943Z:  ---> fe433cd2750e
[STDOUT  ] 2017-08-01T11:41:58.776687535Z: Removing intermediate container 3737016e912e
[STDOUT  ] 2017-08-01T11:41:58.776759738Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-08-01T11:41:59.119465302Z:  ---> 6c6e041b312d
[STDOUT  ] 2017-08-01T11:41:59.12465449Z: Removing intermediate container 17ff112d5ed2
[STDOUT  ] 2017-08-01T11:41:59.124687664Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-08-01T11:41:59.212422626Z:  ---> Running in d96d05fcceb3
[STDOUT  ] 2017-08-01T11:41:59.376638546Z:  ---> ad6af2145f12
[STDOUT  ] 2017-08-01T11:41:59.382561377Z: Removing intermediate container d96d05fcceb3
[STDOUT  ] 2017-08-01T11:41:59.382602791Z: Successfully built ad6af2145f12
[STDOUT  ] 2017-08-01T11:41:59.386478911Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-08-01T11:41:59.422175759Z: + moby build -output kernel+initrd kmod.yml
[STDERR  ] 2017-08-01T11:41:59.433429155Z: Extract kernel image: linuxkit/kernel:4.9.40
[STDERR  ] 2017-08-01T11:42:01.109601275Z: Add init containers:
[STDERR  ] 2017-08-01T11:42:01.109662232Z: Process init image: linuxkit/init:e3e376881faced5a890b6ceb3e8e899cbfd04ecd
[STDERR  ] 2017-08-01T11:42:02.33230158Z: Process init image: linuxkit/runc:842318b6ab524783554428c89a27d95af7bd2844
[STDERR  ] 2017-08-01T11:42:03.621968307Z: Add onboot containers:
[STDERR  ] 2017-08-01T11:42:03.622030364Z:   Create OCI config for kmod-test
[STDERR  ] 2017-08-01T11:42:03.757547723Z:   Create OCI config for linuxkit/poweroff:3845c4d64d47a1ea367806be5547e44594b0fa91
[STDERR  ] 2017-08-01T11:42:04.994654161Z: Create outputs:
[STDERR  ] 2017-08-01T11:42:08.175683386Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-08-01T11:42:08.211479712Z: + linuxkit run kmod
[STDERR  ] 2017-08-01T11:42:08.229474489Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-08-01T11:42:08.679319791Z: qemu-system-x86_64: Device needs media, but drive is empty
[STDERR  ] 2017-08-01T11:42:08.679392708Z: qemu-system-x86_64: Initialization of device ide-hd failed: Device initialization failed.
[STDERR  ] 2017-08-01T11:42:08.956135116Z: time="2017-08-01T11:42:08Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-08-01T11:42:08.958404928Z: + RESULT=
[STDERR  ] 2017-08-01T11:42:08.958433776Z: + clean_up
[STDERR  ] 2017-08-01T11:42:08.958442981Z: + docker rmi kmod-test
[STDOUT  ] 2017-08-01T11:42:08.979277518Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-08-01T11:42:08.97933763Z: Deleted: sha256:ad6af2145f12dfeb3f1750152d1f909e985a0ab9bfa48ffefeb72af5a4b369b4
[STDOUT  ] 2017-08-01T11:42:08.979346575Z: Deleted: sha256:6c6e041b312db2faf054522d25f312aecb16711f5738ab1c1f2d74d0445a9a15
[STDOUT  ] 2017-08-01T11:42:08.979377838Z: Deleted: sha256:fd8a7794c567f211d66103adb72bf6cac8d2477ccce216a62db67b9434cd07af
[STDOUT  ] 2017-08-01T11:42:08.97938831Z: Deleted: sha256:fe433cd2750e4b2d5676247635bcb5f801988aa297957d9e2ece7142941b2ddc
[STDOUT  ] 2017-08-01T11:42:08.979394101Z: Deleted: sha256:1a52d6b3ea91c0cae20dd5cb7a06930aeb9cd87e08328db0e736b6b047fbac60
[STDERR  ] 2017-08-01T11:42:08.980247315Z: + find . -depth -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[FAIL    ] linuxkit.kernel.kmod_4.9.x 36.69s
