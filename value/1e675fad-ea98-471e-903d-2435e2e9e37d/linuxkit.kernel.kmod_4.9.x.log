[INFO    ] 2017-05-30T12:16:12.589845185Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T12:16:12.589907873Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T12:16:12.602030154Z: + set -e
[STDERR  ] 2017-05-30T12:16:12.602080074Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T12:16:12.602140441Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T12:16:12.602174539Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-30T12:16:12.602218439Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T12:16:12.602251812Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T12:16:12.602303387Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-30T12:16:12.602376819Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T12:16:12.602422867Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T12:16:12.602471204Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T12:16:12.602491645Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T12:16:13.775178495Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-30T12:16:13.775272459Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T12:16:13.775344388Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:16:13.776164228Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T12:16:13.830038614Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-30T12:16:13.871497286Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T12:16:13.919580024Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T12:16:13.91974855Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T12:16:15.066008403Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-30T12:16:15.08760719Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-30T12:16:15.110898377Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-30T12:16:18.496821321Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-30T12:16:18.496919962Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-30T12:16:25.755909664Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-30T12:16:25.766757943Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-30T12:16:25.769711572Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-30T12:16:25.770114366Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T12:16:25.77021986Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T12:16:27.794193988Z:  ---> 6fa5d984ddcb
[STDOUT  ] 2017-05-30T12:16:28.417553548Z: Removing intermediate container fc1c49a360b0
[STDOUT  ] 2017-05-30T12:16:28.417677574Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T12:16:28.503522406Z:  ---> Running in 40948b7feb7a
[STDOUT  ] 2017-05-30T12:16:35.310009491Z:  ---> 7ad55cf09fec
[STDOUT  ] 2017-05-30T12:16:35.714460014Z: Removing intermediate container 40948b7feb7a
[STDOUT  ] 2017-05-30T12:16:35.714617758Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T12:16:35.933740775Z:  ---> 9d49149421d0
[STDOUT  ] 2017-05-30T12:16:35.946981417Z: Removing intermediate container b91b8e716fdb
[STDOUT  ] 2017-05-30T12:16:35.947128178Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T12:16:36.213291535Z:  ---> 1d3aa47dbe99
[STDOUT  ] 2017-05-30T12:16:36.220787477Z: Removing intermediate container 332198af8620
[STDOUT  ] 2017-05-30T12:16:36.220881454Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T12:16:36.324743954Z:  ---> Running in a35c7df2d57d
[STDOUT  ] 2017-05-30T12:16:36.503776144Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-30T12:16:36.504739871Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T12:16:37.272017011Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-30T12:16:37.452487201Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-30T12:16:37.458157575Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-30T12:16:37.467734581Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-30T12:16:37.632732255Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-30T12:16:37.635067545Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T12:16:37.870977033Z:  ---> 3a3b24b20dda
[STDOUT  ] 2017-05-30T12:16:37.889229263Z: Removing intermediate container a35c7df2d57d
[STDOUT  ] 2017-05-30T12:16:37.889356233Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T12:16:38.985626764Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-30T12:16:39.005005327Z: 6f821164d5b7: Already exists
[STDOUT  ] 2017-05-30T12:16:39.489901035Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-05-30T12:16:39.502627682Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-30T12:16:39.503240729Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T12:16:39.503374773Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T12:16:39.752401425Z:  ---> 3f3a256d3663
[STDOUT  ] 2017-05-30T12:16:39.765823962Z: Removing intermediate container 01635ea47130
[STDOUT  ] 2017-05-30T12:16:39.765977162Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T12:16:39.989339905Z:  ---> d7f1a169ab0e
[STDOUT  ] 2017-05-30T12:16:40.005891016Z: Removing intermediate container 838869a7dbab
[STDOUT  ] 2017-05-30T12:16:40.006003881Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T12:16:40.11081354Z:  ---> Running in bb9dbdef4839
[STDOUT  ] 2017-05-30T12:16:40.208740839Z:  ---> 523a0f23c7da
[STDOUT  ] 2017-05-30T12:16:40.226722733Z: Removing intermediate container bb9dbdef4839
[STDOUT  ] 2017-05-30T12:16:40.226750076Z: Successfully built 523a0f23c7da
[STDOUT  ] 2017-05-30T12:16:40.237786812Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T12:16:40.256660868Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T12:16:40.265378953Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:16:42.960176876Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:16:42.96023688Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:16:46.183512866Z: Add init containers:
[STDERR  ] 2017-05-30T12:16:46.183604376Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T12:16:46.183664961Z: Pull image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T12:16:49.085905499Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T12:16:49.085996709Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T12:16:52.017799401Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T12:16:52.017855131Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T12:16:55.320219782Z: Add onboot containers:
[STDERR  ] 2017-05-30T12:16:55.320282532Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T12:16:55.522867799Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T12:16:55.525166174Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T12:16:58.380160486Z: Create outputs:
[STDERR  ] 2017-05-30T12:17:04.744743341Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T12:17:04.788999371Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T12:17:04.789878855Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T12:17:04.803189991Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-30T12:17:24.080119021Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-30T12:17:24.082577151Z: time="2017-05-30T12:17:24Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-30T12:17:24.082596276Z: + clean_up
[STDERR  ] 2017-05-30T12:17:24.082603544Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T12:17:24.14616975Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T12:17:24.146182517Z: Deleted: sha256:523a0f23c7da2ab12e4d2cc95b62b936bb8a34049dc244838422560528ef67a6
[STDOUT  ] 2017-05-30T12:17:24.146189673Z: Deleted: sha256:d7f1a169ab0eba3bc6538ec81eccff3f874f72103268f53b86f2555661a39d3d
[STDOUT  ] 2017-05-30T12:17:24.146193313Z: Deleted: sha256:bb7225e6ed565eaa8a5b66ba027f4c19c14d663742ddbc8ced2d854f4f4cf220
[STDOUT  ] 2017-05-30T12:17:24.146203614Z: Deleted: sha256:3f3a256d3663dfff2ab5f38710f7881f649081fb4aee618ebfbaef176a742be1
[STDOUT  ] 2017-05-30T12:17:24.146209737Z: Deleted: sha256:0aa051a9ebc0bff37f04217946a746fb7ec5b091f9fd36a96125468080889ccc
[STDERR  ] 2017-05-30T12:17:24.146922758Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 71.58s
