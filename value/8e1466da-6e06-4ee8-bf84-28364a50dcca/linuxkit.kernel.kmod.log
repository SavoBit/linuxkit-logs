[INFO    ] 2017-05-17T14:26:07.468806932Z: Running Test linuxkit.kernel.kmod in /tmp/with_clone1656a4d7/test/cases/020_kernel/010_kmod
[INFO    ] 2017-05-17T14:26:07.468913285Z: Running command: [/bin/sh -x /tmp/with_clone1656a4d7/test/cases/020_kernel/010_kmod/test.sh]
[STDERR  ] 2017-05-17T14:26:07.483894693Z: + set -e
[STDERR  ] 2017-05-17T14:26:07.483948924Z: + . /tmp/with_clone1656a4d7/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-17T14:26:07.483957659Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-17T14:26:07.483966893Z: + LINUXKIT_TMPDIR=/tmp/with_clone1656a4d7/test/cases/_tmp
[STDERR  ] 2017-05-17T14:26:07.483975169Z: + [ -f /tmp/with_clone1656a4d7/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-17T14:26:07.483983094Z: + . /tmp/with_clone1656a4d7/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-17T14:26:07.483989511Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone1656a4d7/test/cases/../../examples
[STDERR  ] 2017-05-17T14:26:07.484001107Z: + RT_CANCEL=253
[STDERR  ] 2017-05-17T14:26:07.484004955Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-17T14:26:07.484017942Z: + trap clean_up EXIT
[STDERR  ] 2017-05-17T14:26:07.484024834Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-17T14:26:10.907922102Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-17T14:26:10.974835265Z: Digest: sha256:dd706d391fddc3d2efc254a6c03223d6cb82b86a3dc059a9264063be2fd8911f
[STDOUT  ] 2017-05-17T14:26:10.974889855Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-17T14:26:10.978092274Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-17T14:26:10.989477192Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-17T14:26:11.160388309Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-17T14:26:11.224612186Z:  ---> cc9f6cd19506
[STDOUT  ] 2017-05-17T14:26:11.224666985Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-17T14:26:11.224675724Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-17T14:26:11.224686035Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-17T14:26:11.677719498Z:  ---> Using cache
[STDOUT  ] 2017-05-17T14:26:11.677738802Z:  ---> e8b0f171a47f
[STDOUT  ] 2017-05-17T14:26:11.677748009Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-17T14:26:11.694786571Z:  ---> Using cache
[STDOUT  ] 2017-05-17T14:26:11.694798165Z:  ---> 22f66ae165a4
[STDOUT  ] 2017-05-17T14:26:11.69480657Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-17T14:26:11.694814837Z:  ---> Using cache
[STDOUT  ] 2017-05-17T14:26:11.694823311Z:  ---> 08f7bb43d217
[STDOUT  ] 2017-05-17T14:26:11.694831524Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-17T14:26:11.694840117Z:  ---> Using cache
[STDOUT  ] 2017-05-17T14:26:11.694852549Z:  ---> c186beab57c7
[STDOUT  ] 2017-05-17T14:26:11.694866546Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-17T14:26:11.694880566Z:  ---> Using cache
[STDOUT  ] 2017-05-17T14:26:11.694893623Z:  ---> b9f31871c727
[STDOUT  ] 2017-05-17T14:26:11.694906321Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-17T14:26:11.694914817Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-17T14:26:11.694920811Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-17T14:26:12.20113174Z:  ---> 627f52ed2212
[STDOUT  ] 2017-05-17T14:26:12.218131986Z: Removing intermediate container 829ec815b9b9
[STDOUT  ] 2017-05-17T14:26:12.218139795Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-17T14:26:12.705260278Z:  ---> 56b2bce78678
[STDOUT  ] 2017-05-17T14:26:12.722196618Z: Removing intermediate container ab9e82ec58a4
[STDOUT  ] 2017-05-17T14:26:12.722209047Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-17T14:26:12.837782437Z:  ---> Running in a50ff99bf288
[STDOUT  ] 2017-05-17T14:26:13.042017464Z:  ---> 25c091fe1895
[STDOUT  ] 2017-05-17T14:26:13.058920826Z: Removing intermediate container a50ff99bf288
[STDOUT  ] 2017-05-17T14:26:13.05894535Z: Successfully built 25c091fe1895
[STDOUT  ] 2017-05-17T14:26:13.058964906Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-17T14:26:13.13359004Z: + moby build kmod
[STDERR  ] 2017-05-17T14:26:13.14262134Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-17T14:26:17.355887162Z: Add init containers:
[STDERR  ] 2017-05-17T14:26:17.355962443Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-17T14:26:17.7694311Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-17T14:26:18.482565719Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-17T14:26:21.880900783Z: Add onboot containers:
[STDERR  ] 2017-05-17T14:26:21.880990153Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-17T14:26:22.4065523Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-17T14:26:22.942264787Z: Create outputs:
[STDERR  ] 2017-05-17T14:26:27.444799566Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-17T14:26:27.679263365Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-17T14:26:27.679412245Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-17T14:26:52.238059969Z: + clean_up
[STDERR  ] 2017-05-17T14:26:52.238084594Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-17T14:26:52.298162071Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-17T14:26:52.298221938Z: Deleted: sha256:25c091fe18953a94f1066c0032d3a405a046b83e2a2dd002a50abc20718c7a14
[STDOUT  ] 2017-05-17T14:26:52.298238962Z: Deleted: sha256:56b2bce786782c77583bbc86528acfd625f32337332fd2993b5d2aef3fe9ff51
[STDOUT  ] 2017-05-17T14:26:52.298254319Z: Deleted: sha256:fdccc206360f549626dae6259b23f645474d9c0bbdf502240e5da2211029588b
[STDOUT  ] 2017-05-17T14:26:52.298264466Z: Deleted: sha256:627f52ed2212a59cca271574efbfbf993c16a72f9fe41103f14c1cdfb4dc7872
[STDOUT  ] 2017-05-17T14:26:52.298279419Z: Deleted: sha256:5f46e8805aa3fbd2d6a067f60f0159241c8c5fb6deeae364467354ba9d15b065
[STDERR  ] 2017-05-17T14:26:52.300106427Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod 44.85s
