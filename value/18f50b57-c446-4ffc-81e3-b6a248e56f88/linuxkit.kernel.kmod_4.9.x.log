[INFO    ] 2017-06-07T08:49:27.484579518Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-07T08:49:27.484643635Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-07T08:49:27.508859268Z: + set -e
[STDERR  ] 2017-06-07T08:49:27.508992542Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-07T08:49:27.509054637Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-07T08:49:27.509085072Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-07T08:49:27.509124617Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-07T08:49:27.509143469Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-07T08:49:27.509176249Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-07T08:49:27.509203876Z: + RT_CANCEL=253
[STDERR  ] 2017-06-07T08:49:27.50922206Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-07T08:49:27.509254273Z: + trap clean_up EXIT
[STDERR  ] 2017-06-07T08:49:27.509281363Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-07T08:49:28.64331336Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-07T08:49:28.643437777Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-07T08:49:28.643475256Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T08:49:28.644141498Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-07T08:49:28.663887494Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-07T08:49:28.707453106Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-07T08:49:28.737257473Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-07T08:49:28.737359811Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-07T08:49:29.869976656Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-07T08:49:29.899126485Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-07T08:49:29.91413258Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-07T08:49:33.588724707Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-07T08:49:33.590314481Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-07T08:49:39.772534633Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-07T08:49:39.781343847Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-07T08:49:39.784421683Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-07T08:49:39.784772542Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-07T08:49:39.784895872Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-07T08:49:43.949168219Z:  ---> 3a07a61e5ff1
[STDOUT  ] 2017-06-07T08:49:44.002138331Z: Removing intermediate container fdef309acb03
[STDOUT  ] 2017-06-07T08:49:44.002291623Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-07T08:49:45.164797242Z:  ---> Running in f79ccca01932
[STDOUT  ] 2017-06-07T08:49:50.552938201Z:  ---> c70dccea8da5
[STDOUT  ] 2017-06-07T08:49:50.896990163Z: Removing intermediate container f79ccca01932
[STDOUT  ] 2017-06-07T08:49:50.897109912Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-07T08:49:51.067392361Z:  ---> eb60e60914c3
[STDOUT  ] 2017-06-07T08:49:51.078918778Z: Removing intermediate container 5d5d0cd5ec50
[STDOUT  ] 2017-06-07T08:49:51.079042752Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-07T08:49:51.299183421Z:  ---> 0867a658f933
[STDOUT  ] 2017-06-07T08:49:51.306521013Z: Removing intermediate container b3a33e719c6c
[STDOUT  ] 2017-06-07T08:49:51.306632967Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-07T08:49:51.381222386Z:  ---> Running in a3decc661033
[STDOUT  ] 2017-06-07T08:49:51.562196757Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-07T08:49:51.563398798Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-07T08:49:52.439458957Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-07T08:49:52.628555395Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-07T08:49:52.635394939Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-07T08:49:52.645613084Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-07T08:49:52.817295309Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-07T08:49:52.819630674Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-07T08:49:52.982233761Z:  ---> 84fecadd6070
[STDOUT  ] 2017-06-07T08:49:52.988844685Z: Removing intermediate container a3decc661033
[STDOUT  ] 2017-06-07T08:49:52.98899158Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-07T08:49:54.218738476Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-07T08:49:54.219446605Z: 6f821164d5b7: Pulling fs layer
[STDOUT  ] 2017-06-07T08:49:54.806548056Z: 6f821164d5b7: Verifying Checksum
[STDOUT  ] 2017-06-07T08:49:54.806625347Z: 6f821164d5b7: Download complete
[STDOUT  ] 2017-06-07T08:49:54.97813595Z: 6f821164d5b7: Pull complete
[STDOUT  ] 2017-06-07T08:49:54.978208736Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-07T08:49:54.978259159Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-07T08:49:54.978593961Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-07T08:49:54.978698758Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-07T08:49:55.164790145Z:  ---> f41ca96bc8b9
[STDOUT  ] 2017-06-07T08:49:55.170416024Z: Removing intermediate container 45cf80930431
[STDOUT  ] 2017-06-07T08:49:55.170569298Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-07T08:49:55.331027542Z:  ---> 58f72550ef70
[STDOUT  ] 2017-06-07T08:49:55.33654441Z: Removing intermediate container 682a11f97c7f
[STDOUT  ] 2017-06-07T08:49:55.336631839Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-07T08:49:55.405085901Z:  ---> Running in 4d5cb9b437ad
[STDOUT  ] 2017-06-07T08:49:55.455418598Z:  ---> 881967e7754e
[STDOUT  ] 2017-06-07T08:49:55.462043145Z: Removing intermediate container 4d5cb9b437ad
[STDOUT  ] 2017-06-07T08:49:55.462121147Z: Successfully built 881967e7754e
[STDOUT  ] 2017-06-07T08:49:55.467228986Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-07T08:49:55.476884665Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-07T08:49:55.485577614Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T08:49:58.473894588Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T08:49:58.473963963Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T08:50:01.870263325Z: Add init containers:
[STDERR  ] 2017-06-07T08:50:01.870336744Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-07T08:50:01.870361405Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-07T08:50:04.770271519Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-07T08:50:04.770317246Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-07T08:50:07.644610095Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-07T08:50:07.64470126Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-07T08:50:11.063818209Z: Add onboot containers:
[STDERR  ] 2017-06-07T08:50:11.063853511Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-07T08:50:11.208504239Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-07T08:50:11.210792146Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-07T08:50:14.158167224Z: Create outputs:
[STDERR  ] 2017-06-07T08:50:19.903448868Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-07T08:50:19.956144977Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-07T08:50:19.957061341Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-07T08:50:19.972461602Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-07T08:50:36.923321418Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-07T08:50:36.926049087Z: time="2017-06-07T08:50:36Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-07T08:50:36.926061528Z: + clean_up
[STDERR  ] 2017-06-07T08:50:36.92607997Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-07T08:50:36.957162635Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-07T08:50:36.957214105Z: Deleted: sha256:881967e7754e4cb5a349d926078165fad941ac82b9a1b36fc3e2814fb8d1fc18
[STDOUT  ] 2017-06-07T08:50:36.957238869Z: Deleted: sha256:58f72550ef70813fe720e7afbabed8e471c0f040d0dc60b0440caa8e0f87f459
[STDOUT  ] 2017-06-07T08:50:36.957245055Z: Deleted: sha256:80e9f48b8db630f855e5a7f12dd032df85db4f606eb5fb69c453c9af86db2145
[STDOUT  ] 2017-06-07T08:50:36.957255943Z: Deleted: sha256:f41ca96bc8b9d68350341c594c68930d0bf37e3f69e598567b70c4eed1b073fc
[STDOUT  ] 2017-06-07T08:50:36.95726184Z: Deleted: sha256:1a3dc11a1d5cb3949acc55c5725e371494dc4023ed089e84c478ae2294b97da6
[STDERR  ] 2017-06-07T08:50:36.957998614Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 69.50s
