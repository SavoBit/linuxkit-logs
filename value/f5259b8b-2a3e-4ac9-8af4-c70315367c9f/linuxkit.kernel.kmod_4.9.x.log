[INFO    ] 2017-09-11T03:39:24.659706735Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-09-11T03:39:24.659793704Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-09-11T03:39:24.660497232Z: + set -e
[STDERR  ] 2017-09-11T03:39:24.660561304Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-09-11T03:39:24.660575945Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-09-11T03:39:24.660585807Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-09-11T03:39:24.660595312Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-09-11T03:39:24.660607545Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-09-11T03:39:24.660620487Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-09-11T03:39:24.660631178Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/build/test/cases/../../blueprints
[STDERR  ] 2017-09-11T03:39:24.660641722Z: + RT_CANCEL=253
[STDERR  ] 2017-09-11T03:39:24.660650703Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-09-11T03:39:24.660661565Z: + trap clean_up EXIT
[STDERR  ] 2017-09-11T03:39:24.660670842Z: + docker pull linuxkit/kernel:4.9.47
[STDOUT  ] 2017-09-11T03:39:25.787662775Z: 4.9.47: Pulling from linuxkit/kernel
[STDOUT  ] 2017-09-11T03:39:26.202918784Z: Digest: sha256:addff1a7b0963f7b9f6f0805bbd8a9179fd547473199f44b9eb87d9e17d40589
[STDOUT  ] 2017-09-11T03:39:26.202979926Z: Status: Image is up to date for linuxkit/kernel:4.9.47
[STDERR  ] 2017-09-11T03:39:26.203874624Z: + docker build -t kmod-test .
[STDOUT  ] 2017-09-11T03:39:26.265699395Z: Sending build context to Docker daemon  8.704kB
[STDOUT  ] 2017-09-11T03:39:26.3555421Z: Step 1/12 : FROM linuxkit/kernel:4.9.47 AS ksrc
[STDOUT  ] 2017-09-11T03:39:26.369112475Z:  ---> d61f9f3ba160
[STDOUT  ] 2017-09-11T03:39:26.369143682Z: Step 2/12 : FROM linuxkit/alpine:f4f5b333fa1a8433334fcae996d1637173144a72 AS build
[STDOUT  ] 2017-09-11T03:39:27.712366067Z: f4f5b333fa1a8433334fcae996d1637173144a72: Pulling from linuxkit/alpine
[STDOUT  ] 2017-09-11T03:39:28.135139263Z: 88286f41530e: Already exists
[STDOUT  ] 2017-09-11T03:39:28.14029637Z: d6741435ea3e: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140334876Z: f23fc2298e04: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140349876Z: 3ee238104091: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140360029Z: a9c6c814d848: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140369555Z: 2a0f28fbda1b: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.14038006Z: bf16ab44b983: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140395025Z: 06cce1f08e61: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140405253Z: 7d8ca769972b: Pulling fs layer
[STDOUT  ] 2017-09-11T03:39:28.140414407Z: a9c6c814d848: Waiting
[STDOUT  ] 2017-09-11T03:39:28.140423983Z: 2a0f28fbda1b: Waiting
[STDOUT  ] 2017-09-11T03:39:28.140433161Z: bf16ab44b983: Waiting
[STDOUT  ] 2017-09-11T03:39:28.140442339Z: 06cce1f08e61: Waiting
[STDOUT  ] 2017-09-11T03:39:28.140452214Z: 7d8ca769972b: Waiting
[STDOUT  ] 2017-09-11T03:39:28.962689587Z: d6741435ea3e: Verifying Checksum
[STDOUT  ] 2017-09-11T03:39:29.0521671Z: d6741435ea3e: Pull complete
[STDOUT  ] 2017-09-11T03:39:29.087493325Z: 3ee238104091: Download complete
[STDOUT  ] 2017-09-11T03:39:29.179552971Z: f23fc2298e04: Download complete
[STDOUT  ] 2017-09-11T03:39:29.252598366Z: f23fc2298e04: Pull complete
[STDOUT  ] 2017-09-11T03:39:29.364428572Z: 3ee238104091: Pull complete
[STDOUT  ] 2017-09-11T03:39:30.146999671Z: bf16ab44b983: Verifying Checksum
[STDOUT  ] 2017-09-11T03:39:30.147058068Z: bf16ab44b983: Download complete
[STDOUT  ] 2017-09-11T03:39:35.847273558Z: 06cce1f08e61: Verifying Checksum
[STDOUT  ] 2017-09-11T03:39:35.847316043Z: 06cce1f08e61: Download complete
[STDOUT  ] 2017-09-11T03:39:37.959981144Z: 2a0f28fbda1b: Verifying Checksum
[STDOUT  ] 2017-09-11T03:39:37.960066352Z: 2a0f28fbda1b: Download complete
[STDOUT  ] 2017-09-11T03:39:38.413645329Z: 7d8ca769972b: Verifying Checksum
[STDOUT  ] 2017-09-11T03:39:38.413700185Z: 7d8ca769972b: Download complete
[STDOUT  ] 2017-09-11T03:39:38.561443945Z: a9c6c814d848: Download complete
[STDOUT  ] 2017-09-11T03:39:42.780052244Z: a9c6c814d848: Pull complete
[STDOUT  ] 2017-09-11T03:39:43.245526879Z: 2a0f28fbda1b: Pull complete
[STDOUT  ] 2017-09-11T03:39:43.372983246Z: bf16ab44b983: Pull complete
[STDOUT  ] 2017-09-11T03:39:44.519460467Z: 06cce1f08e61: Pull complete
[STDOUT  ] 2017-09-11T03:39:44.702396813Z: 7d8ca769972b: Pull complete
[STDOUT  ] 2017-09-11T03:39:44.708707798Z: Digest: sha256:3adb328a946fbe9cc055d9c71c68d4c157e6903287f71a942039c25f9e151302
[STDOUT  ] 2017-09-11T03:39:44.712970652Z: Status: Downloaded newer image for linuxkit/alpine:f4f5b333fa1a8433334fcae996d1637173144a72
[STDOUT  ] 2017-09-11T03:39:44.713540815Z:  ---> 184945765e5a
[STDOUT  ] 2017-09-11T03:39:44.713563105Z: Step 3/12 : RUN apk add build-base
[STDOUT  ] 2017-09-11T03:39:44.784159006Z:  ---> Running in 397a3612fe2e
[STDOUT  ] 2017-09-11T03:39:45.083075806Z: (1/18) Installing binutils-libs (2.28-r2)
[STDOUT  ] 2017-09-11T03:39:45.101133889Z: (2/18) Installing binutils (2.28-r2)
[STDOUT  ] 2017-09-11T03:39:45.153480019Z: (3/18) Installing gmp (6.1.2-r0)
[STDOUT  ] 2017-09-11T03:39:45.158858412Z: (4/18) Installing isl (0.17.1-r0)
[STDOUT  ] 2017-09-11T03:39:45.171743903Z: (5/18) Installing libgomp (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:45.17388175Z: (6/18) Installing libatomic (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:45.174527753Z: (7/18) Installing pkgconf (1.3.7-r0)
[STDOUT  ] 2017-09-11T03:39:45.175943817Z: (8/18) Installing libgcc (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:45.176908658Z: (9/18) Installing mpfr3 (3.1.5-r0)
[STDOUT  ] 2017-09-11T03:39:45.181569499Z: (10/18) Installing mpc1 (1.0.3-r0)
[STDOUT  ] 2017-09-11T03:39:45.18264043Z: (11/18) Installing libstdc++ (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:45.191500687Z: (12/18) Installing gcc (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:45.75855424Z: (13/18) Installing musl-dev (1.1.16-r13)
[STDOUT  ] 2017-09-11T03:39:45.834664649Z: (14/18) Installing libc-dev (0.7.1-r0)
[STDOUT  ] 2017-09-11T03:39:45.834839052Z: (15/18) Installing g++ (6.3.0-r4)
[STDOUT  ] 2017-09-11T03:39:46.432203353Z: (16/18) Installing make (4.2.1-r0)
[STDOUT  ] 2017-09-11T03:39:46.435410606Z: (17/18) Installing fortify-headers (0.8-r0)
[STDOUT  ] 2017-09-11T03:39:46.436572254Z: (18/18) Installing build-base (0.5-r0)
[STDOUT  ] 2017-09-11T03:39:46.438500882Z: Executing busybox-1.26.2-r6.trigger
[STDOUT  ] 2017-09-11T03:39:46.445186035Z: OK: 159 MiB in 29 packages
[STDOUT  ] 2017-09-11T03:39:49.320007463Z:  ---> eff961914cdd
[STDOUT  ] 2017-09-11T03:39:49.41694521Z: Removing intermediate container 397a3612fe2e
[STDOUT  ] 2017-09-11T03:39:49.416993097Z: Step 4/12 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-09-11T03:39:51.128247955Z:  ---> d0ebb18b81b8
[STDOUT  ] 2017-09-11T03:39:51.143670625Z: Removing intermediate container 174ae9e4b3fc
[STDOUT  ] 2017-09-11T03:39:51.14370509Z: Step 5/12 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-09-11T03:39:51.20820673Z:  ---> Running in 057da843b2ea
[STDOUT  ] 2017-09-11T03:39:57.52436163Z:  ---> 0f81fe52f837
[STDOUT  ] 2017-09-11T03:39:57.954041649Z: Removing intermediate container 057da843b2ea
[STDOUT  ] 2017-09-11T03:39:57.954100805Z: Step 6/12 : WORKDIR /kmod
[STDOUT  ] 2017-09-11T03:39:58.264232218Z:  ---> f70e8029ebe2
[STDOUT  ] 2017-09-11T03:39:58.269165269Z: Removing intermediate container dc5c6c0fbcc2
[STDOUT  ] 2017-09-11T03:39:58.269195804Z: Step 7/12 : COPY ./src/* ./
[STDOUT  ] 2017-09-11T03:39:58.720601332Z:  ---> 437f4dc640b0
[STDOUT  ] 2017-09-11T03:39:58.725883897Z: Removing intermediate container bef354277fb3
[STDOUT  ] 2017-09-11T03:39:58.725910464Z: Step 8/12 : RUN make all
[STDOUT  ] 2017-09-11T03:39:58.801153762Z:  ---> Running in e5ec522d155a
[STDOUT  ] 2017-09-11T03:39:59.101860477Z: make -C /usr/src/linux-headers-4.9.47-linuxkit M=/kmod modules
[STDOUT  ] 2017-09-11T03:39:59.102907714Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.47-linuxkit'
[STDOUT  ] 2017-09-11T03:39:59.813023314Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-09-11T03:39:59.988337899Z:   Building modules, stage 2.
[STDOUT  ] 2017-09-11T03:39:59.995800842Z:   MODPOST 1 modules
[STDOUT  ] 2017-09-11T03:40:00.007700093Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-09-11T03:40:00.167361353Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-09-11T03:40:00.170290462Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.47-linuxkit'
[STDOUT  ] 2017-09-11T03:40:00.541715256Z:  ---> 123deeced28e
[STDOUT  ] 2017-09-11T03:40:00.547340948Z: Removing intermediate container e5ec522d155a
[STDOUT  ] 2017-09-11T03:40:00.547367078Z: Step 9/12 : FROM alpine:3.5
[STDOUT  ] 2017-09-11T03:40:01.780625027Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-09-11T03:40:01.780790295Z: 019300c8a437: Pulling fs layer
[STDOUT  ] 2017-09-11T03:40:02.292030223Z: 019300c8a437: Verifying Checksum
[STDOUT  ] 2017-09-11T03:40:02.292077081Z: 019300c8a437: Download complete
[STDOUT  ] 2017-09-11T03:40:02.553781577Z: 019300c8a437: Pull complete
[STDOUT  ] 2017-09-11T03:40:02.561267287Z: Digest: sha256:af2a5bd2f8de8fc1ecabf1c76611cdc6a5f1ada1a2bdd7d3816e121b70300308
[STDOUT  ] 2017-09-11T03:40:02.566017907Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-09-11T03:40:02.566452048Z:  ---> 074d602a59d7
[STDOUT  ] 2017-09-11T03:40:02.5665045Z: Step 10/12 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-09-11T03:40:04.316028678Z:  ---> 3eaa0a85fb33
[STDOUT  ] 2017-09-11T03:40:04.339234435Z: Removing intermediate container ead5c314e6d3
[STDOUT  ] 2017-09-11T03:40:04.339278569Z: Step 11/12 : COPY check.sh /check.sh
[STDOUT  ] 2017-09-11T03:40:04.926482979Z:  ---> 67ab37893f3c
[STDOUT  ] 2017-09-11T03:40:04.974705639Z: Removing intermediate container 3f27d658ad7d
[STDOUT  ] 2017-09-11T03:40:04.974768216Z: Step 12/12 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-09-11T03:40:05.495263908Z:  ---> Running in 9a5c00b37d45
[STDOUT  ] 2017-09-11T03:40:05.641499304Z:  ---> 7b0eda964fad
[STDOUT  ] 2017-09-11T03:40:05.646190054Z: Removing intermediate container 9a5c00b37d45
[STDOUT  ] 2017-09-11T03:40:05.646219159Z: Successfully built 7b0eda964fad
[STDOUT  ] 2017-09-11T03:40:05.650630708Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-09-11T03:40:05.682780711Z: + moby build -format kernel+initrd kmod.yml
[STDERR  ] 2017-09-11T03:40:05.693486711Z: Extract kernel image: linuxkit/kernel:4.9.47
[STDERR  ] 2017-09-11T03:40:07.422169673Z: Add init containers:
[STDERR  ] 2017-09-11T03:40:07.422229893Z: Process init image: linuxkit/init:79973d34faf7d4654462f3408c5eb00befaf03b8
[STDERR  ] 2017-09-11T03:40:08.646354526Z: Process init image: linuxkit/runc:a1b564248a0d0b118c11e61db9f84ecf41dd2d2a
[STDERR  ] 2017-09-11T03:40:09.921498224Z: Add onboot containers:
[STDERR  ] 2017-09-11T03:40:09.921581394Z:   Create OCI config for kmod-test
[STDERR  ] 2017-09-11T03:40:10.051598566Z:   Create OCI config for linuxkit/poweroff:1e9876c682c74d0602b7647c628bb0875fb13998
[STDERR  ] 2017-09-11T03:40:11.255762772Z: Create outputs:
[STDERR  ] 2017-09-11T03:40:15.139828509Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-09-11T03:40:15.18084663Z: + linuxkit run kmod
[STDERR  ] 2017-09-11T03:40:15.198262001Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-09-11T03:40:15.596901275Z: qemu-system-x86_64: -netdev user: Parameter 'id' is missing
[STDERR  ] 2017-09-11T03:40:15.895046129Z: time="2017-09-11T03:40:15Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-09-11T03:40:15.897159477Z: + RESULT=
[STDERR  ] 2017-09-11T03:40:15.897186774Z: + clean_up
[STDERR  ] 2017-09-11T03:40:15.897197256Z: + docker rmi kmod-test
[STDOUT  ] 2017-09-11T03:40:15.916397932Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-09-11T03:40:15.9164331Z: Deleted: sha256:7b0eda964fad77147931d0d27e2b209cabd655741804fbe9b37cf759ece33602
[STDOUT  ] 2017-09-11T03:40:15.916449722Z: Deleted: sha256:67ab37893f3c84a1b14cda8c384fd22fae43a69d59e384ccc79a1237e752e3e0
[STDOUT  ] 2017-09-11T03:40:15.916457077Z: Deleted: sha256:ad4a637b1188e21d2c92e4b55653d467620ac5b7b623c540bdda83d699759b27
[STDOUT  ] 2017-09-11T03:40:15.91646726Z: Deleted: sha256:3eaa0a85fb33aa83468bf7a2b9d42fa7a25f2e69adf6e64d5ac44ef38775943c
[STDOUT  ] 2017-09-11T03:40:15.916480119Z: Deleted: sha256:5770b35ff485b167da90e1d87d3f0ab6227ba87a06e6509d71e5b6805ae29b60
[STDERR  ] 2017-09-11T03:40:15.917048611Z: + find . -depth -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[FAIL    ] linuxkit.kernel.kmod_4.9.x 51.27s
