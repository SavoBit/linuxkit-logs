[INFO    ] 2017-06-06T21:31:40.827870798Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone1c68a6ac/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-06T21:31:40.827969457Z: Running command: [/bin/sh -x /tmp/with_clone1c68a6ac/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T21:31:40.829225908Z: + set -e
[STDERR  ] 2017-06-06T21:31:40.829296732Z: + . /tmp/with_clone1c68a6ac/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T21:31:40.829393773Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T21:31:40.829475711Z: + LINUXKIT_TMPDIR=/tmp/with_clone1c68a6ac/test/cases/_tmp
[STDERR  ] 2017-06-06T21:31:40.82954232Z: + [ -f /tmp/with_clone1c68a6ac/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T21:31:40.82960625Z: + . /tmp/with_clone1c68a6ac/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T21:31:40.829688312Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone1c68a6ac/test/cases/../../examples
[STDERR  ] 2017-06-06T21:31:40.829725475Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T21:31:40.829777446Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T21:31:40.829863773Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T21:31:40.829918236Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T21:31:42.143853665Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T21:31:42.203819689Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T21:31:42.203844173Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T21:31:42.206962811Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T21:31:42.231957622Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-06T21:31:42.374610175Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T21:31:42.444903005Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T21:31:42.444955846Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T21:31:42.445000778Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T21:31:42.445012509Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T21:31:42.88724624Z:  ---> Using cache
[STDOUT  ] 2017-06-06T21:31:42.887259291Z:  ---> f0cbf6abfeff
[STDOUT  ] 2017-06-06T21:31:42.887269117Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T21:31:42.903048521Z:  ---> Using cache
[STDOUT  ] 2017-06-06T21:31:42.9030592Z:  ---> dea6f2ffc37f
[STDOUT  ] 2017-06-06T21:31:42.903067927Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T21:31:42.90307292Z:  ---> Using cache
[STDOUT  ] 2017-06-06T21:31:42.903085719Z:  ---> 86d70d5ffa4a
[STDOUT  ] 2017-06-06T21:31:42.90309876Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T21:31:42.903107392Z:  ---> Using cache
[STDOUT  ] 2017-06-06T21:31:42.903115832Z:  ---> a19285fc0078
[STDOUT  ] 2017-06-06T21:31:42.903124538Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T21:31:42.903129042Z:  ---> Using cache
[STDOUT  ] 2017-06-06T21:31:42.903136407Z:  ---> ea9aa5cb89b9
[STDOUT  ] 2017-06-06T21:31:42.903148641Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T21:31:42.903152872Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T21:31:42.903165203Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T21:31:43.327837663Z:  ---> e6b4b76cd7b8
[STDOUT  ] 2017-06-06T21:31:43.34372453Z: Removing intermediate container 5fc601fc96fb
[STDOUT  ] 2017-06-06T21:31:43.343736716Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T21:31:43.839478999Z:  ---> a437e0c5f9eb
[STDOUT  ] 2017-06-06T21:31:43.855244514Z: Removing intermediate container 1b55ef0d2f38
[STDOUT  ] 2017-06-06T21:31:43.855260138Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T21:31:43.972670044Z:  ---> Running in 63070e82f680
[STDOUT  ] 2017-06-06T21:31:44.160295852Z:  ---> b6c2ca78dd7a
[STDOUT  ] 2017-06-06T21:31:44.176038091Z: Removing intermediate container 63070e82f680
[STDOUT  ] 2017-06-06T21:31:44.176049861Z: Successfully built b6c2ca78dd7a
[STDOUT  ] 2017-06-06T21:31:44.176065045Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T21:31:44.260628723Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T21:31:44.270026689Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T21:31:50.56558639Z: Add init containers:
[STDERR  ] 2017-06-06T21:31:50.565655528Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T21:31:52.555455555Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T21:31:54.616746238Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-06T21:32:02.046208008Z: Add onboot containers:
[STDERR  ] 2017-06-06T21:32:02.046294884Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T21:32:03.320240077Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T21:32:05.482180564Z: Create outputs:
[STDERR  ] 2017-06-06T21:32:13.730659484Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T21:32:14.015146096Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T21:32:14.015745133Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T21:32:51.768910338Z: + clean_up
[STDERR  ] 2017-06-06T21:32:51.76893387Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T21:32:51.835553589Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T21:32:51.835574769Z: Deleted: sha256:b6c2ca78dd7abd5c2595e47b0ce64e222b2a54ba5aadcfbe8585c119672dc44a
[STDOUT  ] 2017-06-06T21:32:51.835591286Z: Deleted: sha256:a437e0c5f9eb8e39a6a51eee1deb1366da440c9b70520f7a7ee5857379f99272
[STDOUT  ] 2017-06-06T21:32:51.835608711Z: Deleted: sha256:3d20623ca2624192b33696159f0d213472971b0ed3d06f9a9b97e2d8d866fcc0
[STDOUT  ] 2017-06-06T21:32:51.835622494Z: Deleted: sha256:e6b4b76cd7b86c54918d61d93eed9ad2362a811156c5203a993481991e17693f
[STDOUT  ] 2017-06-06T21:32:51.835637183Z: Deleted: sha256:424e85069cfedc73a02c984a2748d512fb6290b084d496e0d0bc7ddf59c8a7a4
[STDERR  ] 2017-06-06T21:32:51.838327645Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 71.03s
