[INFO    ] 2017-06-01T13:03:02.913266761Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-01T13:03:02.913341472Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-01T13:03:02.953235376Z: + set -e
[STDERR  ] 2017-06-01T13:03:02.953279518Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-01T13:03:02.95334656Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-01T13:03:02.953392791Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-01T13:03:02.953425132Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-01T13:03:02.95347041Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-01T13:03:02.953510671Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-01T13:03:02.953534285Z: + RT_CANCEL=253
[STDERR  ] 2017-06-01T13:03:02.953560244Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-01T13:03:02.95359377Z: + trap clean_up EXIT
[STDERR  ] 2017-06-01T13:03:02.953618449Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-01T13:03:04.183457097Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-01T13:03:04.183583565Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-01T13:03:04.183622141Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T13:03:04.184531154Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-01T13:03:04.221637671Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-01T13:03:04.290902867Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-01T13:03:04.318577611Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-01T13:03:04.318739984Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-01T13:03:05.418469406Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-01T13:03:05.471269576Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-01T13:03:05.558779893Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-01T13:03:09.327028915Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-01T13:03:09.328736406Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-01T13:03:15.693064991Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-01T13:03:15.704579027Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-01T13:03:15.714162161Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-01T13:03:15.714714345Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-01T13:03:15.715061942Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-01T13:03:17.594963341Z:  ---> 76e0f066e8b6
[STDOUT  ] 2017-06-01T13:03:17.685835457Z: Removing intermediate container d66e684dc1e8
[STDOUT  ] 2017-06-01T13:03:17.685966405Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-01T13:03:17.866041731Z:  ---> Running in bfc1858fb84a
[STDOUT  ] 2017-06-01T13:03:27.647271844Z:  ---> 8fe36c82a31d
[STDOUT  ] 2017-06-01T13:03:27.981537186Z: Removing intermediate container bfc1858fb84a
[STDOUT  ] 2017-06-01T13:03:27.981680096Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-01T13:03:28.28484786Z:  ---> 37be10a2d2ca
[STDOUT  ] 2017-06-01T13:03:28.320698298Z: Removing intermediate container 96c12fe24b63
[STDOUT  ] 2017-06-01T13:03:28.320849913Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-01T13:03:28.601734461Z:  ---> 3e6bb44f2bbd
[STDOUT  ] 2017-06-01T13:03:28.618736274Z: Removing intermediate container 3ff40856193b
[STDOUT  ] 2017-06-01T13:03:28.618837991Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-01T13:03:28.712216858Z:  ---> Running in a3c2425b01a9
[STDOUT  ] 2017-06-01T13:03:28.873013599Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-01T13:03:28.874158207Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-01T13:03:29.949839416Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-01T13:03:30.145500964Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-01T13:03:30.15473599Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-01T13:03:30.170395583Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-01T13:03:30.422556874Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-01T13:03:30.425741959Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-01T13:03:30.699925116Z:  ---> 21d8b6dc02dd
[STDOUT  ] 2017-06-01T13:03:30.71128035Z: Removing intermediate container a3c2425b01a9
[STDOUT  ] 2017-06-01T13:03:30.711431352Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-01T13:03:31.852584748Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-01T13:03:31.853350647Z: 6f821164d5b7: Pulling fs layer
[STDOUT  ] 2017-06-01T13:03:32.492402171Z: 6f821164d5b7: Verifying Checksum
[STDOUT  ] 2017-06-01T13:03:32.492480919Z: 6f821164d5b7: Download complete
[STDOUT  ] 2017-06-01T13:03:32.707647002Z: 6f821164d5b7: Pull complete
[STDOUT  ] 2017-06-01T13:03:32.734084202Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-01T13:03:32.751642928Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-01T13:03:32.751998333Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-01T13:03:32.752122674Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-01T13:03:32.992991703Z:  ---> ab9e6b348c70
[STDOUT  ] 2017-06-01T13:03:33.005001475Z: Removing intermediate container 0db6b3dd2f90
[STDOUT  ] 2017-06-01T13:03:33.005189145Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-01T13:03:33.226772733Z:  ---> d06d973253e6
[STDOUT  ] 2017-06-01T13:03:33.264147142Z: Removing intermediate container 87c54b5a3fd6
[STDOUT  ] 2017-06-01T13:03:33.264268517Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-01T13:03:33.382914337Z:  ---> Running in 1d3e0287ea31
[STDOUT  ] 2017-06-01T13:03:33.543358874Z:  ---> 77981bc5127d
[STDOUT  ] 2017-06-01T13:03:33.57068457Z: Removing intermediate container 1d3e0287ea31
[STDOUT  ] 2017-06-01T13:03:33.57078321Z: Successfully built 77981bc5127d
[STDOUT  ] 2017-06-01T13:03:33.581147634Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-01T13:03:33.60629843Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-01T13:03:33.615982226Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T13:03:36.723839331Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T13:03:36.724003783Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T13:03:40.340434105Z: Add init containers:
[STDERR  ] 2017-06-01T13:03:40.340474146Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T13:03:40.340505758Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T13:03:43.255592596Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T13:03:43.255630878Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T13:03:46.235977071Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-06-01T13:03:46.236023407Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-06-01T13:03:49.789563205Z: Add onboot containers:
[STDERR  ] 2017-06-01T13:03:49.78961354Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-01T13:03:50.023049332Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T13:03:50.025175908Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T13:03:52.960137948Z: Create outputs:
[STDERR  ] 2017-06-01T13:03:58.772195596Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-01T13:03:58.817490995Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-01T13:03:58.818398199Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-01T13:03:58.832435108Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-01T13:04:16.564205068Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-01T13:04:16.566891483Z: time="2017-06-01T13:04:16Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-01T13:04:16.566909394Z: + clean_up
[STDERR  ] 2017-06-01T13:04:16.566916403Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-01T13:04:16.60931997Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-01T13:04:16.60933413Z: Deleted: sha256:77981bc5127dc77f242e86d3a8ca2c83c916cd3328f47bd918dbabd8a286b6d4
[STDOUT  ] 2017-06-01T13:04:16.609338128Z: Deleted: sha256:d06d973253e64baa2e1eb6c9fb1de9504470f1abf9bec36c33f13c2bbab7ba29
[STDOUT  ] 2017-06-01T13:04:16.609344245Z: Deleted: sha256:e241d54f0c3863d8d0725fb84ab0bc8334f16cd8923670a62026826bef4855bb
[STDOUT  ] 2017-06-01T13:04:16.609352795Z: Deleted: sha256:ab9e6b348c70e2efb50759b04258c881eb216132849ceb4819ec867771e9fcaa
[STDOUT  ] 2017-06-01T13:04:16.609355848Z: Deleted: sha256:5bac50d234ff81214dc929960b5187774f479571de252c873ce73f94642ccd5d
[STDERR  ] 2017-06-01T13:04:16.610258596Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 73.72s
