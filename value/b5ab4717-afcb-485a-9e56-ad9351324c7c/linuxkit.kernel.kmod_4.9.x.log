[INFO    ] 2017-07-31T13:40:32.381846496Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-07-31T13:40:32.381954876Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-07-31T13:40:32.388339449Z: + set -e
[STDERR  ] 2017-07-31T13:40:32.388440426Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-07-31T13:40:32.388455061Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-07-31T13:40:32.388470078Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-07-31T13:40:32.388482735Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-07-31T13:40:32.388493809Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-07-31T13:40:32.388508741Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-07-31T13:40:32.388524765Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/build/test/cases/../../blueprints
[STDERR  ] 2017-07-31T13:40:32.388539209Z: + RT_CANCEL=253
[STDERR  ] 2017-07-31T13:40:32.388549934Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-07-31T13:40:32.388561218Z: + trap clean_up EXIT
[STDERR  ] 2017-07-31T13:40:32.388581092Z: + docker pull linuxkit/kernel:4.9.39
[STDOUT  ] 2017-07-31T13:40:33.559142789Z: 4.9.39: Pulling from linuxkit/kernel
[STDOUT  ] 2017-07-31T13:40:33.559546172Z: Digest: sha256:a409547705b00f4dbc6ba09ad67ae3d2c87e5a7a8d8955e310b834b2220b77b0
[STDOUT  ] 2017-07-31T13:40:33.559613203Z: Status: Image is up to date for linuxkit/kernel:4.9.39
[STDERR  ] 2017-07-31T13:40:33.561053501Z: + docker build -t kmod-test .
[STDOUT  ] 2017-07-31T13:40:33.640729537Z: Sending build context to Docker daemon  8.704kB
[STDOUT  ] 2017-07-31T13:40:33.730550567Z: Step 1/11 : FROM linuxkit/kernel:4.9.39 AS ksrc
[STDOUT  ] 2017-07-31T13:40:33.77005896Z:  ---> e626d2ce1db0
[STDOUT  ] 2017-07-31T13:40:33.77013671Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-07-31T13:40:35.531658381Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-07-31T13:40:35.532209609Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-07-31T13:40:35.539426971Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-07-31T13:40:39.152914605Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-07-31T13:40:39.152967976Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-07-31T13:40:45.417983327Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-07-31T13:40:45.425985128Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-31T13:40:45.429212541Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-31T13:40:45.429876682Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-07-31T13:40:45.429905414Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-07-31T13:40:47.387526314Z:  ---> e4ba59bedfb6
[STDOUT  ] 2017-07-31T13:40:47.406497075Z: Removing intermediate container 5608d279bd24
[STDOUT  ] 2017-07-31T13:40:47.406548961Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-07-31T13:40:47.47656301Z:  ---> Running in 0fd5008ccca6
[STDOUT  ] 2017-07-31T13:40:53.402218708Z:  ---> 0af88479896a
[STDOUT  ] 2017-07-31T13:40:53.793206088Z: Removing intermediate container 0fd5008ccca6
[STDOUT  ] 2017-07-31T13:40:53.793273979Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-07-31T13:40:54.027897851Z:  ---> 06ff65424655
[STDOUT  ] 2017-07-31T13:40:54.034510521Z: Removing intermediate container bc3f4a86e156
[STDOUT  ] 2017-07-31T13:40:54.034566008Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-07-31T13:40:54.487665361Z:  ---> 4a77b2148802
[STDOUT  ] 2017-07-31T13:40:54.494010663Z: Removing intermediate container 819cf2d0deab
[STDOUT  ] 2017-07-31T13:40:54.494060698Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-07-31T13:40:54.565363491Z:  ---> Running in ceb7d6396548
[STDOUT  ] 2017-07-31T13:40:54.867558063Z: make -C /usr/src/linux-headers-4.9.39-linuxkit M=/kmod modules
[STDOUT  ] 2017-07-31T13:40:54.868222352Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.39-linuxkit'
[STDOUT  ] 2017-07-31T13:40:55.667066914Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-07-31T13:40:55.849920256Z:   Building modules, stage 2.
[STDOUT  ] 2017-07-31T13:40:55.857792688Z:   MODPOST 1 modules
[STDOUT  ] 2017-07-31T13:40:55.870898426Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-07-31T13:40:56.039960464Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-07-31T13:40:56.043216513Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.39-linuxkit'
[STDOUT  ] 2017-07-31T13:40:56.49185369Z:  ---> 3898e90f65d3
[STDOUT  ] 2017-07-31T13:40:56.498518029Z: Removing intermediate container ceb7d6396548
[STDOUT  ] 2017-07-31T13:40:56.498566314Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-07-31T13:40:57.582530935Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-07-31T13:40:57.58263664Z: 019300c8a437: Pulling fs layer
[STDOUT  ] 2017-07-31T13:40:58.182500357Z: 019300c8a437: Verifying Checksum
[STDOUT  ] 2017-07-31T13:40:58.182551502Z: 019300c8a437: Download complete
[STDOUT  ] 2017-07-31T13:40:58.419860899Z: 019300c8a437: Pull complete
[STDOUT  ] 2017-07-31T13:40:58.427055563Z: Digest: sha256:af2a5bd2f8de8fc1ecabf1c76611cdc6a5f1ada1a2bdd7d3816e121b70300308
[STDOUT  ] 2017-07-31T13:40:58.432819219Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-07-31T13:40:58.4333184Z:  ---> 074d602a59d7
[STDOUT  ] 2017-07-31T13:40:58.43339554Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-07-31T13:40:58.803812418Z:  ---> 7597d4f743ce
[STDOUT  ] 2017-07-31T13:40:58.810077263Z: Removing intermediate container ed8b6a9134d5
[STDOUT  ] 2017-07-31T13:40:58.810155783Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-07-31T13:40:59.187789315Z:  ---> 446be61d34c3
[STDOUT  ] 2017-07-31T13:40:59.193979702Z: Removing intermediate container e310e79a7d29
[STDOUT  ] 2017-07-31T13:40:59.194028966Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-07-31T13:40:59.27387733Z:  ---> Running in d41a7d2bda04
[STDOUT  ] 2017-07-31T13:40:59.424747486Z:  ---> 7a19cb953cb2
[STDOUT  ] 2017-07-31T13:40:59.431673067Z: Removing intermediate container d41a7d2bda04
[STDOUT  ] 2017-07-31T13:40:59.431724046Z: Successfully built 7a19cb953cb2
[STDOUT  ] 2017-07-31T13:40:59.436151529Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-07-31T13:40:59.470230648Z: + moby build -output kernel+initrd kmod.yml
[STDERR  ] 2017-07-31T13:40:59.480842812Z: Extract kernel image: linuxkit/kernel:4.9.39
[STDERR  ] 2017-07-31T13:41:01.205942543Z: Add init containers:
[STDERR  ] 2017-07-31T13:41:01.20601424Z: Process init image: linuxkit/init:4dcee04c04c900a5796dc719f8d16fea7e771059
[STDERR  ] 2017-07-31T13:41:02.44768889Z: Process init image: linuxkit/runc:f5960b83a8766ae083efc744fa63dbf877450e4f
[STDERR  ] 2017-07-31T13:41:03.767523347Z: Add onboot containers:
[STDERR  ] 2017-07-31T13:41:03.767591437Z:   Create OCI config for kmod-test
[STDERR  ] 2017-07-31T13:41:03.907366326Z:   Create OCI config for linuxkit/poweroff:3845c4d64d47a1ea367806be5547e44594b0fa91
[STDERR  ] 2017-07-31T13:41:05.167657982Z: Create outputs:
[STDERR  ] 2017-07-31T13:41:08.479293755Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-07-31T13:41:08.52101995Z: + linuxkit run kmod
[STDERR  ] 2017-07-31T13:41:08.539435619Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-07-31T13:41:09.0095415Z: qemu-system-x86_64: Device needs media, but drive is empty
[STDERR  ] 2017-07-31T13:41:09.009605967Z: qemu-system-x86_64: Initialization of device ide-hd failed: Device initialization failed.
[STDERR  ] 2017-07-31T13:41:09.338753475Z: time="2017-07-31T13:41:09Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-07-31T13:41:09.341623278Z: + RESULT=
[STDERR  ] 2017-07-31T13:41:09.341666361Z: + clean_up
[STDERR  ] 2017-07-31T13:41:09.341676871Z: + docker rmi kmod-test
[STDOUT  ] 2017-07-31T13:41:09.363349234Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-07-31T13:41:09.36342088Z: Deleted: sha256:7a19cb953cb2209bb4a5868feca7adeb321be1dd9a1380bf2e2716a02d5727e1
[STDOUT  ] 2017-07-31T13:41:09.363435744Z: Deleted: sha256:446be61d34c3e414d9a3ebec170a10a55f580f2e3c0baafcf2da18e1a01092ae
[STDOUT  ] 2017-07-31T13:41:09.363445187Z: Deleted: sha256:2697fb52f5b8afe25a35d3ca064113e93c7f63e25515a110613d124513ae1cb9
[STDOUT  ] 2017-07-31T13:41:09.363454567Z: Deleted: sha256:7597d4f743ce0f6d49e32b7253c634cdeafe9d53b2db953a62bc37a0d53d38d5
[STDOUT  ] 2017-07-31T13:41:09.363470647Z: Deleted: sha256:e28aab77e73ac58a3ab0d30bbadbbc99a2f922451a8f6d7508bcd163487aae76
[STDERR  ] 2017-07-31T13:41:09.364519968Z: + find . -depth -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[FAIL    ] linuxkit.kernel.kmod_4.9.x 36.99s
