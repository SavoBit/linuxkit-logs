[INFO    ] 2017-06-06T22:18:43.887691249Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone1a57f79b/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-06T22:18:43.887765307Z: Running command: [/bin/sh -x /tmp/with_clone1a57f79b/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T22:18:43.895272612Z: + set -e
[STDERR  ] 2017-06-06T22:18:43.895281902Z: + . /tmp/with_clone1a57f79b/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T22:18:43.895306254Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T22:18:43.895325039Z: + LINUXKIT_TMPDIR=/tmp/with_clone1a57f79b/test/cases/_tmp
[STDERR  ] 2017-06-06T22:18:43.895350265Z: + [ -f /tmp/with_clone1a57f79b/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T22:18:43.895378333Z: + . /tmp/with_clone1a57f79b/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T22:18:43.895396724Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone1a57f79b/test/cases/../../examples
[STDERR  ] 2017-06-06T22:18:43.8954093Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T22:18:43.895428378Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T22:18:43.895440237Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T22:18:43.895452779Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T22:18:45.266944124Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T22:18:45.324104611Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T22:18:45.324160734Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T22:18:45.327329179Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T22:18:45.339180942Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-06T22:18:45.494904743Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T22:18:45.554142452Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T22:18:45.55417178Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T22:18:45.554183518Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T22:18:45.554187864Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T22:18:46.00457103Z:  ---> Using cache
[STDOUT  ] 2017-06-06T22:18:46.004585689Z:  ---> f0cbf6abfeff
[STDOUT  ] 2017-06-06T22:18:46.004594192Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T22:18:46.021208168Z:  ---> Using cache
[STDOUT  ] 2017-06-06T22:18:46.021277089Z:  ---> dea6f2ffc37f
[STDOUT  ] 2017-06-06T22:18:46.021291193Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T22:18:46.021312898Z:  ---> Using cache
[STDOUT  ] 2017-06-06T22:18:46.021321125Z:  ---> 86d70d5ffa4a
[STDOUT  ] 2017-06-06T22:18:46.021328299Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T22:18:46.021340029Z:  ---> Using cache
[STDOUT  ] 2017-06-06T22:18:46.021347954Z:  ---> a19285fc0078
[STDOUT  ] 2017-06-06T22:18:46.021355397Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T22:18:46.021363413Z:  ---> Using cache
[STDOUT  ] 2017-06-06T22:18:46.021370546Z:  ---> ea9aa5cb89b9
[STDOUT  ] 2017-06-06T22:18:46.021378177Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T22:18:46.021385383Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T22:18:46.021393078Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T22:18:46.511413188Z:  ---> 42ab3f42d988
[STDOUT  ] 2017-06-06T22:18:46.527870259Z: Removing intermediate container 62309192bd64
[STDOUT  ] 2017-06-06T22:18:46.527879548Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T22:18:46.951609454Z:  ---> 6266903957ab
[STDOUT  ] 2017-06-06T22:18:46.967979043Z: Removing intermediate container f63a23821a6f
[STDOUT  ] 2017-06-06T22:18:46.968010839Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T22:18:47.084470408Z:  ---> Running in 7b8300884b9f
[STDOUT  ] 2017-06-06T22:18:47.280183724Z:  ---> f20312aeeb9a
[STDOUT  ] 2017-06-06T22:18:47.296567977Z: Removing intermediate container 7b8300884b9f
[STDOUT  ] 2017-06-06T22:18:47.296590193Z: Successfully built f20312aeeb9a
[STDOUT  ] 2017-06-06T22:18:47.296598202Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T22:18:47.371954506Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T22:18:47.380677989Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T22:18:54.973710145Z: Add init containers:
[STDERR  ] 2017-06-06T22:18:54.973789767Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T22:18:56.51462507Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T22:18:58.337091151Z: Process init image: linuxkit/containerd:15541037b9d84352ee4b66d8cd43d2d4a3595d41
[STDERR  ] 2017-06-06T22:19:03.829772105Z: Add onboot containers:
[STDERR  ] 2017-06-06T22:19:03.83089307Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T22:19:04.345443058Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T22:19:05.719746575Z: Create outputs:
[STDERR  ] 2017-06-06T22:19:11.593078116Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T22:19:11.860131256Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T22:19:11.866915554Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T22:19:35.803064863Z: + clean_up
[STDERR  ] 2017-06-06T22:19:35.803087167Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T22:19:35.854964336Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T22:19:35.854978598Z: Deleted: sha256:f20312aeeb9a6cab6a788e1ee0b231f22f76e9f78031de3adcc328a3c08cee2e
[STDOUT  ] 2017-06-06T22:19:35.855006986Z: Deleted: sha256:6266903957ab5c4ba8cd0b4586ae410c944ed617496675e31e8d6d5f5334c479
[STDOUT  ] 2017-06-06T22:19:35.855021433Z: Deleted: sha256:e7650ec628b0fb6112d47cbfd712eca71587541410b451bf25a20db172cd38a6
[STDOUT  ] 2017-06-06T22:19:35.855030849Z: Deleted: sha256:42ab3f42d9887fd93fab95abd236fb8b3e3d214544026b94164aec661539d54b
[STDOUT  ] 2017-06-06T22:19:35.855077321Z: Deleted: sha256:424e85069cfedc73a02c984a2748d512fb6290b084d496e0d0bc7ddf59c8a7a4
[STDERR  ] 2017-06-06T22:19:35.856729273Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 51.99s
