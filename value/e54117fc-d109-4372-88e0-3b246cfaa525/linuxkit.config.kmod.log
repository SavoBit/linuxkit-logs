[INFO    ] 2017-05-16T14:35:50.645177152Z: Running Test linuxkit.config.kmod in /tmp/with_clone26e1e4f5/test/cases/000_config/010_kmod
[INFO    ] 2017-05-16T14:35:50.645282489Z: Running command: [/bin/sh -x /tmp/with_clone26e1e4f5/test/cases/000_config/010_kmod/test.sh]
[STDERR  ] 2017-05-16T14:35:50.645753294Z: [    0.106888] Security Framework initialized
[STDERR  ] 2017-05-16T14:35:50.645819509Z: [    0.107514] Yama: becoming mindful.
[STDERR  ] 2017-05-16T14:35:50.645878771Z: [    0.110318] Mount-cache hash table entries: 2048 (order: 2, 16384 bytes)
[STDERR  ] 2017-05-16T14:35:50.645931062Z: [    0.110849] Mountpoint-cache hash table entries: 2048 (order: 2, 16384 bytes)
[STDERR  ] 2017-05-16T14:35:50.645993808Z: [    0.131570] Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0
[STDERR  ] 2017-05-16T14:35:50.646005183Z: [    0.131997] Last level dTLB entries: 4KB 0, 2MB 0, 4MB 0, 1GB 0
[STDERR  ] 2017-05-16T14:35:50.646125747Z: [    0.545214] Freeing SMP alternatives memory: 24K (ffffffff9b0fc000 - ffffffff9b102000)
[STDERR  ] 2017-05-16T14:35:50.646181919Z: [    0.554726] ftrace: allocating 41526 entries in 163 pages
[STDERR  ] 2017-05-16T14:35:50.646231011Z: [    0.813846] smpboot: Max logical packages: 1
[STDERR  ] 2017-05-16T14:35:50.646248944Z: [    0.825724] ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
[STDERR  ] 2017-05-16T14:35:50.646354279Z: [    0.930000] smpboot: CPU0: AMD QEMU Virtual CPU version 2.5+ (family: 0x6, model: 0x6, stepping: 0x3)
[STDERR  ] 2017-05-16T14:35:50.646409615Z: [    0.930000] Performance Events: PMU not available due to virtualization, using software events only.
[STDERR  ] 2017-05-16T14:35:50.646468943Z: [    0.938341] NMI watchdog: disabled (cpu0): hardware events not enabled
[STDERR  ] 2017-05-16T14:35:50.646532178Z: [    0.938810] NMI watchdog: Shutting down hard lockup detector on all cpus
[STDERR  ] 2017-05-16T14:35:50.646584313Z: [    0.941064] x86: Booted up 1 node, 1 CPUs
[STDERR  ] 2017-05-16T14:35:50.646641085Z: [    0.941434] smpboot: Total of 1 processors activated (4599.14 BogoMIPS)
[STDERR  ] 2017-05-16T14:35:50.646692967Z: [    0.957877] devtmpfs: initialized
[STDERR  ] 2017-05-16T14:35:50.646738334Z: [    0.962698] x86/mm: Memory block size: 128MB
[STDERR  ] 2017-05-16T14:35:50.646756021Z: [    1.033284] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[STDERR  ] 2017-05-16T14:35:50.64686987Z: [    1.034126] futex hash table entries: 256 (order: 2, 16384 bytes)
[STDERR  ] 2017-05-16T14:35:50.646923079Z: [    1.043106] NET: Registered protocol family 16
[STDERR  ] 2017-05-16T14:35:50.646976039Z: [    1.052568] cpuidle: using governor ladder
[STDERR  ] 2017-05-16T14:35:50.647021842Z: [    1.052991] cpuidle: using governor menu
[STDERR  ] 2017-05-16T14:35:50.647080177Z: [    1.054090] ACPI: bus type PCI registered
[STDERR  ] 2017-05-16T14:35:50.647091651Z: [    1.058037] PCI: MMCONFIG for domain 0000 [bus 00-ff] at [mem 0xb0000000-0xbfffffff] (base 0xb0000000)
[STDERR  ] 2017-05-16T14:35:50.647188586Z: [    1.058946] PCI: MMCONFIG at [mem 0xb0000000-0xbfffffff] reserved in E820
[STDERR  ] 2017-05-16T14:35:50.64723636Z: [    1.060460] PCI: Using configuration type 1 for base access
[STDERR  ] 2017-05-16T14:35:50.647308894Z: [    1.133436] HugeTLB registered 2 MB page size, pre-allocated 0 pages
[STDERR  ] 2017-05-16T14:35:50.647379918Z: [    1.144987] ACPI: Added _OSI(Module Device)
[STDERR  ] 2017-05-16T14:35:50.647394632Z: [    1.145509] ACPI: Added _OSI(Processor Device)
[STDERR  ] 2017-05-16T14:35:50.647502788Z: [    1.145808] ACPI: Added _OSI(3.0 _SCP Extensions)
[STDERR  ] 2017-05-16T14:35:50.647555121Z: [    1.146108] ACPI: Added _OSI(Processor Aggregator Device)
[STDERR  ] 2017-05-16T14:35:50.647607098Z: [    1.227415] ACPI: Interpreter enabled
[STDERR  ] 2017-05-16T14:35:50.647662381Z: [    1.228277] ACPI: (supports S0 S5)
[STDERR  ] 2017-05-16T14:35:50.647715977Z: [    1.228711] ACPI: Using IOAPIC for interrupt routing
[STDERR  ] 2017-05-16T14:35:50.647776991Z: [    1.231319] PCI: Using host bridge windows from ACPI; if necessary, use "pci=nocrs" and report a bug
[STDERR  ] 2017-05-16T14:35:50.647840333Z: [    1.302207] ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
[STDERR  ] 2017-05-16T14:35:50.647900075Z: [    1.303320] acpi PNP0A08:00: _OSC: OS supports [ExtendedConfig ASPM ClockPM Segments M
[STDERR  ] 2017-05-16T14:35:50.648180457Z: + set -e
[STDERR  ] 2017-05-16T14:35:50.648236125Z: + . /tmp/with_clone26e1e4f5/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-16T14:35:50.648289721Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-16T14:35:50.648300981Z: + LINUXKIT_TMPDIR=/tmp/with_clone26e1e4f5/test/cases/_tmp
[STDERR  ] 2017-05-16T14:35:50.648401597Z: + LINUXKIT_ARTIFACTS_DIR=/tmp/with_clone26e1e4f5/test/cases/../../artifacts
[STDERR  ] 2017-05-16T14:35:50.648456015Z: + [ -f /tmp/with_clone26e1e4f5/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-16T14:35:50.648504231Z: + . /tmp/with_clone26e1e4f5/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-16T14:35:50.648522542Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone26e1e4f5/test/cases/../../examples
[STDERR  ] 2017-05-16T14:35:50.648621353Z: + RT_CANCEL=253
[STDERR  ] 2017-05-16T14:35:50.648677944Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-16T14:35:50.648730677Z: + trap clean_up EXIT
[STDERR  ] 2017-05-16T14:35:50.648784521Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-16T14:35:53.885244447Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-16T14:35:53.944492523Z: Digest: sha256:dd706d391fddc3d2efc254a6c03223d6cb82b86a3dc059a9264063be2fd8911f
[STDOUT  ] 2017-05-16T14:35:53.94450498Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T14:35:53.947303536Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-16T14:35:53.960085093Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-16T14:35:54.127919508Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-16T14:35:54.194474068Z:  ---> cc9f6cd19506
[STDOUT  ] 2017-05-16T14:35:54.194518618Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-16T14:35:54.194523218Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-16T14:35:54.194541296Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-16T14:35:54.649546731Z:  ---> Using cache
[STDOUT  ] 2017-05-16T14:35:54.649574505Z:  ---> e8b0f171a47f
[STDOUT  ] 2017-05-16T14:35:54.649595445Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-16T14:35:54.66643053Z:  ---> Using cache
[STDOUT  ] 2017-05-16T14:35:54.6664594Z:  ---> 22f66ae165a4
[STDOUT  ] 2017-05-16T14:35:54.66648772Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-16T14:35:54.666497148Z:  ---> Using cache
[STDOUT  ] 2017-05-16T14:35:54.666530181Z:  ---> 08f7bb43d217
[STDOUT  ] 2017-05-16T14:35:54.666548241Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-16T14:35:54.666565658Z:  ---> Using cache
[STDOUT  ] 2017-05-16T14:35:54.666577132Z:  ---> c186beab57c7
[STDOUT  ] 2017-05-16T14:35:54.666589702Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-16T14:35:54.666625576Z:  ---> Using cache
[STDOUT  ] 2017-05-16T14:35:54.666637129Z:  ---> b9f31871c727
[STDOUT  ] 2017-05-16T14:35:54.666649404Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-16T14:35:54.66668305Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-16T14:35:54.666701095Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-16T14:35:55.121175759Z:  ---> ca4c08f7c3d1
[STDOUT  ] 2017-05-16T14:35:55.138266203Z: Removing intermediate container 50b0bd8d6557
[STDOUT  ] 2017-05-16T14:35:55.138294585Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-16T14:35:55.616563504Z:  ---> 6a837553a39c
[STDOUT  ] 2017-05-16T14:35:55.633356095Z: Removing intermediate container be54e7299c15
[STDOUT  ] 2017-05-16T14:35:55.633369459Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-16T14:35:55.733034933Z:  ---> Running in 3d8dc2a254c6
[STDOUT  ] 2017-05-16T14:35:55.913141107Z:  ---> e50ab91e53c6
[STDOUT  ] 2017-05-16T14:35:55.930575703Z: Removing intermediate container 3d8dc2a254c6
[STDOUT  ] 2017-05-16T14:35:55.930598928Z: Successfully built e50ab91e53c6
[STDOUT  ] 2017-05-16T14:35:55.930604356Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-16T14:35:56.004412018Z: + moby build kmod
[STDERR  ] 2017-05-16T14:35:56.013528508Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T14:35:59.85852171Z: Add init containers:
[STDERR  ] 2017-05-16T14:35:59.858546223Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-16T14:36:00.309192567Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-16T14:36:00.986239307Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-16T14:36:03.742008238Z: Add onboot containers:
[STDERR  ] 2017-05-16T14:36:03.742035539Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-16T14:36:04.228119195Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-16T14:36:04.702931614Z: Create outputs:
[STDERR  ] 2017-05-16T14:36:09.328883728Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-16T14:36:09.500735581Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-16T14:36:09.500784517Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-16T14:36:34.877715786Z: + clean_up
[STDERR  ] 2017-05-16T14:36:34.877827926Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-16T14:36:34.932738031Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-16T14:36:34.932807276Z: Deleted: sha256:e50ab91e53c6cd495d346f57bf8e796f599b232a831c73f82b81e0d62b6e71d2
[STDOUT  ] 2017-05-16T14:36:34.932852034Z: Deleted: sha256:6a837553a39c704cd82b6d891f5db79565639eca5c0339c6e4cf4e27429b283e
[STDOUT  ] 2017-05-16T14:36:34.932913027Z: Deleted: sha256:5a1addab4754acea9c5cedb5a8c78c7a1a14def4468316cb30a3ff1943c17330
[STDOUT  ] 2017-05-16T14:36:34.932956318Z: Deleted: sha256:ca4c08f7c3d14d73ed5a142757d502976d48815de8a85347dfa19c42d2f001f8
[STDOUT  ] 2017-05-16T14:36:34.93300133Z: Deleted: sha256:5f46e8805aa3fbd2d6a067f60f0159241c8c5fb6deeae364467354ba9d15b065
[STDERR  ] 2017-05-16T14:36:34.934707083Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.config.kmod 44.30s
