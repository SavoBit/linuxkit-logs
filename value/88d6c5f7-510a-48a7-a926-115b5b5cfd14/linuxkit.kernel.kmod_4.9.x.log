[INFO    ] 2017-05-30T13:20:25.094648938Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T13:20:25.094730414Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T13:20:25.117663909Z: + set -e
[STDERR  ] 2017-05-30T13:20:25.117704674Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T13:20:25.1177737Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T13:20:25.117807048Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-30T13:20:25.117844085Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T13:20:25.117867973Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T13:20:25.117893555Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-30T13:20:25.117926794Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T13:20:25.11795063Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T13:20:25.11799593Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T13:20:25.118020705Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T13:20:26.253882314Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-30T13:20:26.254049116Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T13:20:26.25408772Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T13:20:26.254781141Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T13:20:26.346607557Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-30T13:20:26.395129338Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T13:20:26.416212213Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T13:20:26.416361705Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T13:20:27.516960813Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-30T13:20:27.528760651Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-30T13:20:27.583278918Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-30T13:20:30.610544781Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-30T13:20:30.610646141Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-30T13:20:36.777514378Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-30T13:20:36.810301417Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-30T13:20:36.818918038Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-30T13:20:36.819264909Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T13:20:36.819349152Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T13:20:38.695219219Z:  ---> dee60b57a5b2
[STDOUT  ] 2017-05-30T13:20:38.805780204Z: Removing intermediate container 36f484d53354
[STDOUT  ] 2017-05-30T13:20:38.805882919Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T13:20:39.014053629Z:  ---> Running in 817a7c6bf7f9
[STDOUT  ] 2017-05-30T13:20:45.263551452Z:  ---> 6c204598dc51
[STDOUT  ] 2017-05-30T13:20:45.614044486Z: Removing intermediate container 817a7c6bf7f9
[STDOUT  ] 2017-05-30T13:20:45.614166641Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T13:20:45.98762829Z:  ---> b5ae24035b7d
[STDOUT  ] 2017-05-30T13:20:46.003019965Z: Removing intermediate container 46b50fc4475e
[STDOUT  ] 2017-05-30T13:20:46.003221094Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T13:20:46.31679074Z:  ---> fc52df981484
[STDOUT  ] 2017-05-30T13:20:46.33323421Z: Removing intermediate container b316047a63c5
[STDOUT  ] 2017-05-30T13:20:46.333364534Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T13:20:46.42273125Z:  ---> Running in a966263b8848
[STDOUT  ] 2017-05-30T13:20:46.609543844Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-30T13:20:46.610758211Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T13:20:47.784059274Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-30T13:20:47.978910492Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-30T13:20:47.986006637Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-30T13:20:47.99718771Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-30T13:20:48.17470476Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-30T13:20:48.177196536Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T13:20:48.423168888Z:  ---> 49df966e7880
[STDOUT  ] 2017-05-30T13:20:48.431846593Z: Removing intermediate container a966263b8848
[STDOUT  ] 2017-05-30T13:20:48.431937332Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T13:20:49.514122644Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-30T13:20:49.528602562Z: 6f821164d5b7: Already exists
[STDOUT  ] 2017-05-30T13:20:49.993668794Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-05-30T13:20:50.017356529Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-30T13:20:50.017803687Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T13:20:50.017886773Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T13:20:50.470644264Z:  ---> e57781ad9cb3
[STDOUT  ] 2017-05-30T13:20:50.53510493Z: Removing intermediate container 0fa9f3d1a462
[STDOUT  ] 2017-05-30T13:20:50.535256698Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T13:20:51.072561925Z:  ---> d7f430be3b5b
[STDOUT  ] 2017-05-30T13:20:51.157527659Z: Removing intermediate container 0b35d3cb2a5f
[STDOUT  ] 2017-05-30T13:20:51.157724266Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T13:20:51.43642346Z:  ---> Running in e6b94c623e35
[STDOUT  ] 2017-05-30T13:20:51.830877098Z:  ---> 5856a1f00540
[STDOUT  ] 2017-05-30T13:20:51.875641685Z: Removing intermediate container e6b94c623e35
[STDOUT  ] 2017-05-30T13:20:51.875729326Z: Successfully built 5856a1f00540
[STDOUT  ] 2017-05-30T13:20:51.919203634Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T13:20:51.950045738Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T13:20:51.959295484Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T13:20:54.718688605Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T13:20:54.718703218Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T13:20:58.139116182Z: Add init containers:
[STDERR  ] 2017-05-30T13:20:58.139156592Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T13:20:58.13917469Z: Pull image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T13:21:01.113267547Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T13:21:01.11332607Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T13:21:04.261487593Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T13:21:04.261571477Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T13:21:07.537490842Z: Add onboot containers:
[STDERR  ] 2017-05-30T13:21:07.537535795Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T13:21:07.72435158Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T13:21:07.726545016Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T13:21:10.751981095Z: Create outputs:
[STDERR  ] 2017-05-30T13:21:16.681296507Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T13:21:16.729081133Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T13:21:16.730007155Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T13:21:16.745025799Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-30T13:21:33.06138021Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-30T13:21:33.063924134Z: time="2017-05-30T13:21:33Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-30T13:21:33.06399231Z: + clean_up
[STDERR  ] 2017-05-30T13:21:33.063995589Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T13:21:33.120565634Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T13:21:33.120575117Z: Deleted: sha256:5856a1f005402bd499ca5cb67c764262f1dd49cfaa728649c65c35ab009e3b10
[STDOUT  ] 2017-05-30T13:21:33.120586962Z: Deleted: sha256:d7f430be3b5b4392dba7a69c7e9a523fdf73a04a3b11bcd9b2b4fc10c34a950f
[STDOUT  ] 2017-05-30T13:21:33.120593753Z: Deleted: sha256:e917426591710f87b04ded636e332a81e6591c7a5613db429e6a3f984469806f
[STDOUT  ] 2017-05-30T13:21:33.120601084Z: Deleted: sha256:e57781ad9cb390d11a424af282bc59a34f42f85b0dcc4508af367207b794a9ae
[STDOUT  ] 2017-05-30T13:21:33.120604751Z: Deleted: sha256:8f6106745863b9ecdd205d17a915a95ddeef56e8d5f6e68affae3a6cd5863fcd
[STDERR  ] 2017-05-30T13:21:33.121367196Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 68.05s
