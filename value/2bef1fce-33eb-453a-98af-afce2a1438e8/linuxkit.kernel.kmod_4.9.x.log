[INFO    ] 2017-05-30T14:08:31.270488148Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone2a0803d2/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T14:08:31.270610533Z: Running command: [/bin/sh -x /tmp/with_clone2a0803d2/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T14:08:31.291551762Z: + set -e
[STDERR  ] 2017-05-30T14:08:31.291564244Z: + . /tmp/with_clone2a0803d2/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T14:08:31.291586614Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T14:08:31.291603459Z: + LINUXKIT_TMPDIR=/tmp/with_clone2a0803d2/test/cases/_tmp
[STDERR  ] 2017-05-30T14:08:31.2916187Z: + [ -f /tmp/with_clone2a0803d2/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T14:08:31.291649989Z: + . /tmp/with_clone2a0803d2/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T14:08:31.291669261Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone2a0803d2/test/cases/../../examples
[STDERR  ] 2017-05-30T14:08:31.291676697Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T14:08:31.291706052Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T14:08:31.291713604Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T14:08:31.29173465Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T14:08:32.838551001Z: 4.9.x: Pulling from linuxkit/kernel
[STDERR  ] 2017-05-30T14:08:32.907147331Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T14:08:33.101206843Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T14:08:33.101217667Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T14:08:33.101875086Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-30T14:08:33.210271292Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T14:08:33.226593219Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T14:08:33.226616396Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T14:08:33.226628934Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T14:08:33.226644507Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T14:08:33.721789922Z:  ---> Using cache
[STDOUT  ] 2017-05-30T14:08:33.721804378Z:  ---> a2acd2d195dd
[STDOUT  ] 2017-05-30T14:08:33.721814399Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T14:08:33.73853591Z:  ---> Using cache
[STDOUT  ] 2017-05-30T14:08:33.738546969Z:  ---> f856074bea82
[STDOUT  ] 2017-05-30T14:08:33.738562766Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T14:08:33.738601009Z:  ---> Using cache
[STDOUT  ] 2017-05-30T14:08:33.738612753Z:  ---> bd8aca6d112a
[STDOUT  ] 2017-05-30T14:08:33.738633071Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T14:08:33.738639658Z:  ---> Using cache
[STDOUT  ] 2017-05-30T14:08:33.738659953Z:  ---> f95336a6638d
[STDOUT  ] 2017-05-30T14:08:33.738673448Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T14:08:33.738684242Z:  ---> Using cache
[STDOUT  ] 2017-05-30T14:08:33.73868985Z:  ---> a8c1fc2a3340
[STDOUT  ] 2017-05-30T14:08:33.738701548Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T14:08:33.738712467Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T14:08:33.738720627Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T14:08:34.215688634Z:  ---> 55753aad222d
[STDOUT  ] 2017-05-30T14:08:34.232795834Z: Removing intermediate container 36784fcf081e
[STDOUT  ] 2017-05-30T14:08:34.232874113Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T14:08:34.679689819Z:  ---> b20c6ce8d3f6
[STDOUT  ] 2017-05-30T14:08:34.696384117Z: Removing intermediate container 2cdfbfb1aa50
[STDOUT  ] 2017-05-30T14:08:34.696403075Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T14:08:34.812398805Z:  ---> Running in 8834b5910087
[STDOUT  ] 2017-05-30T14:08:35.008183768Z:  ---> 64f715a8d0bb
[STDOUT  ] 2017-05-30T14:08:35.025085497Z: Removing intermediate container 8834b5910087
[STDOUT  ] 2017-05-30T14:08:35.025126463Z: Successfully built 64f715a8d0bb
[STDOUT  ] 2017-05-30T14:08:35.025130645Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T14:08:35.108115255Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T14:08:35.116968223Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T14:08:37.766558793Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T14:08:37.76664356Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T14:08:47.534964712Z: Add init containers:
[STDERR  ] 2017-05-30T14:08:47.535043021Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T14:08:47.535085996Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T14:08:50.730202164Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T14:08:50.730280382Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T14:08:54.303881721Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T14:08:54.303941473Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T14:09:01.719230017Z: Add onboot containers:
[STDERR  ] 2017-05-30T14:09:01.719285578Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T14:09:02.211504846Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T14:09:02.247719027Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T14:09:05.528966256Z: Create outputs:
[STDERR  ] 2017-05-30T14:09:11.38495072Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T14:09:11.605365077Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T14:09:11.605391794Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T14:09:35.472311167Z: + clean_up
[STDERR  ] 2017-05-30T14:09:35.472402077Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T14:09:35.526103649Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T14:09:35.526149609Z: Deleted: sha256:64f715a8d0bbfbfd80a20b8a59718c61c181a6b66fc17c07c441825e689bc9c9
[STDOUT  ] 2017-05-30T14:09:35.526190036Z: Deleted: sha256:b20c6ce8d3f65ae042bd603862714f764d30e5f107928634da6ed9430854cfec
[STDOUT  ] 2017-05-30T14:09:35.526211434Z: Deleted: sha256:0c14fe32366febed11fc8f044741d6d6dd3c521c9065e7327ac9cce2a785c46c
[STDOUT  ] 2017-05-30T14:09:35.526227158Z: Deleted: sha256:55753aad222d6ea7eeb585be79e666599cb2f1f7775f25c23b7700052d1a96a9
[STDOUT  ] 2017-05-30T14:09:35.526252065Z: Deleted: sha256:bf238f3ddaa163160dac735ae8b6a1f840ff34e7ad0f30cc05461f47debdf364
[STDERR  ] 2017-05-30T14:09:35.528140084Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 64.28s
