[INFO    ] 2017-05-16T12:25:39.815614504Z: Running Test linuxkit.config.kmod in /tmp/linuxkit-1552d7fd/src/test/cases/000_config/010_kmod
[INFO    ] 2017-05-16T12:25:39.815676763Z: Running command: [/bin/sh -x /tmp/linuxkit-1552d7fd/src/test/cases/000_config/010_kmod/test.sh]
[STDERR  ] 2017-05-16T12:25:39.816106179Z: [    6.299462] scsi host1: ahci
[STDERR  ] 2017-05-16T12:25:39.816159571Z: [    6.301787] scsi host2: ahci
[STDERR  ] 2017-05-16T12:25:39.816220953Z: [    6.303920] scsi host3: ahci
[STDERR  ] 2017-05-16T12:25:39.816274072Z: [    6.305976] scsi host4: ahci
[STDERR  ] 2017-05-16T12:25:39.816325547Z: [    6.308070] scsi host5: ahci
[STDERR  ] 2017-05-16T12:25:39.816382297Z: [    6.309789] ata1: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1100 irq 24
[STDERR  ] 2017-05-16T12:25:39.816440168Z: [    6.310526] ata2: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1180 irq 24
[STDERR  ] 2017-05-16T12:25:39.816497426Z: [    6.310997] ata3: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1200 irq 24
[STDERR  ] 2017-05-16T12:25:39.81655331Z: [    6.311458] ata4: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1280 irq 24
[STDERR  ] 2017-05-16T12:25:39.816615674Z: [    6.311922] ata5: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1300 irq 24
[STDERR  ] 2017-05-16T12:25:39.816674354Z: [    6.312383] ata6: SATA max UDMA/133 abar m4096@0xfebf1000 port 0xfebf1380 irq 24
[STDERR  ] 2017-05-16T12:25:39.816730282Z: [    6.322098] Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)
[STDERR  ] 2017-05-16T12:25:39.816786933Z: [    6.341115] tun: Universal TUN/TAP device driver, 1.6
[STDERR  ] 2017-05-16T12:25:39.816837376Z: [    6.341516] tun: (C) 1999-2004 Max Krasnyansky <maxk@qualcomm.com>
[STDERR  ] 2017-05-16T12:25:39.816899408Z: [    6.343055] ena: Elastic Network Adapter (ENA) v1.0.2
[STDERR  ] 2017-05-16T12:25:39.816953392Z: [    6.344200] e1000: Intel(R) PRO/1000 Network Driver - version 7.3.21-k8-NAPI
[STDERR  ] 2017-05-16T12:25:39.817008463Z: [    6.344657] e1000: Copyright (c) 1999-2006 Intel Corporation.
[STDERR  ] 2017-05-16T12:25:39.817019347Z: [    6.352968] ACPI: PCI Interrupt Link [GSIG] enabled at IRQ 22
[STDERR  ] 2017-05-16T12:25:39.817120853Z: [    6.646190] ata2: SATA link down (SStatus 0 SControl 3
[STDERR  ] 2017-05-16T12:25:39.817205439Z: + set -e
[STDERR  ] 2017-05-16T12:25:39.817259361Z: + . /tmp/linuxkit-1552d7fd/src/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-16T12:25:39.817317231Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-16T12:25:39.817420359Z: + LINUXKIT_TMPDIR=/tmp/linuxkit-1552d7fd/src/test/cases/_tmp
[STDERR  ] 2017-05-16T12:25:39.817482114Z: + LINUXKIT_ARTIFACTS_DIR=/tmp/linuxkit-1552d7fd/src/test/cases/../../artifacts
[STDERR  ] 2017-05-16T12:25:39.81753742Z: + [ -f /tmp/linuxkit-1552d7fd/src/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-16T12:25:39.817589996Z: + . /tmp/linuxkit-1552d7fd/src/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-16T12:25:39.817658516Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/linuxkit-1552d7fd/src/test/cases/../../examples
[STDERR  ] 2017-05-16T12:25:39.81770539Z: + RT_CANCEL=253
[STDERR  ] 2017-05-16T12:25:39.817762067Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-16T12:25:39.817773341Z: + trap clean_up EXIT
[STDERR  ] 2017-05-16T12:25:39.817867259Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-16T12:25:42.88885104Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-16T12:25:42.954246299Z: Digest: sha256:dd706d391fddc3d2efc254a6c03223d6cb82b86a3dc059a9264063be2fd8911f
[STDOUT  ] 2017-05-16T12:25:42.954270832Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T12:25:42.957008838Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-16T12:25:42.968516286Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-16T12:25:43.120496113Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-16T12:25:43.184176954Z:  ---> cc9f6cd19506
[STDOUT  ] 2017-05-16T12:25:43.184210122Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-16T12:25:43.184256361Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-16T12:25:43.184270929Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-16T12:25:43.63662642Z:  ---> Using cache
[STDOUT  ] 2017-05-16T12:25:43.636637255Z:  ---> e8b0f171a47f
[STDOUT  ] 2017-05-16T12:25:43.636663952Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-16T12:25:43.653155107Z:  ---> Using cache
[STDOUT  ] 2017-05-16T12:25:43.65317656Z:  ---> 22f66ae165a4
[STDOUT  ] 2017-05-16T12:25:43.653196804Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-16T12:25:43.653221135Z:  ---> Using cache
[STDOUT  ] 2017-05-16T12:25:43.65323936Z:  ---> 08f7bb43d217
[STDOUT  ] 2017-05-16T12:25:43.653256836Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-16T12:25:43.653273938Z:  ---> Using cache
[STDOUT  ] 2017-05-16T12:25:43.653291493Z:  ---> c186beab57c7
[STDOUT  ] 2017-05-16T12:25:43.653327776Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-16T12:25:43.653354017Z:  ---> Using cache
[STDOUT  ] 2017-05-16T12:25:43.65337138Z:  ---> b9f31871c727
[STDOUT  ] 2017-05-16T12:25:43.653387576Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-16T12:25:43.653402874Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-16T12:25:43.653420203Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-16T12:25:44.145766545Z:  ---> 32c466ddde0b
[STDOUT  ] 2017-05-16T12:25:44.162236292Z: Removing intermediate container 6689d819861c
[STDOUT  ] 2017-05-16T12:25:44.162259646Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-16T12:25:44.649447375Z:  ---> 0580a68a4656
[STDOUT  ] 2017-05-16T12:25:44.666127638Z: Removing intermediate container 9d32b783a9b9
[STDOUT  ] 2017-05-16T12:25:44.666171934Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-16T12:25:44.774252966Z:  ---> Running in da958976e2f0
[STDOUT  ] 2017-05-16T12:25:44.962023206Z:  ---> deb94d07ec8b
[STDOUT  ] 2017-05-16T12:25:44.978565579Z: Removing intermediate container da958976e2f0
[STDOUT  ] 2017-05-16T12:25:44.978588029Z: Successfully built deb94d07ec8b
[STDOUT  ] 2017-05-16T12:25:44.978608232Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-16T12:25:45.045749511Z: + moby build kmod
[STDERR  ] 2017-05-16T12:25:45.054917338Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-16T12:25:50.984534523Z: Add init containers:
[STDERR  ] 2017-05-16T12:25:50.984625739Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-16T12:25:51.508256209Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-16T12:25:52.252524695Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-16T12:25:55.543425352Z: Add onboot containers:
[STDERR  ] 2017-05-16T12:25:55.543470542Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-16T12:25:56.050399585Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-16T12:25:56.541558272Z: Create outputs:
[STDERR  ] 2017-05-16T12:26:00.992206979Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-16T12:26:01.200061499Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-16T12:26:01.200087376Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-16T12:26:26.176112437Z: + clean_up
[STDERR  ] 2017-05-16T12:26:26.176153054Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-16T12:26:26.230456575Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-16T12:26:26.230497787Z: Deleted: sha256:deb94d07ec8b7d18e2965ee4cdae6517b90e2b56b3ff794b4901873a122c38ce
[STDOUT  ] 2017-05-16T12:26:26.230530308Z: Deleted: sha256:0580a68a46567af30b59252667c6ecb780c2f1d906eb9433617e621c9e2c77d7
[STDOUT  ] 2017-05-16T12:26:26.230549399Z: Deleted: sha256:8263e0950547e10914d5fc3d89c8f7d9adb0677e563f557634cd21c9fa4e8f67
[STDOUT  ] 2017-05-16T12:26:26.230567749Z: Deleted: sha256:32c466ddde0ba150a2f2873d4c5ebe34d04d20148e8c29af1bb7a5f573726563
[STDOUT  ] 2017-05-16T12:26:26.230590954Z: Deleted: sha256:5f46e8805aa3fbd2d6a067f60f0159241c8c5fb6deeae364467354ba9d15b065
[STDERR  ] 2017-05-16T12:26:26.233697112Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.config.kmod 46.43s
