[INFO    ] 2018-04-22T21:28:24.472270711Z: Running Test linuxkit.kernel.kmod_4.4.x in /tmp/with_clone1d8260b5/test/cases/020_kernel/010_kmod_4.4.x
[INFO    ] 2018-04-22T21:28:24.472438342Z: Running command: [/bin/sh -x /tmp/with_clone1d8260b5/test/cases/020_kernel/010_kmod_4.4.x/test.sh]
[STDERR  ] 2018-04-22T21:28:24.475073001Z: + set -e
[STDERR  ] 2018-04-22T21:28:24.475762497Z: + . /tmp/with_clone1d8260b5/test/cases/_lib/lib.sh
[STDERR  ] 2018-04-22T21:28:24.476503802Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2018-04-22T21:28:24.476769876Z: + LINUXKIT_TMPDIR=/tmp/with_clone1d8260b5/test/cases/_tmp
[STDERR  ] 2018-04-22T21:28:24.476939811Z: + [ -f /tmp/with_clone1d8260b5/test/cases/_tmp/env.sh ]
[STDERR  ] 2018-04-22T21:28:24.477197615Z: + . /tmp/with_clone1d8260b5/test/cases/_tmp/env.sh
[STDERR  ] 2018-04-22T21:28:24.477382422Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone1d8260b5/test/cases/../../examples
[STDERR  ] 2018-04-22T21:28:24.477501320Z: + RT_CANCEL=253
[STDERR  ] 2018-04-22T21:28:24.477747676Z: + NAME=kmod
[STDERR  ] 2018-04-22T21:28:24.477885904Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2018-04-22T21:28:24.478040971Z: + trap clean_up EXIT
[STDERR  ] 2018-04-22T21:28:24.478173899Z: + docker pull linuxkit/kernel:4.4.128
[STDOUT  ] 2018-04-22T21:28:25.887408145Z: 4.4.128: Pulling from linuxkit/kernel
[STDOUT  ] 2018-04-22T21:28:26.262262157Z: Digest: sha256:a956d0624568c203a003c89c52bd3dfabacf78604ce86ed9f05a5775a7b8f6bf
[STDOUT  ] 2018-04-22T21:28:26.262329661Z: Status: Image is up to date for linuxkit/kernel:4.4.128
[STDERR  ] 2018-04-22T21:28:26.283477452Z: + docker build -t kmod-test .
[STDOUT  ] 2018-04-22T21:28:26.318781036Z: Sending build context to Docker daemon 8.704 kB
[STDOUT  ] 2018-04-22T21:28:26.481823243Z: Step 1/12 : FROM linuxkit/kernel:4.4.128 AS ksrc
[STDOUT  ] 2018-04-22T21:28:26.545256906Z:  ---> 3e0b5a1b3f2c
[STDOUT  ] 2018-04-22T21:28:26.545304376Z: Step 2/12 : FROM linuxkit/alpine:f3cd219615428b2bd943411723eb28875275fae7 AS build
[STDOUT  ] 2018-04-22T21:28:26.545319332Z:  ---> 9577d6001cc2
[STDOUT  ] 2018-04-22T21:28:26.545332878Z: Step 3/12 : RUN apk add build-base libelf-dev
[STDOUT  ] 2018-04-22T21:28:26.545346556Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.545359966Z:  ---> f7c8f32c56cb
[STDOUT  ] 2018-04-22T21:28:26.545373179Z: Step 4/12 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2018-04-22T21:28:26.968413553Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.968472127Z:  ---> 81e9d29a029d
[STDOUT  ] 2018-04-22T21:28:26.968485348Z: Step 5/12 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2018-04-22T21:28:26.985936275Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.985964509Z:  ---> d4fd584bdd53
[STDOUT  ] 2018-04-22T21:28:26.985977707Z: Step 6/12 : WORKDIR /kmod
[STDOUT  ] 2018-04-22T21:28:26.985991084Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.986004101Z:  ---> 95d715a10c57
[STDOUT  ] 2018-04-22T21:28:26.986016782Z: Step 7/12 : COPY ./src/* ./
[STDOUT  ] 2018-04-22T21:28:26.986030173Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.986042978Z:  ---> 566240e95fee
[STDOUT  ] 2018-04-22T21:28:26.986055454Z: Step 8/12 : RUN make all
[STDOUT  ] 2018-04-22T21:28:26.986067754Z:  ---> Using cache
[STDOUT  ] 2018-04-22T21:28:26.986093823Z:  ---> b85ab351a4be
[STDOUT  ] 2018-04-22T21:28:26.986121533Z: Step 9/12 : FROM alpine:3.7
[STDOUT  ] 2018-04-22T21:28:26.986134493Z:  ---> 3fd9065eaf02
[STDOUT  ] 2018-04-22T21:28:26.986147020Z: Step 10/12 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2018-04-22T21:28:27.506982422Z:  ---> 5b1e8a036ff3
[STDOUT  ] 2018-04-22T21:28:27.524392081Z: Removing intermediate container 7c9829ae5183
[STDOUT  ] 2018-04-22T21:28:27.524425136Z: Step 11/12 : COPY check.sh /check.sh
[STDOUT  ] 2018-04-22T21:28:28.042643457Z:  ---> 45eb4e4fc895
[STDOUT  ] 2018-04-22T21:28:28.060132497Z: Removing intermediate container 9b575a2118a3
[STDOUT  ] 2018-04-22T21:28:28.060168270Z: Step 12/12 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2018-04-22T21:28:28.175425496Z:  ---> Running in fabde3bda4b6
[STDOUT  ] 2018-04-22T21:28:28.347537659Z:  ---> 995fa66002cd
[STDOUT  ] 2018-04-22T21:28:28.364851954Z: Removing intermediate container fabde3bda4b6
[STDOUT  ] 2018-04-22T21:28:28.364882328Z: Successfully built 995fa66002cd
[STDOUT  ] 2018-04-22T21:28:28.364895983Z: Successfully tagged kmod-test:latest
[STDERR  ] 2018-04-22T21:28:28.455773749Z: + linuxkit build -format kernel+initrd -name kmod test.yml
[STDERR  ] 2018-04-22T21:28:28.492682411Z: Extract kernel image: linuxkit/kernel:4.4.128
[STDERR  ] 2018-04-22T21:28:33.162027800Z: Add init containers:
[STDERR  ] 2018-04-22T21:28:33.162095761Z: Process init image: linuxkit/init:d0bf64f4cea42bea71e7d8f8832ba497bb822e89
[STDERR  ] 2018-04-22T21:28:35.098490794Z: Process init image: linuxkit/runc:acba8886e4b1318457c711700f695a02fef9493d
[STDERR  ] 2018-04-22T21:28:36.811800915Z: Add onboot containers:
[STDERR  ] 2018-04-22T21:28:36.811866162Z:   Create OCI config for kmod-test
[STDERR  ] 2018-04-22T21:28:36.848343249Z: Pull image: kmod-test
[STDERR  ] 2018-04-22T21:28:37.931464771Z: time="2018-04-22T21:28:37Z" level=fatal msg="Failed to create OCI spec for kmod-test: Error response from daemon: repository kmod-test not found: does not exist or no pull access"
[STDERR  ] 2018-04-22T21:28:37.987492757Z: + clean_up
[STDERR  ] 2018-04-22T21:28:37.987566738Z: + docker rmi kmod-test
[STDERR  ] 2018-04-22T21:28:38.058223130Z: Error response from daemon: No such image: kmod-test:latest
[STDERR  ] 2018-04-22T21:28:38.062293305Z: + true
[STDERR  ] 2018-04-22T21:28:38.062435665Z: + rm -rf kmod-*
[FAIL    ] linuxkit.kernel.kmod_4.4.x 13.59s
