[INFO    ] 2017-06-01T21:46:22.439328442Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone2effc69b/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-01T21:46:22.43939226Z: Running command: [/bin/sh -x /tmp/with_clone2effc69b/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-01T21:46:22.458225847Z: + set -e
[STDERR  ] 2017-06-01T21:46:22.458236613Z: + . /tmp/with_clone2effc69b/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-01T21:46:22.458240983Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-01T21:46:22.458247809Z: + LINUXKIT_TMPDIR=/tmp/with_clone2effc69b/test/cases/_tmp
[STDERR  ] 2017-06-01T21:46:22.458261621Z: + [ -f /tmp/with_clone2effc69b/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-01T21:46:22.458265489Z: + . /tmp/with_clone2effc69b/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-01T21:46:22.458278203Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone2effc69b/test/cases/../../examples
[STDERR  ] 2017-06-01T21:46:22.458285808Z: + RT_CANCEL=253
[STDERR  ] 2017-06-01T21:46:22.45828931Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-01T21:46:22.458301204Z: + trap clean_up EXIT
[STDERR  ] 2017-06-01T21:46:22.458308603Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-01T21:46:23.822716929Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-01T21:46:23.885267657Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-01T21:46:23.885285492Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:46:23.8884604Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-01T21:46:23.899641658Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-01T21:46:24.065032323Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-01T21:46:24.124984708Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-01T21:46:24.125037531Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-01T21:46:24.125064698Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-01T21:46:24.125075197Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-01T21:46:24.590661043Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:46:24.590707126Z:  ---> 60a84ce86bce
[STDOUT  ] 2017-06-01T21:46:24.590740907Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-01T21:46:24.608003929Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:46:24.608022741Z:  ---> dda20f4b7bd0
[STDOUT  ] 2017-06-01T21:46:24.608036924Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-01T21:46:24.608050396Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:46:24.608070024Z:  ---> 6554433ac9bc
[STDOUT  ] 2017-06-01T21:46:24.608084613Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-01T21:46:24.60809209Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:46:24.608096124Z:  ---> ec8593efcf4d
[STDOUT  ] 2017-06-01T21:46:24.608106965Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-01T21:46:24.608120975Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:46:24.608132621Z:  ---> 7a8a9087ffbb
[STDOUT  ] 2017-06-01T21:46:24.608136599Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-01T21:46:24.608144292Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-01T21:46:24.608167165Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-01T21:46:25.099173939Z:  ---> 69e201eb5e40
[STDOUT  ] 2017-06-01T21:46:25.116461797Z: Removing intermediate container de1f9c6f76e4
[STDOUT  ] 2017-06-01T21:46:25.116502729Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-01T21:46:25.610222489Z:  ---> a74e8083fd20
[STDOUT  ] 2017-06-01T21:46:25.627480975Z: Removing intermediate container 2bdc0e039f9f
[STDOUT  ] 2017-06-01T21:46:25.627503712Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-01T21:46:25.73512171Z:  ---> Running in 89fb03483703
[STDOUT  ] 2017-06-01T21:46:25.946522616Z:  ---> d9b428a81bfa
[STDOUT  ] 2017-06-01T21:46:25.963833674Z: Removing intermediate container 89fb03483703
[STDOUT  ] 2017-06-01T21:46:25.963876503Z: Successfully built d9b428a81bfa
[STDOUT  ] 2017-06-01T21:46:25.96388341Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-01T21:46:26.062515071Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-01T21:46:26.071661167Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:46:29.018889907Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:46:29.01894808Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:46:36.537538224Z: Add init containers:
[STDERR  ] 2017-06-01T21:46:36.53762223Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T21:46:36.537655896Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T21:46:39.734552383Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T21:46:39.734582543Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T21:46:43.180101056Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T21:46:43.180131746Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T21:46:50.980895841Z: Add onboot containers:
[STDERR  ] 2017-06-01T21:46:50.980917923Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-01T21:46:51.485109869Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T21:46:51.52316497Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T21:46:54.690286703Z: Create outputs:
[STDERR  ] 2017-06-01T21:47:00.504081619Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-01T21:47:00.767569329Z: + + grep -qlinuxkit Hello LinuxKit run qemu
[STDERR  ] 2017-06-01T21:47:00.767685406Z:  kmod
[STDERR  ] 2017-06-01T21:47:24.535024834Z: + clean_up
[STDERR  ] 2017-06-01T21:47:24.535065357Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-01T21:47:24.590544771Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-01T21:47:24.590620804Z: Deleted: sha256:d9b428a81bfadf61dabf6892d7bcbe59bcbc0f44a3dc2d9ee2b37dcfd410f6f1
[STDOUT  ] 2017-06-01T21:47:24.590637185Z: Deleted: sha256:a74e8083fd20437685f654f87b0e774e95075ec2a2335dcd8bd6e2442f780ce0
[STDOUT  ] 2017-06-01T21:47:24.590651784Z: Deleted: sha256:7161f4b2ff8266b5387c1ef0bf7b39eb5a984f1e2d3d652ef41a8d80375f0bef
[STDOUT  ] 2017-06-01T21:47:24.590675981Z: Deleted: sha256:69e201eb5e40dce34bd54ee5f94abe494924eca25ba570165efb57ea96856d0f
[STDOUT  ] 2017-06-01T21:47:24.590690549Z: Deleted: sha256:4f1c836a6d9a56a2bdb77fb8532b9fd941257636fce2c58cc9d4f3b7f6fdb2cf
[STDERR  ] 2017-06-01T21:47:24.592119981Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 62.17s
