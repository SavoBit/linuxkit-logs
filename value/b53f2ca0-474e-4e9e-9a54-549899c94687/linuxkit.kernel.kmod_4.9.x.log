[INFO    ] 2017-05-23T13:33:15.758657138Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone3985037/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-23T13:33:15.758734704Z: Running command: [/bin/sh -x /tmp/with_clone3985037/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-23T13:33:15.776306325Z: + set -e
[STDERR  ] 2017-05-23T13:33:15.776333029Z: + . /tmp/with_clone3985037/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-23T13:33:15.776341245Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-23T13:33:15.776350797Z: + LINUXKIT_TMPDIR=/tmp/with_clone3985037/test/cases/_tmp
[STDERR  ] 2017-05-23T13:33:15.776355008Z: + [ -f /tmp/with_clone3985037/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-23T13:33:15.776362254Z: + . /tmp/with_clone3985037/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-23T13:33:15.776375172Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone3985037/test/cases/../../examples
[STDERR  ] 2017-05-23T13:33:15.776379375Z: + RT_CANCEL=253
[STDERR  ] 2017-05-23T13:33:15.776394462Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-23T13:33:15.776407578Z: + trap clean_up EXIT
[STDERR  ] 2017-05-23T13:33:15.776422417Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-23T13:33:17.480431219Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-23T13:33:17.544343691Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-23T13:33:17.544364807Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T13:33:17.547586631Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-23T13:33:17.559183586Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-23T13:33:17.719940554Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-23T13:33:17.78441148Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-23T13:33:17.784428278Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-23T13:33:17.784441336Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-23T13:33:17.784455336Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-23T13:33:18.239163029Z:  ---> Using cache
[STDOUT  ] 2017-05-23T13:33:18.239175681Z:  ---> 0cfa3025a7d5
[STDOUT  ] 2017-05-23T13:33:18.239186947Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-23T13:33:18.255872363Z:  ---> Using cache
[STDOUT  ] 2017-05-23T13:33:18.255912682Z:  ---> b826ce78a5eb
[STDOUT  ] 2017-05-23T13:33:18.255919915Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-23T13:33:18.255943013Z:  ---> Using cache
[STDOUT  ] 2017-05-23T13:33:18.255955322Z:  ---> 3f1f74a8a50d
[STDOUT  ] 2017-05-23T13:33:18.255963729Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-23T13:33:18.255971919Z:  ---> Using cache
[STDOUT  ] 2017-05-23T13:33:18.255980303Z:  ---> acf1511849fc
[STDOUT  ] 2017-05-23T13:33:18.256001478Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-23T13:33:18.256006803Z:  ---> Using cache
[STDOUT  ] 2017-05-23T13:33:18.256019672Z:  ---> 73dd8d31fb60
[STDOUT  ] 2017-05-23T13:33:18.256027978Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-23T13:33:18.256036576Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-23T13:33:18.256045023Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-23T13:33:18.720943563Z:  ---> 2e2d17014b36
[STDOUT  ] 2017-05-23T13:33:18.73797827Z: Removing intermediate container 9421d321a3e9
[STDOUT  ] 2017-05-23T13:33:18.737988288Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-23T13:33:19.192984794Z:  ---> 6f8afa84c7b8
[STDOUT  ] 2017-05-23T13:33:19.20992455Z: Removing intermediate container 7e2a676e985d
[STDOUT  ] 2017-05-23T13:33:19.209933619Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-23T13:33:19.325335204Z:  ---> Running in efc70a97a850
[STDOUT  ] 2017-05-23T13:33:19.521524409Z:  ---> 535b150c0715
[STDOUT  ] 2017-05-23T13:33:19.538247837Z: Removing intermediate container efc70a97a850
[STDOUT  ] 2017-05-23T13:33:19.538262473Z: Successfully built 535b150c0715
[STDOUT  ] 2017-05-23T13:33:19.538270847Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-23T13:33:19.621129288Z: + moby build kmod
[STDERR  ] 2017-05-23T13:33:19.630495146Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T13:33:25.398834836Z: Add init containers:
[STDERR  ] 2017-05-23T13:33:25.398911805Z: Process init image: linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
[STDERR  ] 2017-05-23T13:33:25.768246305Z: Process init image: linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
[STDERR  ] 2017-05-23T13:33:26.62832434Z: Process init image: linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
[STDERR  ] 2017-05-23T13:33:32.508090335Z: Add onboot containers:
[STDERR  ] 2017-05-23T13:33:32.508132281Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-23T13:33:33.041989739Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-23T13:33:33.547326574Z: Create outputs:
[STDERR  ] 2017-05-23T13:33:39.485101877Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-23T13:33:39.679176237Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-23T13:33:39.682770654Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-23T13:34:04.447707668Z: + clean_up
[STDERR  ] 2017-05-23T13:34:04.447746276Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-23T13:34:04.500621884Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-23T13:34:04.50063726Z: Deleted: sha256:535b150c0715d41b553e83d5ab6a29cd8e6f26cdde01a11d5196dcf4f7a2fc3c
[STDOUT  ] 2017-05-23T13:34:04.50065359Z: Deleted: sha256:6f8afa84c7b8171d3dcfb917598126747281e67161247e558eaec32ba4494ad5
[STDOUT  ] 2017-05-23T13:34:04.500677133Z: Deleted: sha256:df75dde941c1ed86a12676cf86954f2b7e72d61809930df3226848a64e32e1bd
[STDOUT  ] 2017-05-23T13:34:04.500685025Z: Deleted: sha256:2e2d17014b3608d65d1d45f0f0d11768e919f92a0f0fb08f56e7ac8ba255c02d
[STDOUT  ] 2017-05-23T13:34:04.500699122Z: Deleted: sha256:7370442089a20445f62a0fc2cab19534ad1e1bff13c23d387b0371ed167732df
[STDERR  ] 2017-05-23T13:34:04.502324747Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 48.76s
