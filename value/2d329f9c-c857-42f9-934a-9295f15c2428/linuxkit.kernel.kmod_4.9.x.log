[INFO    ] 2017-05-23T00:16:15.582545201Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-23T00:16:15.58262081Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-23T00:16:15.6430185Z: + set -e
[STDERR  ] 2017-05-23T00:16:15.643060294Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-23T00:16:15.643125326Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-23T00:16:15.643158531Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-23T00:16:15.643239972Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-23T00:16:15.643271549Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-23T00:16:15.643322734Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-23T00:16:15.643348351Z: + RT_CANCEL=253
[STDERR  ] 2017-05-23T00:16:15.643372963Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-23T00:16:15.643408359Z: + trap clean_up EXIT
[STDERR  ] 2017-05-23T00:16:15.643428643Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-23T00:16:16.821756945Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-23T00:16:16.821964126Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-23T00:16:16.821995818Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T00:16:16.822730586Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-23T00:16:16.839965269Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-23T00:16:16.944682772Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-23T00:16:16.944786423Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-23T00:16:16.944826995Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-23T00:16:18.080514286Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-23T00:16:18.080572832Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-23T00:16:18.090850195Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-23T00:16:27.931429855Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-23T00:16:27.93286723Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-23T00:16:33.952737965Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-23T00:16:33.964034408Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-23T00:16:33.973670494Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-23T00:16:33.973971966Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-23T00:16:33.974056435Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-23T00:16:35.92508698Z:  ---> 0762314905ed
[STDOUT  ] 2017-05-23T00:16:35.939649345Z: Removing intermediate container b8682348c448
[STDOUT  ] 2017-05-23T00:16:35.939758425Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-23T00:16:36.006691833Z:  ---> Running in 2cd7d7965f01
[STDOUT  ] 2017-05-23T00:16:42.49111097Z:  ---> 00887f62b3df
[STDOUT  ] 2017-05-23T00:16:42.946471539Z: Removing intermediate container 2cd7d7965f01
[STDOUT  ] 2017-05-23T00:16:42.946595959Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-23T00:16:43.120290392Z:  ---> 78f14669bf4d
[STDOUT  ] 2017-05-23T00:16:43.127763907Z: Removing intermediate container 237bf9407813
[STDOUT  ] 2017-05-23T00:16:43.127982554Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-23T00:16:43.331386495Z:  ---> 219bec96a8ab
[STDOUT  ] 2017-05-23T00:16:43.336390577Z: Removing intermediate container 2ff98b372208
[STDOUT  ] 2017-05-23T00:16:43.336491279Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-23T00:16:43.401934907Z:  ---> Running in 53448e24eb9a
[STDOUT  ] 2017-05-23T00:16:43.557751985Z: make -C /usr/src/linux-headers-4.9.29-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-23T00:16:43.559000409Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-23T00:16:44.517350844Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-23T00:16:44.714632564Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-23T00:16:44.721877036Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-23T00:16:44.732664602Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-23T00:16:44.91078383Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-23T00:16:44.913484413Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-23T00:16:45.061067876Z:  ---> 3dac9f94102f
[STDOUT  ] 2017-05-23T00:16:45.067217752Z: Removing intermediate container 53448e24eb9a
[STDOUT  ] 2017-05-23T00:16:45.067360521Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-23T00:16:46.267863362Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-23T00:16:46.296142814Z: cfc728c1c558: Already exists
[STDOUT  ] 2017-05-23T00:16:47.136989573Z: Digest: sha256:c0537ff6a5218ef531ece93d4984efc99bbf3f7497c0a7726c88e2bb7584dc96
[STDOUT  ] 2017-05-23T00:16:47.202111389Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-23T00:16:47.202124799Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-23T00:16:47.202135695Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-23T00:16:48.780640191Z:  ---> e4c4604bbfa8
[STDOUT  ] 2017-05-23T00:16:49.014042139Z: Removing intermediate container d30c9f6fd3b9
[STDOUT  ] 2017-05-23T00:16:49.014198365Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-23T00:16:49.153235103Z:  ---> eb8dfe208f3a
[STDOUT  ] 2017-05-23T00:16:49.157805272Z: Removing intermediate container a19d8a8a97b1
[STDOUT  ] 2017-05-23T00:16:49.157911761Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-23T00:16:49.221010031Z:  ---> Running in a85f156c8ad7
[STDOUT  ] 2017-05-23T00:16:49.265145632Z:  ---> d4ac0dfbd79f
[STDOUT  ] 2017-05-23T00:16:49.270046875Z: Removing intermediate container a85f156c8ad7
[STDOUT  ] 2017-05-23T00:16:49.270134971Z: Successfully built d4ac0dfbd79f
[STDOUT  ] 2017-05-23T00:16:49.273872353Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-23T00:16:49.284050715Z: + moby build kmod
[STDERR  ] 2017-05-23T00:16:49.293101081Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T00:16:49.741903325Z: Add init containers:
[STDERR  ] 2017-05-23T00:16:49.7420026Z: Process init image: linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
[STDERR  ] 2017-05-23T00:16:49.860178954Z: Process init image: linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
[STDERR  ] 2017-05-23T00:16:49.975361899Z: Process init image: linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
[STDERR  ] 2017-05-23T00:16:50.432691188Z: Add onboot containers:
[STDERR  ] 2017-05-23T00:16:50.432737221Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-23T00:16:50.550073813Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-23T00:16:50.671391278Z: Create outputs:
[STDERR  ] 2017-05-23T00:16:56.308134765Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-23T00:16:56.353097674Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-23T00:16:56.354038204Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-23T00:16:56.359878284Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-23T00:17:12.849170747Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-23T00:17:12.850753745Z: time="2017-05-23T00:17:12Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-23T00:17:12.850784321Z: + clean_up
[STDERR  ] 2017-05-23T00:17:12.850803516Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-23T00:17:12.882730825Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-23T00:17:12.882739323Z: Deleted: sha256:d4ac0dfbd79f79b9729d9f490f2f096bdefe26555f580b87b21717f93f6fe292
[STDOUT  ] 2017-05-23T00:17:12.88276116Z: Deleted: sha256:eb8dfe208f3a09b0916ac265680a3512bb72c6991cd21179d458568b50537b11
[STDOUT  ] 2017-05-23T00:17:12.882767807Z: Deleted: sha256:27ffcf0fdebb22b5400f8841eb5949feec68664a569deab8f22045aeb1ba2f7c
[STDOUT  ] 2017-05-23T00:17:12.882777372Z: Deleted: sha256:e4c4604bbfa8c9ef6a4b895b04ea35c7fa3d4c58ce2f9f157c2f896b4aeedfa7
[STDOUT  ] 2017-05-23T00:17:12.882793867Z: Deleted: sha256:294af4fe07ecb70da6109a59b846b84ba765ed6834f2911a171a0508107f88b3
[STDERR  ] 2017-05-23T00:17:12.883463176Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 57.32s
