[INFO    ] 2017-06-02T08:30:26.131033282Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-02T08:30:26.131105232Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-02T08:30:26.147062106Z: + set -e
[STDERR  ] 2017-06-02T08:30:26.147182484Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-02T08:30:26.147246869Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-02T08:30:26.147316355Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-02T08:30:26.147348188Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-02T08:30:26.147374237Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-02T08:30:26.147415625Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-02T08:30:26.14743987Z: + RT_CANCEL=253
[STDERR  ] 2017-06-02T08:30:26.147458136Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-02T08:30:26.147491595Z: + trap clean_up EXIT
[STDERR  ] 2017-06-02T08:30:26.147518698Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-02T08:30:27.29800552Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-02T08:30:27.298123597Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-02T08:30:27.298159194Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T08:30:27.299003088Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-02T08:30:27.326425784Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-02T08:30:27.352311162Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-02T08:30:27.367019843Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-02T08:30:27.367194573Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-02T08:30:28.511643589Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-02T08:30:28.523400934Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-02T08:30:28.557667859Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-02T08:30:31.595412952Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-02T08:30:31.597002632Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-02T08:30:37.981690815Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-02T08:30:38.00159322Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-02T08:30:38.005257468Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-02T08:30:38.005661056Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-02T08:30:38.005763552Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-02T08:30:40.151115302Z:  ---> 04ea830bfe16
[STDOUT  ] 2017-06-02T08:30:40.646711669Z: Removing intermediate container 7b573ad8f2f6
[STDOUT  ] 2017-06-02T08:30:40.646842721Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-02T08:30:40.718365322Z:  ---> Running in 07b9e9fc26fc
[STDOUT  ] 2017-06-02T08:30:46.817637346Z:  ---> 7fd522907885
[STDOUT  ] 2017-06-02T08:30:47.202417002Z: Removing intermediate container 07b9e9fc26fc
[STDOUT  ] 2017-06-02T08:30:47.202536302Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-02T08:30:47.484059212Z:  ---> e9c05b7671be
[STDOUT  ] 2017-06-02T08:30:47.499406129Z: Removing intermediate container 1826635f7812
[STDOUT  ] 2017-06-02T08:30:47.499555505Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-02T08:30:47.742732278Z:  ---> 78c6996be2f5
[STDOUT  ] 2017-06-02T08:30:47.758244402Z: Removing intermediate container cf0e8e5e37eb
[STDOUT  ] 2017-06-02T08:30:47.758350368Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-02T08:30:47.844974767Z:  ---> Running in 0f095b3e82d2
[STDOUT  ] 2017-06-02T08:30:48.02682348Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-02T08:30:48.028088797Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-02T08:30:49.113448279Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-02T08:30:49.311242111Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-02T08:30:49.318450222Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-02T08:30:49.329177964Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-02T08:30:49.507043923Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-02T08:30:49.50952707Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-02T08:30:49.797623333Z:  ---> 5d1bbc0745c2
[STDOUT  ] 2017-06-02T08:30:49.817878527Z: Removing intermediate container 0f095b3e82d2
[STDOUT  ] 2017-06-02T08:30:49.818036412Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-02T08:30:50.97492019Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-02T08:30:50.975729992Z: 6f821164d5b7: Pulling fs layer
[STDOUT  ] 2017-06-02T08:30:51.657470021Z: 6f821164d5b7: Verifying Checksum
[STDOUT  ] 2017-06-02T08:30:51.659232692Z: 6f821164d5b7: Download complete
[STDOUT  ] 2017-06-02T08:30:51.872015214Z: 6f821164d5b7: Pull complete
[STDOUT  ] 2017-06-02T08:30:51.90104432Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-02T08:30:51.910711722Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-02T08:30:51.9110745Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-02T08:30:51.911189011Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-02T08:30:52.244903924Z:  ---> 41ca3ac669e1
[STDOUT  ] 2017-06-02T08:30:52.29008647Z: Removing intermediate container d810b71f824d
[STDOUT  ] 2017-06-02T08:30:52.290226937Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-02T08:30:52.675551945Z:  ---> 73cad8a48e79
[STDOUT  ] 2017-06-02T08:30:52.721690523Z: Removing intermediate container bc3410849b5a
[STDOUT  ] 2017-06-02T08:30:52.721842566Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-02T08:30:52.912255831Z:  ---> Running in 5a90171f62c8
[STDOUT  ] 2017-06-02T08:30:53.129437518Z:  ---> 6654e445de67
[STDOUT  ] 2017-06-02T08:30:53.182645182Z: Removing intermediate container 5a90171f62c8
[STDOUT  ] 2017-06-02T08:30:53.182767058Z: Successfully built 6654e445de67
[STDOUT  ] 2017-06-02T08:30:53.20943307Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-02T08:30:53.246103612Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-02T08:30:53.255935544Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T08:30:56.205806312Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T08:30:56.205848364Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T08:31:00.127307458Z: Add init containers:
[STDERR  ] 2017-06-02T08:31:00.127354048Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-02T08:31:00.127380366Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-02T08:31:03.197908248Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-02T08:31:03.197996589Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-02T08:31:06.799279507Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-06-02T08:31:06.799382483Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-06-02T08:31:10.549924135Z: Add onboot containers:
[STDERR  ] 2017-06-02T08:31:10.549988857Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-02T08:31:10.698230473Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-02T08:31:10.700677925Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-02T08:31:13.618213496Z: Create outputs:
[STDERR  ] 2017-06-02T08:31:19.515381501Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-02T08:31:19.574056078Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-02T08:31:19.575056748Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-02T08:31:19.592087434Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-02T08:31:35.98700217Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-02T08:31:35.989873977Z: time="2017-06-02T08:31:35Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-02T08:31:35.989913864Z: + clean_up
[STDERR  ] 2017-06-02T08:31:35.989926004Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-02T08:31:36.055783161Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-02T08:31:36.055796892Z: Deleted: sha256:6654e445de6738fd8a7a5eef753651bf6220a782589eecb4bcc10269754d951c
[STDOUT  ] 2017-06-02T08:31:36.055803496Z: Deleted: sha256:73cad8a48e796c1112f6fa861a1eec7312617f758431f67e87dda1704d6ed2ca
[STDOUT  ] 2017-06-02T08:31:36.055822278Z: Deleted: sha256:7908e3a9a07906593018e1654326d4d47ef205032658d356af722a811aa54b70
[STDOUT  ] 2017-06-02T08:31:36.055825371Z: Deleted: sha256:41ca3ac669e15f9305c009831cb929b4e7249f56ec4a4234ff960afd26d86aa2
[STDOUT  ] 2017-06-02T08:31:36.05583374Z: Deleted: sha256:404d59f03d13b58777efd54ea2c2a551da6c4ff890932e42e48fde792abf7ef0
[STDERR  ] 2017-06-02T08:31:36.056570159Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 69.95s
