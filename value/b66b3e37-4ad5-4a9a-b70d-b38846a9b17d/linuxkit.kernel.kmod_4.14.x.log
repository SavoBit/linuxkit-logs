[INFO    ] 2017-12-06T10:41:18.223048773Z: Running Test linuxkit.kernel.kmod_4.14.x in /tmp/with_clone377f368b/test/cases/020_kernel/016_kmod_4.14.x
[INFO    ] 2017-12-06T10:41:18.223171596Z: Running command: [/bin/sh -x /tmp/with_clone377f368b/test/cases/020_kernel/016_kmod_4.14.x/test.sh]
[STDERR  ] 2017-12-06T10:41:18.22668197Z: + set -e
[STDERR  ] 2017-12-06T10:41:18.226834536Z: + . /tmp/with_clone377f368b/test/cases/_lib/lib.sh
[STDERR  ] 2017-12-06T10:41:18.227032447Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-12-06T10:41:18.227332014Z: + LINUXKIT_TMPDIR=/tmp/with_clone377f368b/test/cases/_tmp
[STDERR  ] 2017-12-06T10:41:18.227441719Z: + [ -f /tmp/with_clone377f368b/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-12-06T10:41:18.227584365Z: + . /tmp/with_clone377f368b/test/cases/_tmp/env.sh
[STDERR  ] 2017-12-06T10:41:18.227700158Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone377f368b/test/cases/../../examples
[STDERR  ] 2017-12-06T10:41:18.227777855Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/with_clone377f368b/test/cases/../../blueprints
[STDERR  ] 2017-12-06T10:41:18.227862512Z: + RT_CANCEL=253
[STDERR  ] 2017-12-06T10:41:18.227922691Z: + NAME=kmod
[STDERR  ] 2017-12-06T10:41:18.22819537Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-12-06T10:41:18.228290034Z: + trap clean_up EXIT
[STDERR  ] 2017-12-06T10:41:18.228401176Z: + docker pull linuxkit/kernel:4.9.66
[STDOUT  ] 2017-12-06T10:41:19.636263852Z: 4.9.66: Pulling from linuxkit/kernel
[STDOUT  ] 2017-12-06T10:41:20.010732685Z: Digest: sha256:cb31367e4e4b2d717e13df27a3c4dea155b52e2cf81eb1c1d4ebc845eebc0be4
[STDOUT  ] 2017-12-06T10:41:20.010802178Z: Status: Image is up to date for linuxkit/kernel:4.9.66
[STDERR  ] 2017-12-06T10:41:20.030535401Z: + docker build -t kmod-test .
[STDOUT  ] 2017-12-06T10:41:20.048199651Z: Sending build context to Docker daemon 8.704 kB
[STDOUT  ] 2017-12-06T10:41:20.230369812Z: Step 1/12 : FROM linuxkit/kernel:4.14.3 AS ksrc
[STDOUT  ] 2017-12-06T10:41:20.293630695Z:  ---> 6b8e682deb50
[STDOUT  ] 2017-12-06T10:41:20.293691982Z: Step 2/12 : FROM linuxkit/alpine:07f7d136e427dc68154cd5edbb2b9576f9ac5213 AS build
[STDOUT  ] 2017-12-06T10:41:20.293707653Z:  ---> 039fd8c1530e
[STDOUT  ] 2017-12-06T10:41:20.293720824Z: Step 3/12 : RUN apk add build-base libelf-dev
[STDOUT  ] 2017-12-06T10:41:20.293734011Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.293763011Z:  ---> 8705297b028c
[STDOUT  ] 2017-12-06T10:41:20.293776216Z: Step 4/12 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-12-06T10:41:20.814246677Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.814313338Z:  ---> 4284f6ad8425
[STDOUT  ] 2017-12-06T10:41:20.814327356Z: Step 5/12 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-12-06T10:41:20.830200047Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.830233842Z:  ---> 661e98aff996
[STDOUT  ] 2017-12-06T10:41:20.830255399Z: Step 6/12 : WORKDIR /kmod
[STDOUT  ] 2017-12-06T10:41:20.830269635Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.830282239Z:  ---> a357fb43c8b4
[STDOUT  ] 2017-12-06T10:41:20.830294933Z: Step 7/12 : COPY ./src/* ./
[STDOUT  ] 2017-12-06T10:41:20.830308746Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.830321065Z:  ---> e4158488d6ce
[STDOUT  ] 2017-12-06T10:41:20.830334184Z: Step 8/12 : RUN make all
[STDOUT  ] 2017-12-06T10:41:20.830347032Z:  ---> Using cache
[STDOUT  ] 2017-12-06T10:41:20.830360295Z:  ---> c352349bd5fd
[STDOUT  ] 2017-12-06T10:41:20.830373095Z: Step 9/12 : FROM alpine:3.5
[STDOUT  ] 2017-12-06T10:41:20.830386301Z:  ---> 3823b001394d
[STDOUT  ] 2017-12-06T10:41:20.830399498Z: Step 10/12 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-12-06T10:41:21.399840951Z:  ---> e09ab22bee2e
[STDOUT  ] 2017-12-06T10:41:21.415702845Z: Removing intermediate container f18961a0b4b6
[STDOUT  ] 2017-12-06T10:41:21.415737181Z: Step 11/12 : COPY check.sh /check.sh
[STDOUT  ] 2017-12-06T10:41:22.015563491Z:  ---> f8d1c6dcb3b7
[STDOUT  ] 2017-12-06T10:41:22.031555017Z: Removing intermediate container ae7206dac8a3
[STDOUT  ] 2017-12-06T10:41:22.031616262Z: Step 12/12 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-12-06T10:41:22.180495799Z:  ---> Running in ce1d8ae494fa
[STDOUT  ] 2017-12-06T10:41:22.415998929Z:  ---> d9fc4a7d17e1
[STDOUT  ] 2017-12-06T10:41:22.431798958Z: Removing intermediate container ce1d8ae494fa
[STDOUT  ] 2017-12-06T10:41:22.431822993Z: Successfully built d9fc4a7d17e1
[STDOUT  ] 2017-12-06T10:41:22.447636148Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-12-06T10:41:22.564225473Z: + linuxkit build -format kernel+initrd -name kmod test.yml
[STDERR  ] 2017-12-06T10:41:22.590957447Z: Extract kernel image: linuxkit/kernel:4.14.3
[STDERR  ] 2017-12-06T10:41:23.687373757Z: time="2017-12-06T10:41:23Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:23.687504279Z: time="2017-12-06T10:41:23Z" level=warning msg="certificate with CN  is near expiry" 
[STDERR  ] 2017-12-06T10:41:23.724420745Z: time="2017-12-06T10:41:23Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:32.767020225Z: Add init containers:
[STDERR  ] 2017-12-06T10:41:32.767087114Z: Process init image: linuxkit/init:19ab525233763e1740cd3b9d60cd17141d316776
[STDERR  ] 2017-12-06T10:41:33.74484751Z: time="2017-12-06T10:41:33Z" level=warning msg="certificate with CN  is near expiry" 
[STDERR  ] 2017-12-06T10:41:33.74528133Z: time="2017-12-06T10:41:33Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:33.75017496Z: time="2017-12-06T10:41:33Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:33.751687184Z: time="2017-12-06T10:41:33Z" level=warning msg="certificate with CN  is near expiry" 
[STDERR  ] 2017-12-06T10:41:36.040675027Z: Process init image: linuxkit/runc:1b0741d07949c0acc444cd6a04ee7f833443579d
[STDERR  ] 2017-12-06T10:41:37.068838811Z: time="2017-12-06T10:41:37Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:37.06906083Z: time="2017-12-06T10:41:37Z" level=warning msg="certificate with CN  is near expiry" 
[STDERR  ] 2017-12-06T10:41:37.07094465Z: time="2017-12-06T10:41:37Z" level=warning msg="certificate with CN Justin Cormack is near expiry" 
[STDERR  ] 2017-12-06T10:41:37.072383971Z: time="2017-12-06T10:41:37Z" level=warning msg="certificate with CN  is near expiry" 
[STDERR  ] 2017-12-06T10:41:38.137885379Z: Add onboot containers:
[STDERR  ] 2017-12-06T10:41:38.137967474Z:   Create OCI config for kmod-test
[STDERR  ] 2017-12-06T10:41:38.259995299Z: Pull image: kmod-test
[STDERR  ] 2017-12-06T10:41:39.367275005Z: time="2017-12-06T10:41:39Z" level=fatal msg="Failed to create OCI spec for kmod-test: Error response from daemon: repository kmod-test not found: does not exist or no pull access" 
[STDERR  ] 2017-12-06T10:41:39.549318375Z: + clean_up
[STDERR  ] 2017-12-06T10:41:39.54937957Z: + docker rmi kmod-test
[STDERR  ] 2017-12-06T10:41:39.599978648Z: Error response from daemon: No such image: kmod-test:latest
[STDERR  ] 2017-12-06T10:41:39.601927861Z: + true
[STDERR  ] 2017-12-06T10:41:39.601956595Z: + rm -rf kmod-*
[FAIL    ] linuxkit.kernel.kmod_4.14.x 21.38s
