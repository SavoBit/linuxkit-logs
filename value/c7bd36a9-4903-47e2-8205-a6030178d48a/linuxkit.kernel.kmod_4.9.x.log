[INFO    ] 2017-06-02T10:40:28.979332423Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone2d822bda/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-02T10:40:28.979439368Z: Running command: [/bin/sh -x /tmp/with_clone2d822bda/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-02T10:40:28.980567478Z: + set -e
[STDERR  ] 2017-06-02T10:40:28.980609978Z: + . /tmp/with_clone2d822bda/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-02T10:40:28.980710592Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-02T10:40:28.98076024Z: + LINUXKIT_TMPDIR=/tmp/with_clone2d822bda/test/cases/_tmp
[STDERR  ] 2017-06-02T10:40:28.980809993Z: + [ -f /tmp/with_clone2d822bda/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-02T10:40:28.980874052Z: + . /tmp/with_clone2d822bda/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-02T10:40:28.980928091Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone2d822bda/test/cases/../../examples
[STDERR  ] 2017-06-02T10:40:28.980958441Z: + RT_CANCEL=253
[STDERR  ] 2017-06-02T10:40:28.980979405Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-02T10:40:28.981036183Z: + trap clean_up EXIT
[STDERR  ] 2017-06-02T10:40:28.981070738Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-02T10:40:30.420014968Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-02T10:40:30.48366238Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-02T10:40:30.483705841Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T10:40:30.487052969Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-02T10:40:30.498831083Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-02T10:40:30.657219265Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-02T10:40:30.713840117Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-02T10:40:30.713870731Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-02T10:40:30.7138847Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-02T10:40:30.713891704Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-02T10:40:31.217034953Z:  ---> Using cache
[STDOUT  ] 2017-06-02T10:40:31.217043945Z:  ---> 60a84ce86bce
[STDOUT  ] 2017-06-02T10:40:31.233050201Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-02T10:40:31.233102424Z:  ---> Using cache
[STDOUT  ] 2017-06-02T10:40:31.233150419Z:  ---> dda20f4b7bd0
[STDOUT  ] 2017-06-02T10:40:31.233191099Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-02T10:40:31.233238804Z:  ---> Using cache
[STDOUT  ] 2017-06-02T10:40:31.233287429Z:  ---> 6554433ac9bc
[STDOUT  ] 2017-06-02T10:40:31.233312625Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-02T10:40:31.233388118Z:  ---> Using cache
[STDOUT  ] 2017-06-02T10:40:31.233414654Z:  ---> ec8593efcf4d
[STDOUT  ] 2017-06-02T10:40:31.23344609Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-02T10:40:31.233487214Z:  ---> Using cache
[STDOUT  ] 2017-06-02T10:40:31.233554994Z:  ---> 7a8a9087ffbb
[STDOUT  ] 2017-06-02T10:40:31.233587937Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-02T10:40:31.233621907Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-02T10:40:31.233653808Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-02T10:40:31.737868468Z:  ---> bf7d63fcb356
[STDOUT  ] 2017-06-02T10:40:31.753668345Z: Removing intermediate container fc16328a530d
[STDOUT  ] 2017-06-02T10:40:31.753692515Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-02T10:40:32.225671234Z:  ---> 075c5780d98f
[STDOUT  ] 2017-06-02T10:40:32.241474063Z: Removing intermediate container ff32670660b2
[STDOUT  ] 2017-06-02T10:40:32.241524481Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-02T10:40:32.359234715Z:  ---> Running in ce736496677e
[STDOUT  ] 2017-06-02T10:40:32.538488227Z:  ---> 4a3bd3b7c9bb
[STDOUT  ] 2017-06-02T10:40:32.554741075Z: Removing intermediate container ce736496677e
[STDOUT  ] 2017-06-02T10:40:32.554767375Z: Successfully built 4a3bd3b7c9bb
[STDOUT  ] 2017-06-02T10:40:32.554781763Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-02T10:40:32.646312473Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-02T10:40:32.655711262Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T10:40:35.615744133Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T10:40:35.615772148Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-02T10:40:51.469905442Z: Add init containers:
[STDERR  ] 2017-06-02T10:40:51.469988576Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-02T10:40:51.470016425Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-02T10:40:54.645397517Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-02T10:40:54.645420863Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-02T10:40:58.362474841Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-02T10:40:58.362501561Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-02T10:41:05.866379421Z: Add onboot containers:
[STDERR  ] 2017-06-02T10:41:05.866402682Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-02T10:41:06.391151082Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-02T10:41:06.428300996Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-02T10:41:09.773484629Z: Create outputs:
[STDERR  ] 2017-06-02T10:41:15.776527394Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-02T10:41:16.037805758Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-02T10:41:16.037967789Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-02T10:41:39.901428692Z: + clean_up
[STDERR  ] 2017-06-02T10:41:39.901480103Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-02T10:41:39.952545563Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-02T10:41:39.952570298Z: Deleted: sha256:4a3bd3b7c9bb624c36fe717fe840905c971fc84a223623539c70f0bb35d7c565
[STDOUT  ] 2017-06-02T10:41:39.952578515Z: Deleted: sha256:075c5780d98f112ea14af4e59cbe8de1c3d7ac0549dc9c0049cc9ff8936f1b0d
[STDOUT  ] 2017-06-02T10:41:39.952599211Z: Deleted: sha256:507615c5434729458cc430f5c4315cd96c8694f96a5732bbc67144b801cc6d77
[STDOUT  ] 2017-06-02T10:41:39.952612451Z: Deleted: sha256:bf7d63fcb3563b68238e0d9f361aceb633da9bcb5328456a3d2313e3bb4963b3
[STDOUT  ] 2017-06-02T10:41:39.952626728Z: Deleted: sha256:4f1c836a6d9a56a2bdb77fb8532b9fd941257636fce2c58cc9d4f3b7f6fdb2cf
[STDERR  ] 2017-06-02T10:41:39.955792318Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 71.00s
