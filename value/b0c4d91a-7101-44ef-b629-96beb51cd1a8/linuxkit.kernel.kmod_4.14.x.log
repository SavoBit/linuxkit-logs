[INFO    ] 2017-12-11T09:23:33.711635013Z: Running Test linuxkit.kernel.kmod_4.14.x in /tmp/with_clone3430f254/test/cases/020_kernel/016_kmod_4.14.x
[INFO    ] 2017-12-11T09:23:33.711750703Z: Running command: [/bin/sh -x /tmp/with_clone3430f254/test/cases/020_kernel/016_kmod_4.14.x/test.sh]
[STDERR  ] 2017-12-11T09:23:33.712231335Z: + set -e
[STDERR  ] 2017-12-11T09:23:33.712279817Z: + . /tmp/with_clone3430f254/test/cases/_lib/lib.sh
[STDERR  ] 2017-12-11T09:23:33.712293182Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-12-11T09:23:33.712307322Z: + LINUXKIT_TMPDIR=/tmp/with_clone3430f254/test/cases/_tmp
[STDERR  ] 2017-12-11T09:23:33.712325679Z: + [ -f /tmp/with_clone3430f254/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-12-11T09:23:33.712358147Z: + . /tmp/with_clone3430f254/test/cases/_tmp/env.sh
[STDERR  ] 2017-12-11T09:23:33.712372904Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone3430f254/test/cases/../../examples
[STDERR  ] 2017-12-11T09:23:33.712388102Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/with_clone3430f254/test/cases/../../blueprints
[STDERR  ] 2017-12-11T09:23:33.712402757Z: + RT_CANCEL=253
[STDERR  ] 2017-12-11T09:23:33.712415308Z: + NAME=kmod
[STDERR  ] 2017-12-11T09:23:33.712428374Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-12-11T09:23:33.712441076Z: + trap clean_up EXIT
[STDERR  ] 2017-12-11T09:23:33.712454607Z: + docker pull linuxkit/kernel:4.9.67
[STDOUT  ] 2017-12-11T09:23:35.134276353Z: 4.9.67: Pulling from linuxkit/kernel
[STDOUT  ] 2017-12-11T09:23:35.528056531Z: Digest: sha256:caa4be72ad42f9c974a84cd05757daa7cad9639e753cbf517c7b3bc5c2c18edb
[STDOUT  ] 2017-12-11T09:23:35.528113467Z: Status: Image is up to date for linuxkit/kernel:4.9.67
[STDERR  ] 2017-12-11T09:23:35.548352363Z: + docker build -t kmod-test .
[STDOUT  ] 2017-12-11T09:23:35.560381476Z: Sending build context to Docker daemon 8.704 kB
[STDOUT  ] 2017-12-11T09:23:35.750809052Z: Step 1/12 : FROM linuxkit/kernel:4.14.4 AS ksrc
[STDOUT  ] 2017-12-11T09:23:35.814731761Z:  ---> 470d2d057f26
[STDOUT  ] 2017-12-11T09:23:35.814793585Z: Step 2/12 : FROM linuxkit/alpine:d307c8a386fa3f32cddda9409b9687e191cdd6f1 AS build
[STDOUT  ] 2017-12-11T09:23:35.81481936Z:  ---> 4d01d9a77113
[STDOUT  ] 2017-12-11T09:23:35.814828972Z: Step 3/12 : RUN apk add build-base libelf-dev
[STDOUT  ] 2017-12-11T09:23:35.814836802Z:  ---> Using cache
[STDOUT  ] 2017-12-11T09:23:35.814843721Z:  ---> 983f7ce6ad41
[STDOUT  ] 2017-12-11T09:23:35.814850793Z: Step 4/12 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-12-11T09:23:37.728253388Z:  ---> 68ba1cb73e4a
[STDOUT  ] 2017-12-11T09:23:37.753399382Z: Removing intermediate container 0ca22cc93d4f
[STDOUT  ] 2017-12-11T09:23:37.77041207Z: Step 5/12 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-12-11T09:23:37.917743121Z:  ---> Running in 877375bce943
[STDOUT  ] 2017-12-11T09:23:45.241812944Z:  ---> 80c656e64eda
[STDOUT  ] 2017-12-11T09:23:45.753998805Z: Removing intermediate container 877375bce943
[STDOUT  ] 2017-12-11T09:23:45.754037589Z: Step 6/12 : WORKDIR /kmod
[STDOUT  ] 2017-12-11T09:23:46.248859727Z:  ---> c0fb06e21817
[STDOUT  ] 2017-12-11T09:23:46.265849072Z: Removing intermediate container c163ac9db136
[STDOUT  ] 2017-12-11T09:23:46.265889266Z: Step 7/12 : COPY ./src/* ./
[STDOUT  ] 2017-12-11T09:23:47.113082527Z:  ---> 10234697640d
[STDOUT  ] 2017-12-11T09:23:47.130053793Z: Removing intermediate container f42e49f8d623
[STDOUT  ] 2017-12-11T09:23:47.130084198Z: Step 8/12 : RUN make all
[STDOUT  ] 2017-12-11T09:23:47.304535219Z:  ---> Running in 9126abb2fa59
[STDOUT  ] 2017-12-11T09:23:47.858475604Z: make -C /usr/src/linux-headers-4.14.4-linuxkit M=/kmod modules
[STDOUT  ] 2017-12-11T09:23:47.875518483Z: make[1]: Entering directory '/usr/src/linux-headers-4.14.4-linuxkit'
[STDOUT  ] 2017-12-11T09:23:47.875569792Z: [91mgetconf: LFS_CFLAGS: unknown variable
[STDOUT  ] 2017-12-11T09:23:47.87557851Z: [0m[91mgetconf: LFS_LDFLAGS: unknown variable
[STDOUT  ] 2017-12-11T09:23:47.875594657Z: [0m[91mgetconf: LFS_LIBS: unknown variable
[STDOUT  ] 2017-12-11T09:23:49.288234686Z: [0m  CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-12-11T09:23:49.305201935Z: [91mcc1: error: incompatible gcc/plugin versions
[STDOUT  ] 2017-12-11T09:23:49.305243367Z: cc1: error: fail to initialize plugin ./scripts/gcc-plugins/structleak_plugin.so
[STDOUT  ] 2017-12-11T09:23:49.305257294Z: cc1: error: incompatible gcc/plugin versions
[STDOUT  ] 2017-12-11T09:23:49.305269492Z: cc1: error: fail to initialize plugin ./scripts/gcc-plugins/randomize_layout_plugin.so
[STDOUT  ] 2017-12-11T09:23:49.305277571Z: [0m[91mmake[2]: *** [scripts/Makefile.build:321: /kmod/hello_world.o] Error 1
[STDOUT  ] 2017-12-11T09:23:49.30529979Z: [0m[91mmake[1]: *** [Makefile:1503: _module_/kmod] Error 2
[STDOUT  ] 2017-12-11T09:23:49.305310162Z: [0mmake[1]: Leaving directory '/usr/src/linux-headers-4.14.4-linuxkit'
[STDOUT  ] 2017-12-11T09:23:49.305317936Z: [91mmake: *** [Makefile:4: all] Error 2
[STDERR  ] 2017-12-11T09:23:49.808945874Z: The command '/bin/sh -c make all' returned a non-zero code: 2
[STDERR  ] 2017-12-11T09:23:49.812082835Z: + clean_up
[STDERR  ] 2017-12-11T09:23:49.812112847Z: + docker rmi kmod-test
[STDERR  ] 2017-12-11T09:23:49.865641535Z: Error response from daemon: No such image: kmod-test:latest
[STDERR  ] 2017-12-11T09:23:49.867873615Z: + true
[STDERR  ] 2017-12-11T09:23:49.8679114Z: + rm -rf kmod-*
[STDOUT  ] 2017-12-11T09:23:49.868517969Z: [0m
[FAIL    ] linuxkit.kernel.kmod_4.14.x 16.16s
