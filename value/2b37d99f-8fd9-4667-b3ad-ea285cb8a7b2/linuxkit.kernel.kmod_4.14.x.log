[INFO    ] 2017-12-08T19:49:20.878085156Z: Running Test linuxkit.kernel.kmod_4.14.x in /tmp/with_clone25c559b0/test/cases/020_kernel/016_kmod_4.14.x
[INFO    ] 2017-12-08T19:49:20.878203576Z: Running command: [/bin/sh -x /tmp/with_clone25c559b0/test/cases/020_kernel/016_kmod_4.14.x/test.sh]
[STDERR  ] 2017-12-08T19:49:20.878701997Z: + set -e
[STDERR  ] 2017-12-08T19:49:20.878779887Z: + . /tmp/with_clone25c559b0/test/cases/_lib/lib.sh
[STDERR  ] 2017-12-08T19:49:20.878867796Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-12-08T19:49:20.878897847Z: + LINUXKIT_TMPDIR=/tmp/with_clone25c559b0/test/cases/_tmp
[STDERR  ] 2017-12-08T19:49:20.878918079Z: + [ -f /tmp/with_clone25c559b0/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-12-08T19:49:20.878934377Z: + . /tmp/with_clone25c559b0/test/cases/_tmp/env.sh
[STDERR  ] 2017-12-08T19:49:20.878972716Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone25c559b0/test/cases/../../examples
[STDERR  ] 2017-12-08T19:49:20.879003787Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/with_clone25c559b0/test/cases/../../blueprints
[STDERR  ] 2017-12-08T19:49:20.879018206Z: + RT_CANCEL=253
[STDERR  ] 2017-12-08T19:49:20.879030997Z: + NAME=kmod
[STDERR  ] 2017-12-08T19:49:20.879045271Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-12-08T19:49:20.879058011Z: + trap clean_up EXIT
[STDERR  ] 2017-12-08T19:49:20.87907249Z: + docker pull linuxkit/kernel:4.9.67
[STDOUT  ] 2017-12-08T19:49:22.295030767Z: 4.9.67: Pulling from linuxkit/kernel
[STDOUT  ] 2017-12-08T19:49:22.709674298Z: Digest: sha256:caa4be72ad42f9c974a84cd05757daa7cad9639e753cbf517c7b3bc5c2c18edb
[STDOUT  ] 2017-12-08T19:49:22.709721581Z: Status: Image is up to date for linuxkit/kernel:4.9.67
[STDERR  ] 2017-12-08T19:49:22.729641048Z: + docker build -t kmod-test .
[STDOUT  ] 2017-12-08T19:49:22.741384992Z: Sending build context to Docker daemon 8.704 kB
[STDOUT  ] 2017-12-08T19:49:22.934651594Z: Step 1/12 : FROM linuxkit/kernel:4.14.4 AS ksrc
[STDOUT  ] 2017-12-08T19:49:22.994270248Z:  ---> 470d2d057f26
[STDOUT  ] 2017-12-08T19:49:22.994320331Z: Step 2/12 : FROM linuxkit/alpine:d307c8a386fa3f32cddda9409b9687e191cdd6f1 AS build
[STDOUT  ] 2017-12-08T19:49:22.994329535Z:  ---> 4d01d9a77113
[STDOUT  ] 2017-12-08T19:49:22.99433709Z: Step 3/12 : RUN apk add build-base libelf-dev
[STDOUT  ] 2017-12-08T19:49:22.994344587Z:  ---> Using cache
[STDOUT  ] 2017-12-08T19:49:22.994351662Z:  ---> f7d6f6977193
[STDOUT  ] 2017-12-08T19:49:22.994358892Z: Step 4/12 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-12-08T19:49:24.871588537Z:  ---> 72a53781da15
[STDOUT  ] 2017-12-08T19:49:24.89491613Z: Removing intermediate container 1eafb35c002a
[STDOUT  ] 2017-12-08T19:49:24.894966563Z: Step 5/12 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-12-08T19:49:25.052426819Z:  ---> Running in f95ab3650033
[STDOUT  ] 2017-12-08T19:49:31.696930553Z:  ---> e1755085ba36
[STDOUT  ] 2017-12-08T19:49:32.312787496Z: Removing intermediate container f95ab3650033
[STDOUT  ] 2017-12-08T19:49:32.312833402Z: Step 6/12 : WORKDIR /kmod
[STDOUT  ] 2017-12-08T19:49:32.848232934Z:  ---> 8e0b10e21d71
[STDOUT  ] 2017-12-08T19:49:32.864918921Z: Removing intermediate container caad6f58d126
[STDOUT  ] 2017-12-08T19:49:32.864952006Z: Step 7/12 : COPY ./src/* ./
[STDOUT  ] 2017-12-08T19:49:33.696310984Z:  ---> bf52697daf25
[STDOUT  ] 2017-12-08T19:49:33.712926205Z: Removing intermediate container 73eda5252c12
[STDOUT  ] 2017-12-08T19:49:33.712949473Z: Step 8/12 : RUN make all
[STDOUT  ] 2017-12-08T19:49:33.871239321Z:  ---> Running in 8dfa98b8ef07
[STDOUT  ] 2017-12-08T19:49:34.394088117Z: make -C /usr/src/linux-headers-4.14.4-linuxkit M=/kmod modules
[STDOUT  ] 2017-12-08T19:49:34.410798042Z: make[1]: Entering directory '/usr/src/linux-headers-4.14.4-linuxkit'
[STDOUT  ] 2017-12-08T19:49:34.410832894Z: [91mgetconf: LFS_CFLAGS: unknown variable
[STDOUT  ] 2017-12-08T19:49:34.410846617Z: [0m[91mgetconf: LFS_LDFLAGS: unknown variable
[STDOUT  ] 2017-12-08T19:49:34.410856696Z: [0m[91mgetconf: LFS_LIBS: unknown variable
[STDOUT  ] 2017-12-08T19:49:35.740082693Z: [0m  CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-12-08T19:49:35.756820482Z: [91mcc1: error: incompatible gcc/plugin versions
[STDOUT  ] 2017-12-08T19:49:35.756851391Z: cc1: error: fail to initialize plugin ./scripts/gcc-plugins/structleak_plugin.so
[STDOUT  ] 2017-12-08T19:49:35.756866577Z: cc1: error: incompatible gcc/plugin versions
[STDOUT  ] 2017-12-08T19:49:35.756876362Z: cc1: error: fail to initialize plugin ./scripts/gcc-plugins/randomize_layout_plugin.so
[STDOUT  ] 2017-12-08T19:49:35.756886738Z: [0m[91mmake[2]: *** [scripts/Makefile.build:321: /kmod/hello_world.o] Error 1
[STDOUT  ] 2017-12-08T19:49:35.756894888Z: [0m[91mmake[1]: *** [Makefile:1503: _module_/kmod] Error 2
[STDOUT  ] 2017-12-08T19:49:35.756903523Z: [0mmake[1]: Leaving directory '/usr/src/linux-headers-4.14.4-linuxkit'
[STDOUT  ] 2017-12-08T19:49:35.756924875Z: [91mmake: *** [Makefile:4: all] Error 2
[STDERR  ] 2017-12-08T19:49:36.273232057Z: The command '/bin/sh -c make all' returned a non-zero code: 2
[STDERR  ] 2017-12-08T19:49:36.276510822Z: + clean_up
[STDERR  ] 2017-12-08T19:49:36.276543317Z: + docker rmi kmod-test
[STDERR  ] 2017-12-08T19:49:36.328796282Z: Error response from daemon: No such image: kmod-test:latest
[STDERR  ] 2017-12-08T19:49:36.331494775Z: + true
[STDERR  ] 2017-12-08T19:49:36.331529753Z: + rm -rf kmod-*
[STDOUT  ] 2017-12-08T19:49:36.33213398Z: [0m
[FAIL    ] linuxkit.kernel.kmod_4.14.x 15.45s
