[INFO    ] 2017-05-31T20:59:42.005071382Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone20e2421f/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-31T20:59:42.005171268Z: Running command: [/bin/sh -x /tmp/with_clone20e2421f/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-31T20:59:42.006502118Z: + set -e
[STDERR  ] 2017-05-31T20:59:42.006522571Z: + . /tmp/with_clone20e2421f/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-31T20:59:42.006538651Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-31T20:59:42.006555027Z: + LINUXKIT_TMPDIR=/tmp/with_clone20e2421f/test/cases/_tmp
[STDERR  ] 2017-05-31T20:59:42.006569238Z: + [ -f /tmp/with_clone20e2421f/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-31T20:59:42.006619315Z: + . /tmp/with_clone20e2421f/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-31T20:59:42.006641273Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone20e2421f/test/cases/../../examples
[STDERR  ] 2017-05-31T20:59:42.00665024Z: + RT_CANCEL=253
[STDERR  ] 2017-05-31T20:59:42.006670375Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-31T20:59:42.006677227Z: + trap clean_up EXIT
[STDERR  ] 2017-05-31T20:59:42.006698039Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-31T20:59:43.686088195Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-31T20:59:43.746903043Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-31T20:59:43.746922809Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-31T20:59:43.7471276Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-31T20:59:43.764925512Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-31T20:59:43.904565476Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-31T20:59:43.96326682Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-31T20:59:43.963351156Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-31T20:59:43.963413125Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-31T20:59:43.963445199Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-31T20:59:44.4133155Z:  ---> Using cache
[STDOUT  ] 2017-05-31T20:59:44.413360697Z:  ---> a2acd2d195dd
[STDOUT  ] 2017-05-31T20:59:44.413381086Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-31T20:59:44.429048283Z:  ---> Using cache
[STDOUT  ] 2017-05-31T20:59:44.429058426Z:  ---> f856074bea82
[STDOUT  ] 2017-05-31T20:59:44.429066387Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-31T20:59:44.429075407Z:  ---> Using cache
[STDOUT  ] 2017-05-31T20:59:44.429093503Z:  ---> bd8aca6d112a
[STDOUT  ] 2017-05-31T20:59:44.429101645Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-31T20:59:44.42910922Z:  ---> Using cache
[STDOUT  ] 2017-05-31T20:59:44.429116717Z:  ---> f95336a6638d
[STDOUT  ] 2017-05-31T20:59:44.429124335Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-31T20:59:44.429131912Z:  ---> Using cache
[STDOUT  ] 2017-05-31T20:59:44.429138828Z:  ---> a8c1fc2a3340
[STDOUT  ] 2017-05-31T20:59:44.429145916Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-31T20:59:44.429160249Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-31T20:59:44.429176637Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-31T20:59:44.905587905Z:  ---> 722ee671779e
[STDOUT  ] 2017-05-31T20:59:44.921130887Z: Removing intermediate container f2666b5e0850
[STDOUT  ] 2017-05-31T20:59:44.921140502Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-31T20:59:45.385947395Z:  ---> e3196342ba97
[STDOUT  ] 2017-05-31T20:59:45.401532098Z: Removing intermediate container f7ec5e7a4bd9
[STDOUT  ] 2017-05-31T20:59:45.401582594Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-31T20:59:45.494523302Z:  ---> Running in d33468c92ccf
[STDOUT  ] 2017-05-31T20:59:45.686932968Z:  ---> ddf8c61b77c1
[STDOUT  ] 2017-05-31T20:59:45.70253339Z: Removing intermediate container d33468c92ccf
[STDOUT  ] 2017-05-31T20:59:45.702561523Z: Successfully built ddf8c61b77c1
[STDOUT  ] 2017-05-31T20:59:45.702565968Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-31T20:59:45.806651863Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-31T20:59:45.818242859Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-31T20:59:48.607447622Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-31T20:59:48.607523011Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-31T20:59:56.377514524Z: Add init containers:
[STDERR  ] 2017-05-31T20:59:56.37753707Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-31T20:59:56.377551387Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-31T20:59:59.563288178Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-31T20:59:59.563399758Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-31T21:00:02.991766552Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-05-31T21:00:02.991837239Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-05-31T21:00:10.773653003Z: Add onboot containers:
[STDERR  ] 2017-05-31T21:00:10.773772443Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-31T21:00:11.283854137Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-31T21:00:11.336117271Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-31T21:00:14.477138144Z: Create outputs:
[STDERR  ] 2017-05-31T21:00:23.34400647Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-31T21:00:23.679015778Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-31T21:00:23.679653034Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-31T21:00:52.942519903Z: + clean_up
[STDERR  ] 2017-05-31T21:00:52.94254511Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-31T21:00:53.028527861Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-31T21:00:53.028549662Z: Deleted: sha256:ddf8c61b77c1f225fd455c670dd537951cdcc3138704c24ccdbe526e6016804a
[STDOUT  ] 2017-05-31T21:00:53.0285653Z: Deleted: sha256:e3196342ba97246093fb6def8300aa3b9c878b71126b70445e16e28824c5b23f
[STDOUT  ] 2017-05-31T21:00:53.02857325Z: Deleted: sha256:39de539f484a434cf1fdbb1c53c54f871eaf78c8a7e5f5d42dc7ad7a08c0afbd
[STDOUT  ] 2017-05-31T21:00:53.028600351Z: Deleted: sha256:722ee671779e353fb5565fbf0ef5465f9254c395333e660522487d4b40dd06da
[STDOUT  ] 2017-05-31T21:00:53.028614425Z: Deleted: sha256:bf238f3ddaa163160dac735ae8b6a1f840ff34e7ad0f30cc05461f47debdf364
[STDERR  ] 2017-05-31T21:00:53.031615416Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 71.05s
