[INFO    ] 2017-05-30T12:08:03.565547315Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone312c5292/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T12:08:03.565661187Z: Running command: [/bin/sh -x /tmp/with_clone312c5292/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T12:08:03.566887142Z: + set -e
[STDERR  ] 2017-05-30T12:08:03.566922414Z: + . /tmp/with_clone312c5292/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T12:08:03.567006971Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T12:08:03.567067412Z: + LINUXKIT_TMPDIR=/tmp/with_clone312c5292/test/cases/_tmp
[STDERR  ] 2017-05-30T12:08:03.567103577Z: + [ -f /tmp/with_clone312c5292/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T12:08:03.567158159Z: + . /tmp/with_clone312c5292/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T12:08:03.567205391Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone312c5292/test/cases/../../examples
[STDERR  ] 2017-05-30T12:08:03.5672344Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T12:08:03.56725992Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T12:08:03.56729551Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T12:08:03.56735377Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T12:08:05.162945735Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-30T12:08:05.224782866Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T12:08:05.224809874Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:08:05.22800275Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T12:08:05.240030128Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-30T12:08:05.394995991Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T12:08:05.454834408Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T12:08:05.454894502Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T12:08:05.454904704Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T12:08:05.454913504Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T12:08:07.059927693Z:  ---> a2acd2d195dd
[STDOUT  ] 2017-05-30T12:08:07.079749103Z: Removing intermediate container e9914b0d5a09
[STDOUT  ] 2017-05-30T12:08:07.079765392Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T12:08:07.21717379Z:  ---> Running in 6cedab562602
[STDOUT  ] 2017-05-30T12:08:12.49235107Z:  ---> f856074bea82
[STDOUT  ] 2017-05-30T12:08:12.931103048Z: Removing intermediate container 6cedab562602
[STDOUT  ] 2017-05-30T12:08:12.931129597Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T12:08:13.347924652Z:  ---> bd8aca6d112a
[STDOUT  ] 2017-05-30T12:08:13.364989938Z: Removing intermediate container 54f6cc5f2b03
[STDOUT  ] 2017-05-30T12:08:13.36503435Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T12:08:14.03573138Z:  ---> f95336a6638d
[STDOUT  ] 2017-05-30T12:08:14.052802667Z: Removing intermediate container 63de593dd807
[STDOUT  ] 2017-05-30T12:08:14.052815892Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T12:08:14.177438267Z:  ---> Running in 886fdb99f20e
[STDOUT  ] 2017-05-30T12:08:14.652888977Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-30T12:08:14.670042479Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T12:08:15.441346687Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-30T12:08:15.629154264Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-30T12:08:15.646178407Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-30T12:08:15.646193992Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-30T12:08:15.814323659Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-30T12:08:15.831326437Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-05-30T12:08:16.459526563Z:  ---> a8c1fc2a3340
[STDOUT  ] 2017-05-30T12:08:16.476492411Z: Removing intermediate container 886fdb99f20e
[STDOUT  ] 2017-05-30T12:08:16.47652308Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T12:08:16.476563076Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T12:08:16.476586693Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T12:08:16.963601611Z:  ---> 926887e906c2
[STDOUT  ] 2017-05-30T12:08:16.98059509Z: Removing intermediate container 2de3b3931701
[STDOUT  ] 2017-05-30T12:08:16.98063215Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T12:08:17.459455846Z:  ---> c53ba2abbdaf
[STDOUT  ] 2017-05-30T12:08:17.476460413Z: Removing intermediate container c1764a833946
[STDOUT  ] 2017-05-30T12:08:17.476489653Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T12:08:17.593534861Z:  ---> Running in d82afad023c6
[STDOUT  ] 2017-05-30T12:08:17.820198091Z:  ---> c1437ec602de
[STDOUT  ] 2017-05-30T12:08:17.837200764Z: Removing intermediate container d82afad023c6
[STDOUT  ] 2017-05-30T12:08:17.837241504Z: Successfully built c1437ec602de
[STDOUT  ] 2017-05-30T12:08:17.837262299Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T12:08:17.935903445Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T12:08:17.944819251Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:08:20.659736848Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:08:20.659754225Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T12:08:28.111770304Z: Add init containers:
[STDERR  ] 2017-05-30T12:08:28.111798031Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T12:08:28.111829293Z: Pull image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-30T12:08:31.141402806Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T12:08:31.141485418Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T12:08:34.47082514Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T12:08:34.470850154Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T12:08:41.51181863Z: Add onboot containers:
[STDERR  ] 2017-05-30T12:08:41.512674162Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T12:08:42.017453989Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T12:08:42.054909226Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-30T12:08:45.48753356Z: Create outputs:
[STDERR  ] 2017-05-30T12:08:51.375394648Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T12:08:51.617491073Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T12:08:51.617506565Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T12:09:15.95712904Z: + clean_up
[STDERR  ] 2017-05-30T12:09:15.957158466Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T12:09:16.011944937Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T12:09:16.011968799Z: Deleted: sha256:c1437ec602dedf8246ee2ccc5a20ebf37520dea7858b26bbf48d3bfe461ab433
[STDOUT  ] 2017-05-30T12:09:16.01197586Z: Deleted: sha256:c53ba2abbdaf702229a2d1ac3fe9ad895ff9bd7fa45c6de1583b6d5bea7fd2d1
[STDOUT  ] 2017-05-30T12:09:16.012004733Z: Deleted: sha256:3c2041345a87348819aa1e1dd82661acebd0bb7c6dc808bf29e4649cb96a4328
[STDOUT  ] 2017-05-30T12:09:16.012012897Z: Deleted: sha256:926887e906c2ee7c987a8ec061901c846e6a44c48dbe2c78bff65e2f78ed030f
[STDOUT  ] 2017-05-30T12:09:16.01203606Z: Deleted: sha256:bf238f3ddaa163160dac735ae8b6a1f840ff34e7ad0f30cc05461f47debdf364
[STDERR  ] 2017-05-30T12:09:16.015114637Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 72.47s
