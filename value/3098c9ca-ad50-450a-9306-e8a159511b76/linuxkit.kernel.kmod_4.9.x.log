[INFO    ] 2017-06-06T18:47:11.932746845Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone379128b3/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-06T18:47:11.932850745Z: Running command: [/bin/sh -x /tmp/with_clone379128b3/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T18:47:11.947762161Z: + set -e
[STDERR  ] 2017-06-06T18:47:11.947773787Z: + . /tmp/with_clone379128b3/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T18:47:11.947781842Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T18:47:11.947790837Z: + LINUXKIT_TMPDIR=/tmp/with_clone379128b3/test/cases/_tmp
[STDERR  ] 2017-06-06T18:47:11.947799082Z: + [ -f /tmp/with_clone379128b3/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T18:47:11.947818741Z: + . /tmp/with_clone379128b3/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T18:47:11.947832041Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone379128b3/test/cases/../../examples
[STDERR  ] 2017-06-06T18:47:11.94783626Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T18:47:11.947856444Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T18:47:11.947864542Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T18:47:11.947868421Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T18:47:13.341546878Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T18:47:13.404544468Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T18:47:13.404606677Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T18:47:13.409995547Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T18:47:13.421872225Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-06T18:47:13.589209639Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T18:47:13.663903735Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T18:47:13.66393426Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T18:47:13.663939554Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T18:47:13.663954019Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T18:47:14.101288432Z:  ---> Using cache
[STDOUT  ] 2017-06-06T18:47:14.101343773Z:  ---> f0cbf6abfeff
[STDOUT  ] 2017-06-06T18:47:14.101348419Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T18:47:14.117548634Z:  ---> Using cache
[STDOUT  ] 2017-06-06T18:47:14.117569336Z:  ---> dea6f2ffc37f
[STDOUT  ] 2017-06-06T18:47:14.117598792Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T18:47:14.11760771Z:  ---> Using cache
[STDOUT  ] 2017-06-06T18:47:14.117621509Z:  ---> 86d70d5ffa4a
[STDOUT  ] 2017-06-06T18:47:14.117625173Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T18:47:14.117646931Z:  ---> Using cache
[STDOUT  ] 2017-06-06T18:47:14.117666059Z:  ---> a19285fc0078
[STDOUT  ] 2017-06-06T18:47:14.117674161Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T18:47:14.117681713Z:  ---> Using cache
[STDOUT  ] 2017-06-06T18:47:14.117689277Z:  ---> ea9aa5cb89b9
[STDOUT  ] 2017-06-06T18:47:14.117697098Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T18:47:14.117707976Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T18:47:14.117716104Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T18:47:14.574376554Z:  ---> aab6315f5b4f
[STDOUT  ] 2017-06-06T18:47:14.590613175Z: Removing intermediate container 6a417865ad6a
[STDOUT  ] 2017-06-06T18:47:14.590651432Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T18:47:15.05431317Z:  ---> c41adc541c95
[STDOUT  ] 2017-06-06T18:47:15.070517214Z: Removing intermediate container 67fb09ee79fd
[STDOUT  ] 2017-06-06T18:47:15.070525344Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T18:47:15.179170771Z:  ---> Running in bdf178b330d8
[STDOUT  ] 2017-06-06T18:47:15.374977241Z:  ---> 937c9683899d
[STDOUT  ] 2017-06-06T18:47:15.391189902Z: Removing intermediate container bdf178b330d8
[STDOUT  ] 2017-06-06T18:47:15.391237473Z: Successfully built 937c9683899d
[STDOUT  ] 2017-06-06T18:47:15.391250304Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T18:47:15.475315537Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T18:47:15.484070943Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T18:47:20.608003489Z: Add init containers:
[STDERR  ] 2017-06-06T18:47:20.609301155Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T18:47:22.076613689Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T18:47:23.962675997Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-06T18:47:29.781220928Z: Add onboot containers:
[STDERR  ] 2017-06-06T18:47:29.781316347Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T18:47:30.338292275Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T18:47:31.832745797Z: Create outputs:
[STDERR  ] 2017-06-06T18:47:38.23019888Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T18:47:38.457574003Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T18:47:38.459443458Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T18:48:02.323247112Z: + clean_up
[STDERR  ] 2017-06-06T18:48:02.323327676Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T18:48:02.376394266Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T18:48:02.376469419Z: Deleted: sha256:937c9683899d3d94ef2f31cef3e8e52a1bd93e8fe5ab7dd24bab1c057a9ac280
[STDOUT  ] 2017-06-06T18:48:02.376480298Z: Deleted: sha256:c41adc541c957f50f40418b23dd8f414e90b14fb48fc50cb082495d0b074d807
[STDOUT  ] 2017-06-06T18:48:02.376514268Z: Deleted: sha256:cbc7451beaee62d97bfe59532a87c51f36f48ded36cbbdb55c47afe0a1d66d90
[STDOUT  ] 2017-06-06T18:48:02.376531139Z: Deleted: sha256:aab6315f5b4f64d78762d69b7a2588f85b92e7533ed55642248c3546ab0017ab
[STDOUT  ] 2017-06-06T18:48:02.37655626Z: Deleted: sha256:424e85069cfedc73a02c984a2748d512fb6290b084d496e0d0bc7ddf59c8a7a4
[STDERR  ] 2017-06-06T18:48:02.379704324Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 50.47s
