[INFO    ] 2017-06-05T16:26:39.304682579Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-05T16:26:39.304740676Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-05T16:26:39.332523998Z: + set -e
[STDERR  ] 2017-06-05T16:26:39.332667944Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-05T16:26:39.332725117Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-05T16:26:39.332770962Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-05T16:26:39.332802974Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-05T16:26:39.332830915Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-05T16:26:39.332867524Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-05T16:26:39.332893889Z: + RT_CANCEL=253
[STDERR  ] 2017-06-05T16:26:39.332908132Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-05T16:26:39.332941772Z: + trap clean_up EXIT
[STDERR  ] 2017-06-05T16:26:39.332973528Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-05T16:26:40.463820569Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-05T16:26:40.463944201Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-05T16:26:40.463976082Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-05T16:26:40.464862423Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-05T16:26:40.481150777Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-05T16:26:40.501925445Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-05T16:26:40.543009794Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-05T16:26:40.543154287Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-05T16:26:41.927603658Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-05T16:26:41.945322788Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-05T16:26:41.983183063Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-05T16:26:45.625339517Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-05T16:26:45.626883741Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-05T16:26:51.85326224Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-05T16:26:51.871445943Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-05T16:26:51.874054701Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-05T16:26:51.874385107Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-05T16:26:51.874476502Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-05T16:26:54.259672136Z:  ---> 0ae30cc3bb33
[STDOUT  ] 2017-06-05T16:26:54.289646168Z: Removing intermediate container c3a723c594ee
[STDOUT  ] 2017-06-05T16:26:54.289790299Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-05T16:26:54.397761877Z:  ---> Running in 9985605090f5
[STDOUT  ] 2017-06-05T16:27:00.245346821Z:  ---> fc8496526d26
[STDOUT  ] 2017-06-05T16:27:00.617051595Z: Removing intermediate container 9985605090f5
[STDOUT  ] 2017-06-05T16:27:00.617367034Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-05T16:27:00.838435129Z:  ---> 281e84ea0274
[STDOUT  ] 2017-06-05T16:27:00.848446675Z: Removing intermediate container 21cca2714cf4
[STDOUT  ] 2017-06-05T16:27:00.848670257Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-05T16:27:01.085401072Z:  ---> da8a86e28929
[STDOUT  ] 2017-06-05T16:27:01.094432753Z: Removing intermediate container 25ecf5196607
[STDOUT  ] 2017-06-05T16:27:01.094620825Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-05T16:27:01.179003738Z:  ---> Running in c9568084526f
[STDOUT  ] 2017-06-05T16:27:01.346807733Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-05T16:27:01.348062883Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-05T16:27:02.26841162Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-05T16:27:02.454987246Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-05T16:27:02.461796643Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-05T16:27:02.472177145Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-05T16:27:02.640204987Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-05T16:27:02.642557387Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-05T16:27:02.834201791Z:  ---> 62f5c9bef177
[STDOUT  ] 2017-06-05T16:27:02.846153098Z: Removing intermediate container c9568084526f
[STDOUT  ] 2017-06-05T16:27:02.846245022Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-05T16:27:03.928219857Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-05T16:27:03.928884437Z: 6f821164d5b7: Pulling fs layer
[STDOUT  ] 2017-06-05T16:27:04.555462109Z: 6f821164d5b7: Verifying Checksum
[STDOUT  ] 2017-06-05T16:27:04.555557098Z: 6f821164d5b7: Download complete
[STDOUT  ] 2017-06-05T16:27:04.739964549Z: 6f821164d5b7: Pull complete
[STDOUT  ] 2017-06-05T16:27:04.740038226Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-05T16:27:04.740090018Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-05T16:27:04.740365416Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-05T16:27:04.740449347Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-05T16:27:04.904465101Z:  ---> 0e04394bcdb9
[STDOUT  ] 2017-06-05T16:27:04.911292283Z: Removing intermediate container 944af7958ac4
[STDOUT  ] 2017-06-05T16:27:04.911478121Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-05T16:27:05.056853121Z:  ---> f6e27acb0eac
[STDOUT  ] 2017-06-05T16:27:05.062805033Z: Removing intermediate container 853397a23396
[STDOUT  ] 2017-06-05T16:27:05.062950832Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-05T16:27:05.129534633Z:  ---> Running in 8882cd667878
[STDOUT  ] 2017-06-05T16:27:05.180622761Z:  ---> 8c0439ac1aaf
[STDOUT  ] 2017-06-05T16:27:05.186836386Z: Removing intermediate container 8882cd667878
[STDOUT  ] 2017-06-05T16:27:05.186918669Z: Successfully built 8c0439ac1aaf
[STDOUT  ] 2017-06-05T16:27:05.190790451Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-05T16:27:05.201353852Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-05T16:27:05.21077109Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-05T16:27:08.234695062Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-05T16:27:08.234730168Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-05T16:27:11.955727268Z: Add init containers:
[STDERR  ] 2017-06-05T16:27:11.955795128Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-05T16:27:11.955818984Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-05T16:27:14.834901255Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-05T16:27:14.834965703Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-05T16:27:17.915809093Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-05T16:27:17.915852547Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-05T16:27:21.294925882Z: Add onboot containers:
[STDERR  ] 2017-06-05T16:27:21.295013236Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-05T16:27:21.426690042Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-05T16:27:21.429089373Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-05T16:27:24.487315554Z: Create outputs:
[STDERR  ] 2017-06-05T16:27:30.320507317Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-05T16:27:30.37820131Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-05T16:27:30.379449543Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-05T16:27:30.401411713Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-05T16:27:46.410801382Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-05T16:27:46.413158041Z: time="2017-06-05T16:27:46Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-05T16:27:46.413169105Z: + clean_up
[STDERR  ] 2017-06-05T16:27:46.413175068Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-05T16:27:46.446879067Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-05T16:27:46.446897228Z: Deleted: sha256:8c0439ac1aafb183c40be48e949330d8fd581c7c74261622146abda81972128e
[STDOUT  ] 2017-06-05T16:27:46.44692225Z: Deleted: sha256:f6e27acb0eaca7472f9bc9ba6633e711b3184200ab19797d13caa8c141a6e0db
[STDOUT  ] 2017-06-05T16:27:46.446928251Z: Deleted: sha256:423fd02b937d38be3ede50501f778f406d8a666d4dc27b5453fdd3f2f164007e
[STDOUT  ] 2017-06-05T16:27:46.446934107Z: Deleted: sha256:0e04394bcdb9351f2ac4a17c301329c44c459844dc0fb83c0aef5a55e435b143
[STDOUT  ] 2017-06-05T16:27:46.446937223Z: Deleted: sha256:14746d34a1b28762dea178a4222b88c0c3ebbbc2b31d49876b85c16ed3a4c91f
[STDERR  ] 2017-06-05T16:27:46.447607609Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 67.16s
