[INFO    ] 2017-06-03T10:02:20.113273559Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone19d5820d/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-03T10:02:20.113380411Z: Running command: [/bin/sh -x /tmp/with_clone19d5820d/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-03T10:02:20.128437863Z: + set -e
[STDERR  ] 2017-06-03T10:02:20.12844863Z: + . /tmp/with_clone19d5820d/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-03T10:02:20.128456267Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-03T10:02:20.128460401Z: + LINUXKIT_TMPDIR=/tmp/with_clone19d5820d/test/cases/_tmp
[STDERR  ] 2017-06-03T10:02:20.128468822Z: + [ -f /tmp/with_clone19d5820d/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-03T10:02:20.128480639Z: + . /tmp/with_clone19d5820d/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-03T10:02:20.128485988Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone19d5820d/test/cases/../../examples
[STDERR  ] 2017-06-03T10:02:20.128498747Z: + RT_CANCEL=253
[STDERR  ] 2017-06-03T10:02:20.128506625Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-03T10:02:20.12851008Z: + trap clean_up EXIT
[STDERR  ] 2017-06-03T10:02:20.128521605Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-03T10:02:21.665003698Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-03T10:02:21.725061706Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-03T10:02:21.725176185Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-03T10:02:21.72838987Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-03T10:02:21.740762427Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-03T10:02:21.90813884Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-03T10:02:21.974901442Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-03T10:02:21.974924569Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-03T10:02:21.974948887Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-03T10:02:21.974953165Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-03T10:02:22.420061553Z:  ---> Using cache
[STDOUT  ] 2017-06-03T10:02:22.420113065Z:  ---> 60a84ce86bce
[STDOUT  ] 2017-06-03T10:02:22.420117579Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-03T10:02:22.437342343Z:  ---> Using cache
[STDOUT  ] 2017-06-03T10:02:22.437384805Z:  ---> dda20f4b7bd0
[STDOUT  ] 2017-06-03T10:02:22.437400394Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-03T10:02:22.437407841Z:  ---> Using cache
[STDOUT  ] 2017-06-03T10:02:22.437425143Z:  ---> 6554433ac9bc
[STDOUT  ] 2017-06-03T10:02:22.437447255Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-03T10:02:22.437460115Z:  ---> Using cache
[STDOUT  ] 2017-06-03T10:02:22.437489086Z:  ---> ec8593efcf4d
[STDOUT  ] 2017-06-03T10:02:22.437496911Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-03T10:02:22.437504495Z:  ---> Using cache
[STDOUT  ] 2017-06-03T10:02:22.437523395Z:  ---> 7a8a9087ffbb
[STDOUT  ] 2017-06-03T10:02:22.437531459Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-03T10:02:22.43753938Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-03T10:02:22.437547344Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-03T10:02:22.894460999Z:  ---> 8c2d9d94201f
[STDOUT  ] 2017-06-03T10:02:22.91101732Z: Removing intermediate container 0b82a4dcc61b
[STDOUT  ] 2017-06-03T10:02:22.911032441Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-03T10:02:23.382063099Z:  ---> 209072b66590
[STDOUT  ] 2017-06-03T10:02:23.39933931Z: Removing intermediate container 61df1029f01b
[STDOUT  ] 2017-06-03T10:02:23.399386086Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-03T10:02:23.5146817Z:  ---> Running in d1ef4ef3edfc
[STDOUT  ] 2017-06-03T10:02:23.709940971Z:  ---> afef10f41017
[STDOUT  ] 2017-06-03T10:02:23.727283377Z: Removing intermediate container d1ef4ef3edfc
[STDOUT  ] 2017-06-03T10:02:23.727294694Z: Successfully built afef10f41017
[STDOUT  ] 2017-06-03T10:02:23.72730392Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-03T10:02:23.826058567Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-03T10:02:23.834623566Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-03T10:02:26.792592706Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-03T10:02:26.792615447Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-03T10:02:34.214546931Z: Add init containers:
[STDERR  ] 2017-06-03T10:02:34.214624779Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-03T10:02:34.214653331Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-03T10:02:37.299901195Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-03T10:02:37.299955727Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-03T10:02:41.143007078Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-03T10:02:41.143045581Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-03T10:02:48.058972368Z: Add onboot containers:
[STDERR  ] 2017-06-03T10:02:48.058996943Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-03T10:02:48.566277946Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-03T10:02:48.603989644Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-03T10:02:51.931954548Z: Create outputs:
[STDERR  ] 2017-06-03T10:02:57.785241175Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-03T10:02:58.035890134Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-03T10:02:58.042524003Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-03T10:03:21.561948853Z: + clean_up
[STDERR  ] 2017-06-03T10:03:21.561964331Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-03T10:03:21.616644057Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-03T10:03:21.616710236Z: Deleted: sha256:afef10f41017f0b0e3a84b4fbd784940b5f65ef99df072e417acf7310db4d0c3
[STDOUT  ] 2017-06-03T10:03:21.616755558Z: Deleted: sha256:209072b66590bfe242e13503866be6744d306775be7310bde87bd16cdf523de8
[STDOUT  ] 2017-06-03T10:03:21.616771619Z: Deleted: sha256:4fdb7a99f500e658863b3e9dd954e4d06832e4121e324b395ab979b3e3202cea
[STDOUT  ] 2017-06-03T10:03:21.616786372Z: Deleted: sha256:8c2d9d94201f4107516a3fb01ff9050ad7cb90f38b72418e7c69f4813970107a
[STDOUT  ] 2017-06-03T10:03:21.616800919Z: Deleted: sha256:4f1c836a6d9a56a2bdb77fb8532b9fd941257636fce2c58cc9d4f3b7f6fdb2cf
[STDERR  ] 2017-06-03T10:03:21.620081287Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 61.53s
