[INFO    ] 2017-06-06T20:48:25.181385988Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-06T20:48:25.181459115Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T20:48:25.21148111Z: + set -e
[STDERR  ] 2017-06-06T20:48:25.211523595Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T20:48:25.211592696Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T20:48:25.211635544Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-06T20:48:25.211671856Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T20:48:25.211694864Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T20:48:25.211737408Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-06T20:48:25.211759683Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T20:48:25.211778019Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T20:48:25.211816963Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T20:48:25.2118412Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T20:48:26.45379736Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T20:48:26.453868172Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T20:48:26.453923228Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T20:48:26.454676424Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T20:48:26.488571013Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-06T20:48:26.524912209Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T20:48:26.545702282Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T20:48:26.545843275Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T20:48:27.675144054Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-06T20:48:27.688412076Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-06T20:48:27.739619897Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-06T20:48:31.761665275Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-06T20:48:31.76305663Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-06T20:48:37.866755018Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-06T20:48:37.876164688Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-06T20:48:37.879349875Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-06T20:48:37.879735912Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T20:48:37.879836823Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T20:48:39.955455439Z:  ---> 5fbe77319853
[STDOUT  ] 2017-06-06T20:48:40.147205353Z: Removing intermediate container f838032e4fd8
[STDOUT  ] 2017-06-06T20:48:40.147320003Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T20:48:40.250227514Z:  ---> Running in baaf9e0138a2
[STDOUT  ] 2017-06-06T20:48:46.464412406Z:  ---> 38ef7dc049bc
[STDOUT  ] 2017-06-06T20:48:46.824523288Z: Removing intermediate container baaf9e0138a2
[STDOUT  ] 2017-06-06T20:48:46.824638843Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T20:48:47.042810967Z:  ---> 16ac80af87a7
[STDOUT  ] 2017-06-06T20:48:47.052097292Z: Removing intermediate container 1a071208c1ce
[STDOUT  ] 2017-06-06T20:48:47.052247733Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T20:48:47.306527586Z:  ---> 84cf138b0d4d
[STDOUT  ] 2017-06-06T20:48:47.323454937Z: Removing intermediate container a88b9ba100e9
[STDOUT  ] 2017-06-06T20:48:47.323578295Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T20:48:47.432026043Z:  ---> Running in b279013fabf1
[STDOUT  ] 2017-06-06T20:48:47.597671318Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-06T20:48:47.598887045Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-06T20:48:48.501456638Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-06T20:48:48.702114284Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-06T20:48:48.710110577Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-06T20:48:48.720857976Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-06T20:48:48.895751207Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-06T20:48:48.89799166Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-06T20:48:49.074700444Z:  ---> 440bd7d78e93
[STDOUT  ] 2017-06-06T20:48:49.086111104Z: Removing intermediate container b279013fabf1
[STDOUT  ] 2017-06-06T20:48:49.086215525Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T20:48:50.188704607Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-06T20:48:50.20379302Z: 6f821164d5b7: Already exists
[STDOUT  ] 2017-06-06T20:48:50.661126627Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-06T20:48:50.681682254Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-06T20:48:50.682315403Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T20:48:50.682408277Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T20:48:52.452882749Z:  ---> e8e12a39d3b0
[STDOUT  ] 2017-06-06T20:48:52.525615396Z: Removing intermediate container bb10effeb64c
[STDOUT  ] 2017-06-06T20:48:52.525669085Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T20:48:53.385348004Z:  ---> 817ba5bb5a12
[STDOUT  ] 2017-06-06T20:48:54.195436682Z: Removing intermediate container 9bee026e3f94
[STDOUT  ] 2017-06-06T20:48:54.195448257Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T20:48:54.293371886Z:  ---> Running in 4d306a081d40
[STDOUT  ] 2017-06-06T20:48:54.369837662Z:  ---> 4adfe9749396
[STDOUT  ] 2017-06-06T20:48:54.387760055Z: Removing intermediate container 4d306a081d40
[STDOUT  ] 2017-06-06T20:48:54.387908211Z: Successfully built 4adfe9749396
[STDOUT  ] 2017-06-06T20:48:54.398194622Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T20:48:54.418523359Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T20:48:54.427870638Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T20:48:56.204587061Z: Add init containers:
[STDERR  ] 2017-06-06T20:48:56.204689277Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T20:48:57.53217918Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T20:48:58.791681436Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-06T20:49:00.614484395Z: Add onboot containers:
[STDERR  ] 2017-06-06T20:49:00.614524593Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T20:49:01.046238839Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T20:49:02.504736834Z: Create outputs:
[STDERR  ] 2017-06-06T20:49:08.111125564Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T20:49:08.174749065Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T20:49:08.175389424Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T20:49:08.195726254Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-06T20:49:24.254332729Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-06T20:49:24.257270959Z: time="2017-06-06T20:49:24Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-06T20:49:24.257282296Z: + clean_up
[STDERR  ] 2017-06-06T20:49:24.257289957Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T20:49:24.306876569Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T20:49:24.306899533Z: Deleted: sha256:4adfe9749396601ee544c112acae6b2988bc0a5f66c47e29e9737cda3cd75866
[STDOUT  ] 2017-06-06T20:49:24.306913014Z: Deleted: sha256:817ba5bb5a129d61a0fcf5047b8456b07444529036d87019e618ee215ad94549
[STDOUT  ] 2017-06-06T20:49:24.306918908Z: Deleted: sha256:c9d8ffe13ae20c99beaea8a3478c846414c8420f12986601771e0256e8ba0941
[STDOUT  ] 2017-06-06T20:49:24.306933226Z: Deleted: sha256:e8e12a39d3b0dc44e50e74128496bd0846385b08e8a89c114fe2f46033b5d829
[STDOUT  ] 2017-06-06T20:49:24.306939002Z: Deleted: sha256:244aade26822c1050b26d0143ee1752abe2dd15fe8d7537ac83aafdb771e018b
[STDERR  ] 2017-06-06T20:49:24.30789722Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 59.15s
