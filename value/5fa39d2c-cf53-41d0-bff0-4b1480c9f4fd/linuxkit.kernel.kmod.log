[INFO    ] 2017-05-18T17:14:39.944266049Z: Running Test linuxkit.kernel.kmod in /tmp/with_clone1aedffd/test/cases/020_kernel/010_kmod
[INFO    ] 2017-05-18T17:14:39.944375136Z: Running command: [/bin/sh -x /tmp/with_clone1aedffd/test/cases/020_kernel/010_kmod/test.sh]
[STDERR  ] 2017-05-18T17:14:39.957672398Z: + set -e
[STDERR  ] 2017-05-18T17:14:39.957739917Z: + . /tmp/with_clone1aedffd/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-18T17:14:39.957747491Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-18T17:14:39.957771509Z: + LINUXKIT_TMPDIR=/tmp/with_clone1aedffd/test/cases/_tmp
[STDERR  ] 2017-05-18T17:14:39.957785834Z: + [ -f /tmp/with_clone1aedffd/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-18T17:14:39.957817299Z: + . /tmp/with_clone1aedffd/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-18T17:14:39.957834171Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone1aedffd/test/cases/../../examples
[STDERR  ] 2017-05-18T17:14:39.957847689Z: + RT_CANCEL=253
[STDERR  ] 2017-05-18T17:14:39.957855437Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-18T17:14:39.957876423Z: + trap clean_up EXIT
[STDERR  ] 2017-05-18T17:14:39.957883174Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-18T17:14:44.474129851Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-18T17:14:44.534458157Z: Digest: sha256:2ddac8acd71d8e20484c8a4cc1ec6218b4331ea7239e1542e872ae4c2967e0af
[STDOUT  ] 2017-05-18T17:14:44.534464514Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-18T17:14:44.537561172Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-18T17:14:44.549809066Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-18T17:14:44.720144621Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-18T17:14:44.784691554Z:  ---> e5d78905f6de
[STDOUT  ] 2017-05-18T17:14:44.784730514Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-18T17:14:44.784741564Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-18T17:14:44.784747918Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-18T17:14:45.235597198Z:  ---> Using cache
[STDOUT  ] 2017-05-18T17:14:45.235606141Z:  ---> 2dc0d7709719
[STDOUT  ] 2017-05-18T17:14:45.235619216Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-18T17:14:45.252297216Z:  ---> Using cache
[STDOUT  ] 2017-05-18T17:14:45.252314658Z:  ---> 4331f3b9bc63
[STDOUT  ] 2017-05-18T17:14:45.252323059Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-18T17:14:45.252327246Z:  ---> Using cache
[STDOUT  ] 2017-05-18T17:14:45.252339792Z:  ---> e24e6c28adee
[STDOUT  ] 2017-05-18T17:14:45.252347798Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-18T17:14:45.252355522Z:  ---> Using cache
[STDOUT  ] 2017-05-18T17:14:45.252363321Z:  ---> 217c435d11e1
[STDOUT  ] 2017-05-18T17:14:45.252375416Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-18T17:14:45.252389033Z:  ---> Using cache
[STDOUT  ] 2017-05-18T17:14:45.25240194Z:  ---> 9cb539abd5c9
[STDOUT  ] 2017-05-18T17:14:45.252429019Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-18T17:14:45.252446845Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-18T17:14:45.252455613Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-18T17:14:45.78532778Z:  ---> 060bc86a81ec
[STDOUT  ] 2017-05-18T17:14:45.8020074Z: Removing intermediate container 75c3b8fb6891
[STDOUT  ] 2017-05-18T17:14:45.802044881Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-18T17:14:46.377067271Z:  ---> bd1ba155850a
[STDOUT  ] 2017-05-18T17:14:46.393856163Z: Removing intermediate container 3bd7897e3eca
[STDOUT  ] 2017-05-18T17:14:46.393869715Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-18T17:14:46.50976046Z:  ---> Running in 1347ef4e12d2
[STDOUT  ] 2017-05-18T17:14:46.7217376Z:  ---> b0b5239b9e38
[STDOUT  ] 2017-05-18T17:14:46.738451664Z: Removing intermediate container 1347ef4e12d2
[STDOUT  ] 2017-05-18T17:14:46.738459823Z: Successfully built b0b5239b9e38
[STDOUT  ] 2017-05-18T17:14:46.738468169Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-18T17:14:46.829588926Z: + moby build kmod
[STDERR  ] 2017-05-18T17:14:46.839640749Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-18T17:14:51.194959182Z: Add init containers:
[STDERR  ] 2017-05-18T17:14:51.195047397Z: Process init image: linuxkit/init:b3740303f3d1e5689a84c87b7dfb48fd2a40a192
[STDERR  ] 2017-05-18T17:14:51.6320494Z: Process init image: linuxkit/runc:47b1c38d63468c0f3078f8b1b055d07965a1895d
[STDERR  ] 2017-05-18T17:14:52.24836985Z: Process init image: linuxkit/containerd:cf2614f5a96c569a0bd4bd54e054a65ba17d167f
[STDERR  ] 2017-05-18T17:14:54.704071189Z: Add onboot containers:
[STDERR  ] 2017-05-18T17:14:54.704144528Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-18T17:14:55.227895784Z:   Create OCI config for linuxkit/poweroff:961412b8ef5c5285de0d40ec076701d955eaa084
[STDERR  ] 2017-05-18T17:14:55.730948264Z: Create outputs:
[STDERR  ] 2017-05-18T17:15:00.374634508Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-18T17:15:00.586301874Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-18T17:15:00.586363841Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-18T17:15:25.641550147Z: + clean_up
[STDERR  ] 2017-05-18T17:15:25.641571535Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-18T17:15:25.697571709Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-18T17:15:25.697597113Z: Deleted: sha256:b0b5239b9e3810acd3b8153626e1474a14b7f2e2d95507ed3b29d5b46e016189
[STDOUT  ] 2017-05-18T17:15:25.697613206Z: Deleted: sha256:bd1ba155850ae99c64109956cbd43ba5c7c8e6b809f11dee374943a485153bb5
[STDOUT  ] 2017-05-18T17:15:25.697631506Z: Deleted: sha256:59d4525943ba3f3b1c0932ebffd62eb7ad0712f949d64f2a46b10532a8615aed
[STDOUT  ] 2017-05-18T17:15:25.697647331Z: Deleted: sha256:060bc86a81ec1d78bef06b757b917c2ef3a698ae5215ea8b38c821ec21ca109b
[STDOUT  ] 2017-05-18T17:15:25.697655606Z: Deleted: sha256:6217596c2f848b13a63413ed7a733f4919a2f4a7230ab13834951caf2d55b52d
[STDERR  ] 2017-05-18T17:15:25.699013103Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod 45.77s
