[INFO    ] 2017-06-06T11:28:06.628552536Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone12b18dc3/test/cases/020_kernel/010_kmod_4.9.x
[STDERR  ] 2017-06-06T11:28:06.628575833Z: 
[STDERR  ] 2017-06-06T11:28:06.628590993Z: Generally Necessary:
[STDERR  ] 2017-06-06T11:28:06.628603044Z: - [37mcgroup hierarchy[m: [32mproperly mounted[m [/sys/fs/cgroup]
[STDERR  ] 2017-06-06T11:28:06.628615131Z: - [37mCONFIG_NAMESPACES[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628627232Z: - [37mCONFIG_NET_NS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628633716Z: - [37mCONFIG_PID_NS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628648875Z: - [37mCONFIG_IPC_NS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628666458Z: - [37mCONFIG_UTS_NS[m: [32menabled[m
[INFO    ] 2017-06-06T11:28:06.628677168Z: Running command: [/bin/sh -x /tmp/with_clone12b18dc3/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T11:28:06.628678858Z: - [37mCONFIG_CGROUPS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628690655Z: - [37mCONFIG_CGROUP_CPUACCT[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628702889Z: - [37mCONFIG_CGROUP_DEVICE[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628714798Z: - [37mCONFIG_CGROUP_FREEZER[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628726483Z: - [37mCONFIG_CGROUP_SCHED[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.62873793Z: - [37mCONFIG_CPUSETS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628749375Z: - [37mCONFIG_MEMCG[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.628760118Z: - [37mCONFIG_KEYS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637560072Z: - [37mCONFIG_VETH[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637585254Z: - [37mCONFIG_BRIDGE[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637670267Z: - [37mCONFIG_BRIDGE_NETFILTER[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637709447Z: - [37mCONFIG_NF_NAT_IPV4[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637715819Z: - [37mCONFIG_IP_NF_FILTER[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637743548Z: - [37mCONFIG_IP_NF_TARGET_MASQUERADE[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637756808Z: - [37mCONFIG_NETFILTER_XT_MATCH_ADDRTYPE[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637784831Z: - [37mCONFIG_NETFILTER_XT_MATCH_CONNTRACK[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637799483Z: - [37mCONFIG_NETFILTER_XT_MATCH_IPVS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637817384Z: - [37mCONFIG_IP_NF_NAT[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637828762Z: - [37mCONFIG_NF_NAT[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637839602Z: - [37mCONFIG_NF_NAT_NEEDED[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637850496Z: - [37mCONFIG_POSIX_MQUEUE[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637861199Z: 
[STDERR  ] 2017-06-06T11:28:06.637872027Z: Optional Features:
[STDERR  ] 2017-06-06T11:28:06.637882866Z: - [37mCONFIG_USER_NS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637889128Z: - [37mCONFIG_SECCOMP[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637905012Z: - [37mCONFIG_CGROUP_PIDS[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637910237Z: - [37mCONFIG_MEMCG_SWAP[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.637926712Z: - [37mCONFIG_MEMCG_SWAP_ENABLED[m: [32menabled[m
[STDERR  ] 2017-06-06T11:28:06.63796341Z:     [1;30m(cgroup swap accounting is currently enabled)[m
[STDERR  ] 2017-06-06T11:28:06.638015512Z: - [1mCONFIG_LEGACY_VSYSCALL_NONE[m: [1;31menabled[m
[STDERR  ] 2017-06-06T11:28:06.638038636Z:     [1;30m(containers using eglibc <= 2.13 will not work. Switch to[m
[STDERR  ] 2017-06-06T11:28:06.638049832Z:     [1;30m "CONFIG_VSYSCALL_[NATIVE|EMULATE]" or use "vsyscal
[STDERR  ] 2017-06-06T11:28:06.638600272Z: + set -e
[STDERR  ] 2017-06-06T11:28:06.638712263Z: + . /tmp/with_clone12b18dc3/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T11:28:06.638797491Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T11:28:06.638870709Z: + LINUXKIT_TMPDIR=/tmp/with_clone12b18dc3/test/cases/_tmp
[STDERR  ] 2017-06-06T11:28:06.638956574Z: + [ -f /tmp/with_clone12b18dc3/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T11:28:06.639014392Z: + . /tmp/with_clone12b18dc3/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T11:28:06.639080752Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone12b18dc3/test/cases/../../examples
[STDERR  ] 2017-06-06T11:28:06.639118029Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T11:28:06.639172189Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T11:28:06.639239883Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T11:28:06.639297737Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T11:28:07.944535174Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T11:28:08.005236827Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T11:28:08.005249923Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T11:28:08.008499242Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T11:28:08.022069972Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-06T11:28:08.1493239Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T11:28:08.215103297Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T11:28:08.215196954Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T11:28:08.215228436Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T11:28:08.215261352Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T11:28:08.662601986Z:  ---> Using cache
[STDOUT  ] 2017-06-06T11:28:08.662722049Z:  ---> f0cbf6abfeff
[STDOUT  ] 2017-06-06T11:28:08.662754214Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T11:28:08.680014219Z:  ---> Using cache
[STDOUT  ] 2017-06-06T11:28:08.680058882Z:  ---> dea6f2ffc37f
[STDOUT  ] 2017-06-06T11:28:08.680081122Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T11:28:08.680164345Z:  ---> Using cache
[STDOUT  ] 2017-06-06T11:28:08.680206348Z:  ---> 86d70d5ffa4a
[STDOUT  ] 2017-06-06T11:28:08.68023504Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T11:28:08.680281286Z:  ---> Using cache
[STDOUT  ] 2017-06-06T11:28:08.680331404Z:  ---> a19285fc0078
[STDOUT  ] 2017-06-06T11:28:08.680360892Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T11:28:08.680390729Z:  ---> Using cache
[STDOUT  ] 2017-06-06T11:28:08.680419703Z:  ---> ea9aa5cb89b9
[STDOUT  ] 2017-06-06T11:28:08.680459387Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T11:28:08.680507506Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T11:28:08.680529785Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T11:28:09.158200537Z:  ---> 6e8226ce474c
[STDOUT  ] 2017-06-06T11:28:09.175614938Z: Removing intermediate container 19ff3855b1f5
[STDOUT  ] 2017-06-06T11:28:09.175646819Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T11:28:09.637944413Z:  ---> 8ca955ab43bd
[STDOUT  ] 2017-06-06T11:28:09.655417268Z: Removing intermediate container 77909c61b508
[STDOUT  ] 2017-06-06T11:28:09.65544774Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T11:28:09.779146081Z:  ---> Running in 95f7657adf64
[STDOUT  ] 2017-06-06T11:28:09.982715908Z:  ---> 16875e2b1280
[STDOUT  ] 2017-06-06T11:28:10.000049108Z: Removing intermediate container 95f7657adf64
[STDOUT  ] 2017-06-06T11:28:10.000086011Z: Successfully built 16875e2b1280
[STDOUT  ] 2017-06-06T11:28:10.000100999Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T11:28:10.082904232Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T11:28:10.092564242Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T11:28:15.517047393Z: Add init containers:
[STDERR  ] 2017-06-06T11:28:15.517118304Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T11:28:16.912486707Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T11:28:18.762718249Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-06T11:28:25.829091604Z: Add onboot containers:
[STDERR  ] 2017-06-06T11:28:25.82917829Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T11:28:26.387760652Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T11:28:27.785776739Z: Create outputs:
[STDERR  ] 2017-06-06T11:28:33.719643699Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T11:28:33.996493208Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T11:28:33.996663257Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T11:28:57.183624891Z: + clean_up
[STDERR  ] 2017-06-06T11:28:57.183639279Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T11:28:57.239192792Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T11:28:57.239254162Z: Deleted: sha256:16875e2b12805de77af62e2d34f037a63c054e5bfd8716b135ab67aca73e5d5d
[STDOUT  ] 2017-06-06T11:28:57.23927002Z: Deleted: sha256:8ca955ab43bdf4576a4ba1fbdc9be31377199e0ae6a443f14991048076b2e46b
[STDOUT  ] 2017-06-06T11:28:57.239287343Z: Deleted: sha256:0d9f4472f8b2612ad15e1888101ab491773f240650dc49059557299ab4876770
[STDOUT  ] 2017-06-06T11:28:57.239302335Z: Deleted: sha256:6e8226ce474c7ea70b7554976b2a7bc767d06981bbafa169f6fd2b5a520b1eab
[STDOUT  ] 2017-06-06T11:28:57.239316839Z: Deleted: sha256:424e85069cfedc73a02c984a2748d512fb6290b084d496e0d0bc7ddf59c8a7a4
[STDERR  ] 2017-06-06T11:28:57.240934141Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 50.63s
