[INFO    ] 2017-05-30T17:14:09.94899876Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone197c4a93/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T17:14:09.949093112Z: Running command: [/bin/sh -x /tmp/with_clone197c4a93/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T17:14:09.96434139Z: + set -e
[STDERR  ] 2017-05-30T17:14:09.96435224Z: + . /tmp/with_clone197c4a93/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T17:14:09.964361107Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T17:14:09.964370839Z: + LINUXKIT_TMPDIR=/tmp/with_clone197c4a93/test/cases/_tmp
[STDERR  ] 2017-05-30T17:14:09.964375136Z: + [ -f /tmp/with_clone197c4a93/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T17:14:09.964386327Z: + . /tmp/with_clone197c4a93/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T17:14:09.964396118Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone197c4a93/test/cases/../../examples
[STDERR  ] 2017-05-30T17:14:09.964408094Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T17:14:09.964416007Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T17:14:09.964423829Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T17:14:09.964427636Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T17:14:11.547196711Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-30T17:14:11.605260615Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T17:14:11.605281148Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T17:14:11.608327135Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T17:14:11.620176022Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-30T17:14:11.796272971Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T17:14:11.855088085Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T17:14:11.855154987Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T17:14:11.855182193Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T17:14:11.855222353Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T17:14:12.30657846Z:  ---> Using cache
[STDOUT  ] 2017-05-30T17:14:12.306658727Z:  ---> a2acd2d195dd
[STDOUT  ] 2017-05-30T17:14:12.30668998Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T17:14:12.32369209Z:  ---> Using cache
[STDOUT  ] 2017-05-30T17:14:12.323719257Z:  ---> f856074bea82
[STDOUT  ] 2017-05-30T17:14:12.323748471Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T17:14:12.323762852Z:  ---> Using cache
[STDOUT  ] 2017-05-30T17:14:12.323788628Z:  ---> bd8aca6d112a
[STDOUT  ] 2017-05-30T17:14:12.323805841Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T17:14:12.323851815Z:  ---> Using cache
[STDOUT  ] 2017-05-30T17:14:12.323868449Z:  ---> f95336a6638d
[STDOUT  ] 2017-05-30T17:14:12.323887555Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T17:14:12.323913312Z:  ---> Using cache
[STDOUT  ] 2017-05-30T17:14:12.323927212Z:  ---> a8c1fc2a3340
[STDOUT  ] 2017-05-30T17:14:12.32395215Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T17:14:12.323985662Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T17:14:12.32402388Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T17:14:12.837713489Z:  ---> 7e77ab29935a
[STDOUT  ] 2017-05-30T17:14:12.854524165Z: Removing intermediate container 0159ccdc6dd7
[STDOUT  ] 2017-05-30T17:14:12.854555917Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T17:14:13.357528645Z:  ---> 055f88978926
[STDOUT  ] 2017-05-30T17:14:13.374261017Z: Removing intermediate container dfbafd109745
[STDOUT  ] 2017-05-30T17:14:13.374362779Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T17:14:13.482970244Z:  ---> Running in 9e1816c6822a
[STDOUT  ] 2017-05-30T17:14:13.691314246Z:  ---> a12b112a05f7
[STDOUT  ] 2017-05-30T17:14:13.708284775Z: Removing intermediate container 9e1816c6822a
[STDOUT  ] 2017-05-30T17:14:13.708310056Z: Successfully built a12b112a05f7
[STDOUT  ] 2017-05-30T17:14:13.708340209Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T17:14:13.809774544Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T17:14:13.818065927Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T17:14:16.838530556Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T17:14:16.838595854Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T17:14:25.181020345Z: Add init containers:
[STDERR  ] 2017-05-30T17:14:25.181070631Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T17:14:25.181090576Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T17:14:28.257899654Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T17:14:28.257996901Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T17:14:31.678044177Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T17:14:31.678133642Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T17:14:40.586393838Z: Add onboot containers:
[STDERR  ] 2017-05-30T17:14:40.586479335Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T17:14:41.156750579Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-30T17:14:41.193884845Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-30T17:14:44.370281977Z: Create outputs:
[STDERR  ] 2017-05-30T17:14:50.112676713Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T17:14:50.370487728Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T17:14:50.370511948Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T17:15:13.841851956Z: + clean_up
[STDERR  ] 2017-05-30T17:15:13.841879128Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T17:15:13.896998316Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T17:15:13.897085686Z: Deleted: sha256:a12b112a05f7d85a3168e933e523323a83ed63963a1c98f1ac882cbc45c979ef
[STDOUT  ] 2017-05-30T17:15:13.897098947Z: Deleted: sha256:055f88978926424f359d1b6bc6ce8ef8a1dcd6bbf314366964e10e6f5ce8b39c
[STDOUT  ] 2017-05-30T17:15:13.897114705Z: Deleted: sha256:df1455208bebf27d601e006f14b6e4bd04414ab839adafd7b6c19a282182465e
[STDOUT  ] 2017-05-30T17:15:13.897136966Z: Deleted: sha256:7e77ab29935ab168cb3f1f6ea11d5bcaee9fa349352406d501b5a4ca6386d0fb
[STDOUT  ] 2017-05-30T17:15:13.89714716Z: Deleted: sha256:bf238f3ddaa163160dac735ae8b6a1f840ff34e7ad0f30cc05461f47debdf364
[STDERR  ] 2017-05-30T17:15:13.900577535Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 63.97s
