[INFO    ] 2017-05-23T20:54:34.13679145Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-23T20:54:34.136849096Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-23T20:54:34.15257511Z: + set -e
[STDERR  ] 2017-05-23T20:54:34.152624195Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-23T20:54:34.152677032Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-23T20:54:34.152706863Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-05-23T20:54:34.15273862Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-23T20:54:34.152763574Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-23T20:54:34.152791353Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-05-23T20:54:34.152812825Z: + RT_CANCEL=253
[STDERR  ] 2017-05-23T20:54:34.152834583Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-23T20:54:34.15286395Z: + trap clean_up EXIT
[STDERR  ] 2017-05-23T20:54:34.152891414Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-23T20:54:35.290515418Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-23T20:54:35.290621791Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-23T20:54:35.290683717Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T20:54:35.291344145Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-23T20:54:35.37186739Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-05-23T20:54:35.374224797Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-23T20:54:35.450617452Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-23T20:54:35.45064243Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-23T20:54:36.517047772Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-05-23T20:54:36.517105154Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-05-23T20:54:36.523523034Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-05-23T20:54:39.2838212Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-05-23T20:54:39.283928477Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-05-23T20:54:45.153630963Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-05-23T20:54:45.160932196Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-23T20:54:45.164433767Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-05-23T20:54:45.164715655Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-23T20:54:45.164803504Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-23T20:54:47.359649878Z:  ---> dd02fc1d5908
[STDOUT  ] 2017-05-23T20:54:47.373740966Z: Removing intermediate container 4e145d8bb7ce
[STDOUT  ] 2017-05-23T20:54:47.373834258Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-23T20:54:47.437940833Z:  ---> Running in 62921aaa400e
[STDOUT  ] 2017-05-23T20:54:53.261852949Z:  ---> f989d963ce30
[STDOUT  ] 2017-05-23T20:54:53.578151922Z: Removing intermediate container 62921aaa400e
[STDOUT  ] 2017-05-23T20:54:53.578306609Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-23T20:54:53.741201258Z:  ---> feb55fcc8c8d
[STDOUT  ] 2017-05-23T20:54:53.748642528Z: Removing intermediate container 53eecda4d607
[STDOUT  ] 2017-05-23T20:54:53.748791325Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-23T20:54:53.924103348Z:  ---> 0cbea253184b
[STDOUT  ] 2017-05-23T20:54:53.929738526Z: Removing intermediate container 8e6613f4f32c
[STDOUT  ] 2017-05-23T20:54:53.929832333Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-23T20:54:53.996610459Z:  ---> Running in ad20a680f19e
[STDOUT  ] 2017-05-23T20:54:54.186405198Z: make -C /usr/src/linux-headers-4.9.29-linuxkit M=/kmod modules
[STDOUT  ] 2017-05-23T20:54:54.187634197Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-23T20:54:54.999882188Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-05-23T20:54:55.178059216Z:   Building modules, stage 2.
[STDOUT  ] 2017-05-23T20:54:55.18497459Z:   MODPOST 1 modules
[STDOUT  ] 2017-05-23T20:54:55.195145986Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-05-23T20:54:55.360093057Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-05-23T20:54:55.362264582Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.29-linuxkit'
[STDOUT  ] 2017-05-23T20:54:55.519156965Z:  ---> b88756c3b385
[STDOUT  ] 2017-05-23T20:54:55.525786125Z: Removing intermediate container ad20a680f19e
[STDOUT  ] 2017-05-23T20:54:55.525874737Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-23T20:54:56.603313399Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-05-23T20:54:56.62678808Z: cfc728c1c558: Already exists
[STDOUT  ] 2017-05-23T20:54:57.074386462Z: Digest: sha256:c0537ff6a5218ef531ece93d4984efc99bbf3f7497c0a7726c88e2bb7584dc96
[STDOUT  ] 2017-05-23T20:54:57.084747481Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-05-23T20:54:57.085123328Z:  ---> 02674b9cb179
[STDOUT  ] 2017-05-23T20:54:57.085220709Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-23T20:54:57.27102124Z:  ---> 1c6db7215c2f
[STDOUT  ] 2017-05-23T20:54:57.277036538Z: Removing intermediate container 2da40c60687d
[STDOUT  ] 2017-05-23T20:54:57.277177534Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-23T20:54:57.44093596Z:  ---> bc23bf6b46db
[STDOUT  ] 2017-05-23T20:54:57.449700295Z: Removing intermediate container a37c3f1a5eeb
[STDOUT  ] 2017-05-23T20:54:57.449891163Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-23T20:54:57.515562215Z:  ---> Running in adaf54ff2ee1
[STDOUT  ] 2017-05-23T20:54:57.608699818Z:  ---> 8a9f3b7cb889
[STDOUT  ] 2017-05-23T20:54:57.618731858Z: Removing intermediate container adaf54ff2ee1
[STDOUT  ] 2017-05-23T20:54:57.618865555Z: Successfully built 8a9f3b7cb889
[STDOUT  ] 2017-05-23T20:54:57.62602022Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-23T20:54:57.642572898Z: + moby build kmod
[STDERR  ] 2017-05-23T20:54:57.652535315Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-23T20:54:58.206920487Z: Add init containers:
[STDERR  ] 2017-05-23T20:54:58.207020315Z: Process init image: linuxkit/init:cbd7ae748f0a082516501a3e914fa0c924ee941e
[STDERR  ] 2017-05-23T20:54:58.346952404Z: Process init image: linuxkit/runc:24dfe632ed3ff53a026ee3fac046fd544434e2d6
[STDERR  ] 2017-05-23T20:54:58.4826978Z: Process init image: linuxkit/containerd:f1130450206d4f64f0ddc13d15bb68435aa1ff61
[STDERR  ] 2017-05-23T20:54:59.040273291Z: Add onboot containers:
[STDERR  ] 2017-05-23T20:54:59.040317963Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-23T20:54:59.216897356Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-23T20:54:59.384624238Z: Create outputs:
[STDERR  ] 2017-05-23T20:55:05.200866029Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-23T20:55:05.2569201Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-23T20:55:05.257865255Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-23T20:55:05.275065498Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-05-23T20:55:22.218264026Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-05-23T20:55:22.220655022Z: time="2017-05-23T20:55:22Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-05-23T20:55:22.22066837Z: + clean_up
[STDERR  ] 2017-05-23T20:55:22.220682284Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-23T20:55:22.252221011Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-23T20:55:22.252261095Z: Deleted: sha256:8a9f3b7cb889f80f04111474350f53e6d5a0f145396ed0459ab7a8581cc6530a
[STDOUT  ] 2017-05-23T20:55:22.252268402Z: Deleted: sha256:bc23bf6b46dbc5c1f3b5f28c131edc6493bd5dc05d327bceca1888a237a6b255
[STDOUT  ] 2017-05-23T20:55:22.252271748Z: Deleted: sha256:f0a841dcfdac925914496acd786f4dc2fd69fb81c8a9b9a680ec11655fb4c681
[STDOUT  ] 2017-05-23T20:55:22.252282089Z: Deleted: sha256:1c6db7215c2fb60b175586cafefa0767d55b423d0c0c2e4e1f500666cd6e5e33
[STDOUT  ] 2017-05-23T20:55:22.252295554Z: Deleted: sha256:88b78e7ffe803aa6368d5bbcdf1a3d4770eb21305c6ad49b1b91db8fe2d7a2b3
[STDERR  ] 2017-05-23T20:55:22.252886344Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 48.13s
