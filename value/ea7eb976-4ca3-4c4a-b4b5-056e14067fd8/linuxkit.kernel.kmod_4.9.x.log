[INFO    ] 2017-05-29T15:39:39.197967196Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_cloned9573fb/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-29T15:39:39.198091993Z: Running command: [/bin/sh -x /tmp/with_cloned9573fb/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-29T15:39:39.199293899Z: + set -e
[STDERR  ] 2017-05-29T15:39:39.199350639Z: + . /tmp/with_cloned9573fb/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-29T15:39:39.199408162Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-29T15:39:39.199472099Z: + LINUXKIT_TMPDIR=/tmp/with_cloned9573fb/test/cases/_tmp
[STDERR  ] 2017-05-29T15:39:39.199523509Z: + [ -f /tmp/with_cloned9573fb/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-29T15:39:39.199567265Z: + . /tmp/with_cloned9573fb/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-29T15:39:39.199606248Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_cloned9573fb/test/cases/../../examples
[STDERR  ] 2017-05-29T15:39:39.199665807Z: + RT_CANCEL=253
[STDERR  ] 2017-05-29T15:39:39.199693159Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-29T15:39:39.199734199Z: + trap clean_up EXIT
[STDERR  ] 2017-05-29T15:39:39.199767792Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-29T15:39:40.488712803Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-29T15:39:40.554243009Z: Digest: sha256:41235c0c1093801dea6bf8acfb31091fcddd4848a752a77b89729f1e6320bbc7
[STDOUT  ] 2017-05-29T15:39:40.554266529Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-29T15:39:40.557398629Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-29T15:39:40.569020086Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-29T15:39:40.731760223Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-29T15:39:40.794092143Z:  ---> 3173edc4f8bb
[STDOUT  ] 2017-05-29T15:39:40.794143976Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-29T15:39:40.794154897Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-29T15:39:40.794159926Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-29T15:39:41.242338679Z:  ---> Using cache
[STDOUT  ] 2017-05-29T15:39:41.242407064Z:  ---> 59e822de06d5
[STDOUT  ] 2017-05-29T15:39:41.242416567Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-29T15:39:41.258766286Z:  ---> Using cache
[STDOUT  ] 2017-05-29T15:39:41.25878133Z:  ---> 6c7a1a3afacd
[STDOUT  ] 2017-05-29T15:39:41.258805291Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-29T15:39:41.258819368Z:  ---> Using cache
[STDOUT  ] 2017-05-29T15:39:41.258833041Z:  ---> ee51037650ed
[STDOUT  ] 2017-05-29T15:39:41.258838774Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-29T15:39:41.258851296Z:  ---> Using cache
[STDOUT  ] 2017-05-29T15:39:41.258869525Z:  ---> a3b898f6611d
[STDOUT  ] 2017-05-29T15:39:41.258879358Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-29T15:39:41.25888752Z:  ---> Using cache
[STDOUT  ] 2017-05-29T15:39:41.258897079Z:  ---> 8d0b9d49de91
[STDOUT  ] 2017-05-29T15:39:41.258919785Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-29T15:39:41.25893312Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-29T15:39:41.25894463Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-29T15:39:41.724753609Z:  ---> 7f43194d4ee7
[STDOUT  ] 2017-05-29T15:39:41.74104454Z: Removing intermediate container 08128b878158
[STDOUT  ] 2017-05-29T15:39:41.741060623Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-29T15:39:42.236426637Z:  ---> a854acf409be
[STDOUT  ] 2017-05-29T15:39:42.252777241Z: Removing intermediate container e21579440c39
[STDOUT  ] 2017-05-29T15:39:42.252791222Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-29T15:39:42.369562587Z:  ---> Running in 53002dc12da6
[STDOUT  ] 2017-05-29T15:39:42.573119645Z:  ---> 82bce20a378a
[STDOUT  ] 2017-05-29T15:39:42.589412154Z: Removing intermediate container 53002dc12da6
[STDOUT  ] 2017-05-29T15:39:42.589427466Z: Successfully built 82bce20a378a
[STDOUT  ] 2017-05-29T15:39:42.589442072Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-29T15:39:42.673151026Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-29T15:39:42.683776253Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-29T15:39:45.436829697Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-29T15:39:45.436879419Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-29T15:39:51.966668362Z: Add init containers:
[STDERR  ] 2017-05-29T15:39:51.966685953Z: Process init image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-29T15:39:51.966720014Z: Pull image: linuxkit/init:4fc8aa82ab34d62d510575c8fbe0c58b7ba9c480
[STDERR  ] 2017-05-29T15:39:55.020734318Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-29T15:39:55.020775863Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-29T15:39:58.314250055Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-29T15:39:58.314335132Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-29T15:40:05.036784795Z: Add onboot containers:
[STDERR  ] 2017-05-29T15:40:05.036821162Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-29T15:40:05.535332177Z:   Create OCI config for linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-29T15:40:05.57741945Z: Pull image: linuxkit/poweroff:a8f1e4ad8d459f1fdaad9e4b007512cb3b504ae8
[STDERR  ] 2017-05-29T15:40:08.672292501Z: Create outputs:
[STDERR  ] 2017-05-29T15:40:14.5635092Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-29T15:40:14.750165841Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-29T15:40:14.750323096Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-29T15:40:39.810803141Z: + clean_up
[STDERR  ] 2017-05-29T15:40:39.810826698Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-29T15:40:39.865355388Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-29T15:40:39.865377118Z: Deleted: sha256:82bce20a378a31834979feedee684f6fbbdc64e1ca96bafb20e4303fe0dcc741
[STDOUT  ] 2017-05-29T15:40:39.865389916Z: Deleted: sha256:a854acf409bed5c24d0c92c6787f2d1e9a7dbc1330274f22043da580acd038ab
[STDOUT  ] 2017-05-29T15:40:39.865402996Z: Deleted: sha256:8ed5fdd862ab33c30da0c011c79cee0b586d70f9e9ce46b4c2f4ca47086fb597
[STDOUT  ] 2017-05-29T15:40:39.865415789Z: Deleted: sha256:7f43194d4ee712c49d918890436421d63f49ae91abc47af3427b20c6d6d23fa5
[STDOUT  ] 2017-05-29T15:40:39.865428243Z: Deleted: sha256:e9163a3bab30afb2b3a4947dc0e016527e9aa30c03f89209ef86eb42dc1b5964
[STDERR  ] 2017-05-29T15:40:39.868355671Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 60.69s
