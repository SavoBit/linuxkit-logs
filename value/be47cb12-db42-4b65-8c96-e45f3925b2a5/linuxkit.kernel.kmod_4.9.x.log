[INFO    ] 2017-05-30T19:35:47.418096578Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone32e2be61/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-05-30T19:35:47.418176223Z: Running command: [/bin/sh -x /tmp/with_clone32e2be61/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-05-30T19:35:47.431326799Z: + set -e
[STDERR  ] 2017-05-30T19:35:47.431345296Z: + . /tmp/with_clone32e2be61/test/cases/_lib/lib.sh
[STDERR  ] 2017-05-30T19:35:47.431351322Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-05-30T19:35:47.431374725Z: + LINUXKIT_TMPDIR=/tmp/with_clone32e2be61/test/cases/_tmp
[STDERR  ] 2017-05-30T19:35:47.431382493Z: + [ -f /tmp/with_clone32e2be61/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-05-30T19:35:47.431404758Z: + . /tmp/with_clone32e2be61/test/cases/_tmp/env.sh
[STDERR  ] 2017-05-30T19:35:47.431437873Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone32e2be61/test/cases/../../examples
[STDERR  ] 2017-05-30T19:35:47.431445368Z: + RT_CANCEL=253
[STDERR  ] 2017-05-30T19:35:47.431457237Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-05-30T19:35:47.431476548Z: + trap clean_up EXIT
[STDERR  ] 2017-05-30T19:35:47.431489471Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-05-30T19:35:49.456899609Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-05-30T19:35:49.456993854Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-05-30T19:35:49.456999132Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T19:35:49.460348774Z: + docker build -t kmod-test .
[STDOUT  ] 2017-05-30T19:35:49.475248107Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-05-30T19:35:49.975905408Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-05-30T19:35:49.97648303Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-05-30T19:35:49.976519034Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-05-30T19:35:49.976550427Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-05-30T19:35:49.976565202Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-05-30T19:35:50.479810978Z:  ---> Using cache
[STDOUT  ] 2017-05-30T19:35:50.479837044Z:  ---> a2acd2d195dd
[STDOUT  ] 2017-05-30T19:35:50.479855891Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-05-30T19:35:50.479867918Z:  ---> Using cache
[STDOUT  ] 2017-05-30T19:35:50.479875898Z:  ---> f856074bea82
[STDOUT  ] 2017-05-30T19:35:50.479884221Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-05-30T19:35:50.480430091Z:  ---> Using cache
[STDOUT  ] 2017-05-30T19:35:50.480454073Z:  ---> bd8aca6d112a
[STDOUT  ] 2017-05-30T19:35:50.48047751Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-05-30T19:35:50.480485492Z:  ---> Using cache
[STDOUT  ] 2017-05-30T19:35:50.480498625Z:  ---> f95336a6638d
[STDOUT  ] 2017-05-30T19:35:50.480526389Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-05-30T19:35:50.480541203Z:  ---> Using cache
[STDOUT  ] 2017-05-30T19:35:50.480548569Z:  ---> a8c1fc2a3340
[STDOUT  ] 2017-05-30T19:35:50.480595418Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-05-30T19:35:50.480602762Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-05-30T19:35:50.480615279Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-05-30T19:35:51.048591855Z:  ---> 1230609b1258
[STDOUT  ] 2017-05-30T19:35:51.048620688Z: Removing intermediate container 404c77438a4a
[STDOUT  ] 2017-05-30T19:35:51.04866208Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-05-30T19:35:51.536460967Z:  ---> d95965b9e1b8
[STDOUT  ] 2017-05-30T19:35:51.537846427Z: Removing intermediate container 1f77e0b86211
[STDOUT  ] 2017-05-30T19:35:51.537863342Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-05-30T19:35:51.651198673Z:  ---> Running in 091141f77cf7
[STDOUT  ] 2017-05-30T19:35:51.860682227Z:  ---> e548ebcd9d1e
[STDOUT  ] 2017-05-30T19:35:51.876381613Z: Removing intermediate container 091141f77cf7
[STDOUT  ] 2017-05-30T19:35:51.876423712Z: Successfully built e548ebcd9d1e
[STDOUT  ] 2017-05-30T19:35:51.876876974Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-05-30T19:35:51.961585696Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-05-30T19:35:51.970688534Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T19:35:54.96756345Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T19:35:54.967604566Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-05-30T19:36:04.456141277Z: Add init containers:
[STDERR  ] 2017-05-30T19:36:04.456202239Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T19:36:04.456233267Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-05-30T19:36:07.860303297Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T19:36:07.860394482Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-05-30T19:36:11.745498356Z: Process init image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T19:36:11.745574969Z: Pull image: linuxkit/containerd:b1766e4c4c09f63ac4925a6e4612852a93f7e73b
[STDERR  ] 2017-05-30T19:36:21.306203331Z: Add onboot containers:
[STDERR  ] 2017-05-30T19:36:21.306261312Z:   Create OCI config for kmod-test
[STDERR  ] 2017-05-30T19:36:21.943792358Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-30T19:36:21.981173324Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-05-30T19:36:25.25202827Z: Create outputs:
[STDERR  ] 2017-05-30T19:36:37.162586661Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-05-30T19:36:37.477623543Z: + linuxkit run qemu kmod
[STDERR  ] 2017-05-30T19:36:37.477933971Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-05-30T19:37:28.840692719Z: + clean_up
[STDERR  ] 2017-05-30T19:37:28.840777722Z: + docker rmi kmod-test
[STDOUT  ] 2017-05-30T19:37:28.919876558Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-05-30T19:37:28.91989925Z: Deleted: sha256:e548ebcd9d1ed87781bbbb0173bfcffa4881fd68a5336344c0e60082e858f857
[STDOUT  ] 2017-05-30T19:37:28.91992593Z: Deleted: sha256:d95965b9e1b83015ed9808b85eddd45e281f459e33127e71f75e62718af886ae
[STDOUT  ] 2017-05-30T19:37:28.91994177Z: Deleted: sha256:af45b266d8f86078f918a7435716b0756d89a291ee1d1c48fa8b08160abb76e0
[STDOUT  ] 2017-05-30T19:37:28.919955901Z: Deleted: sha256:1230609b1258291bbe03e1262d5eb0831733c67584d100b5a5411c31bdd6e56b
[STDOUT  ] 2017-05-30T19:37:28.919970333Z: Deleted: sha256:bf238f3ddaa163160dac735ae8b6a1f840ff34e7ad0f30cc05461f47debdf364
[STDERR  ] 2017-05-30T19:37:28.922261254Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 101.57s
