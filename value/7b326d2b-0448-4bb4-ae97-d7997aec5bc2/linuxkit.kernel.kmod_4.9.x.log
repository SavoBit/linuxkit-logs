[INFO    ] 2017-06-01T21:34:14.223877394Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone11e3d2e6/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-01T21:34:14.22397543Z: Running command: [/bin/sh -x /tmp/with_clone11e3d2e6/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-01T21:34:14.225393954Z: + set -e
[STDERR  ] 2017-06-01T21:34:14.225469103Z: + . /tmp/with_clone11e3d2e6/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-01T21:34:14.225548028Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-01T21:34:14.225664394Z: + LINUXKIT_TMPDIR=/tmp/with_clone11e3d2e6/test/cases/_tmp
[STDERR  ] 2017-06-01T21:34:14.2257285Z: + [ -f /tmp/with_clone11e3d2e6/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-01T21:34:14.225826812Z: + . /tmp/with_clone11e3d2e6/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-01T21:34:14.225893204Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone11e3d2e6/test/cases/../../examples
[STDERR  ] 2017-06-01T21:34:14.225963689Z: + RT_CANCEL=253
[STDERR  ] 2017-06-01T21:34:14.226009289Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-01T21:34:14.226067443Z: + trap clean_up EXIT
[STDERR  ] 2017-06-01T21:34:14.226157087Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-01T21:34:15.674719878Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-01T21:34:15.735053032Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-01T21:34:15.735074401Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:34:15.738640455Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-01T21:34:15.755439556Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-01T21:34:15.933869576Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-01T21:34:15.994958777Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-01T21:34:15.994988071Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-01T21:34:15.994996134Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-01T21:34:15.995016262Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-01T21:34:16.446410998Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:34:16.446477236Z:  ---> 60a84ce86bce
[STDOUT  ] 2017-06-01T21:34:16.446491976Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-01T21:34:16.463847199Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:34:16.463865541Z:  ---> dda20f4b7bd0
[STDOUT  ] 2017-06-01T21:34:16.463879598Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-01T21:34:16.463892863Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:34:16.463906128Z:  ---> 6554433ac9bc
[STDOUT  ] 2017-06-01T21:34:16.463935048Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-01T21:34:16.463959473Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:34:16.463966652Z:  ---> ec8593efcf4d
[STDOUT  ] 2017-06-01T21:34:16.463986514Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-01T21:34:16.463999524Z:  ---> Using cache
[STDOUT  ] 2017-06-01T21:34:16.464012627Z:  ---> 7a8a9087ffbb
[STDOUT  ] 2017-06-01T21:34:16.464020474Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-01T21:34:16.464042054Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-01T21:34:16.464055092Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-01T21:34:17.004962421Z:  ---> cb7f72f8f10b
[STDOUT  ] 2017-06-01T21:34:17.004976483Z: Removing intermediate container f2f5710bdea0
[STDOUT  ] 2017-06-01T21:34:17.004989334Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-01T21:34:17.504346398Z:  ---> e7b01d212060
[STDOUT  ] 2017-06-01T21:34:17.504369514Z: Removing intermediate container 7b89f2b43633
[STDOUT  ] 2017-06-01T21:34:17.50438373Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-01T21:34:17.609319362Z:  ---> Running in 3f5f44941af7
[STDOUT  ] 2017-06-01T21:34:17.749757489Z:  ---> 4fceaf0c58cc
[STDOUT  ] 2017-06-01T21:34:17.749822072Z: Removing intermediate container 3f5f44941af7
[STDOUT  ] 2017-06-01T21:34:17.749828669Z: Successfully built 4fceaf0c58cc
[STDOUT  ] 2017-06-01T21:34:17.767099104Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-01T21:34:17.858485502Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-01T21:34:17.867203374Z: Pull kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:34:20.834754731Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:34:20.834796802Z: Pull image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-01T21:34:29.323818267Z: Add init containers:
[STDERR  ] 2017-06-01T21:34:29.323884071Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T21:34:29.323920476Z: Pull image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-01T21:34:33.057860554Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T21:34:33.057887365Z: Pull image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-01T21:34:36.680234356Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T21:34:36.680277643Z: Pull image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-01T21:34:44.443300122Z: Add onboot containers:
[STDERR  ] 2017-06-01T21:34:44.443345841Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-01T21:34:45.01272376Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T21:34:45.05099682Z: Pull image: linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-01T21:34:48.177885236Z: Create outputs:
[STDERR  ] 2017-06-01T21:34:54.145806543Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-01T21:34:54.382357753Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-01T21:34:54.390964426Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-01T21:35:18.785173426Z: + clean_up
[STDERR  ] 2017-06-01T21:35:18.785203229Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-01T21:35:18.837711714Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-01T21:35:18.837732709Z: Deleted: sha256:4fceaf0c58cc01a626a55cd7bd9958c50dc6fc0ffda9daa7cb25afd56a9dd33c
[STDOUT  ] 2017-06-01T21:35:18.837747102Z: Deleted: sha256:e7b01d212060b0e9b3ae7d774f4e54322d993de8dda12ae55130f16718228590
[STDOUT  ] 2017-06-01T21:35:18.837760699Z: Deleted: sha256:772d32158a42c80482b58c5b6a20db3611c495a29d7e9be1df6442b73b87b234
[STDOUT  ] 2017-06-01T21:35:18.837774216Z: Deleted: sha256:cb7f72f8f10b68093c21eba2bf8ee7c44b6ac6cc5027fb261d3f698525895d11
[STDOUT  ] 2017-06-01T21:35:18.837788174Z: Deleted: sha256:4f1c836a6d9a56a2bdb77fb8532b9fd941257636fce2c58cc9d4f3b7f6fdb2cf
[STDERR  ] 2017-06-01T21:35:18.839140183Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 64.63s
