[INFO    ] 2017-06-06T19:57:45.495994208Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-06T19:57:45.496103249Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-06T19:57:45.525911637Z: + set -e
[STDERR  ] 2017-06-06T19:57:45.525959156Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-06T19:57:45.526037757Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-06T19:57:45.526096481Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-06-06T19:57:45.526132248Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-06T19:57:45.526177793Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-06T19:57:45.526212637Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-06-06T19:57:45.526258101Z: + RT_CANCEL=253
[STDERR  ] 2017-06-06T19:57:45.52627965Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-06T19:57:45.52632015Z: + trap clean_up EXIT
[STDERR  ] 2017-06-06T19:57:45.526356192Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-06T19:57:46.75635709Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-06T19:57:46.756501492Z: Digest: sha256:a0bc40648edf7e73b9801f2887b0aefab9ec1878dcbe3bcff8ea48ebfffdb4d7
[STDOUT  ] 2017-06-06T19:57:46.756571261Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T19:57:46.75745784Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-06T19:57:46.788746359Z: Sending build context to Docker daemon  9.216kB
[STDOUT  ] 2017-06-06T19:57:46.823561117Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-06T19:57:46.858845091Z:  ---> 15f175ba5ede
[STDOUT  ] 2017-06-06T19:57:46.858884317Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-06T19:57:48.003550215Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-06-06T19:57:48.016686616Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-06-06T19:57:48.045288218Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-06-06T19:57:52.008509457Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-06-06T19:57:52.008611942Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-06-06T19:58:01.076871366Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-06-06T19:58:01.089054899Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-06T19:58:01.094454186Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-06-06T19:58:01.095166971Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-06T19:58:01.095352222Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-06T19:58:03.54796204Z:  ---> f81b671c539f
[STDOUT  ] 2017-06-06T19:58:03.569516918Z: Removing intermediate container 65224a367b2a
[STDOUT  ] 2017-06-06T19:58:03.56967119Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-06T19:58:03.634251251Z:  ---> Running in 1ebabd09f061
[STDOUT  ] 2017-06-06T19:58:12.174877287Z:  ---> 428ac4b4f3bf
[STDOUT  ] 2017-06-06T19:58:12.64693701Z: Removing intermediate container 1ebabd09f061
[STDOUT  ] 2017-06-06T19:58:12.647088009Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-06T19:58:12.862037396Z:  ---> f83465472156
[STDOUT  ] 2017-06-06T19:58:12.874555101Z: Removing intermediate container 3f80e25b5592
[STDOUT  ] 2017-06-06T19:58:12.874730278Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-06T19:58:13.151589305Z:  ---> c982538ec4fe
[STDOUT  ] 2017-06-06T19:58:13.16301675Z: Removing intermediate container b83d7bb14051
[STDOUT  ] 2017-06-06T19:58:13.163179309Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-06T19:58:13.243356538Z:  ---> Running in 071b54c534e1
[STDOUT  ] 2017-06-06T19:58:13.448382872Z: make -C /usr/src/linux-headers-4.9.30-linuxkit M=/kmod modules
[STDOUT  ] 2017-06-06T19:58:13.451998866Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-06T19:58:14.631895698Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-06-06T19:58:14.8780183Z:   Building modules, stage 2.
[STDOUT  ] 2017-06-06T19:58:14.886868828Z:   MODPOST 1 modules
[STDOUT  ] 2017-06-06T19:58:14.89987066Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-06-06T19:58:15.158890631Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-06-06T19:58:15.16305414Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.30-linuxkit'
[STDOUT  ] 2017-06-06T19:58:15.508951171Z:  ---> 5ea006ba359c
[STDOUT  ] 2017-06-06T19:58:15.525000788Z: Removing intermediate container 071b54c534e1
[STDOUT  ] 2017-06-06T19:58:15.525194301Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-06T19:58:16.659802212Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-06-06T19:58:16.714447563Z: 6f821164d5b7: Already exists
[STDOUT  ] 2017-06-06T19:58:17.170017285Z: Digest: sha256:f02537b30c729bb1ee0c67c8bff3a28972bed0abbee8f5520421994c5247b896
[STDOUT  ] 2017-06-06T19:58:17.189869131Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-06-06T19:58:17.190360543Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-06T19:58:17.190481801Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-06T19:58:17.545857861Z:  ---> a23510f73931
[STDOUT  ] 2017-06-06T19:58:17.561840203Z: Removing intermediate container eb8ccdc01f1b
[STDOUT  ] 2017-06-06T19:58:17.562145744Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-06T19:58:17.85858936Z:  ---> 4cd9a19c64c9
[STDOUT  ] 2017-06-06T19:58:17.888570466Z: Removing intermediate container 6799c39aa775
[STDOUT  ] 2017-06-06T19:58:17.88875164Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-06T19:58:18.009104032Z:  ---> Running in 2afee32a8e6c
[STDOUT  ] 2017-06-06T19:58:18.125480245Z:  ---> 0fd30813158c
[STDOUT  ] 2017-06-06T19:58:18.136134594Z: Removing intermediate container 2afee32a8e6c
[STDOUT  ] 2017-06-06T19:58:18.136225953Z: Successfully built 0fd30813158c
[STDOUT  ] 2017-06-06T19:58:18.145860547Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-06T19:58:18.164860509Z: + moby build -output kernel+initrd kmod
[STDERR  ] 2017-06-06T19:58:18.176991129Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-06T19:58:20.083039114Z: Add init containers:
[STDERR  ] 2017-06-06T19:58:20.083089519Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-06T19:58:21.44235604Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-06T19:58:22.802837912Z: Process init image: linuxkit/containerd:deaf5bf838bf7f131c2287ecff3ed9835b0497e2
[STDERR  ] 2017-06-06T19:58:24.626374024Z: Add onboot containers:
[STDERR  ] 2017-06-06T19:58:24.626421937Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-06T19:58:25.069397163Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-06T19:58:26.358215352Z: Create outputs:
[STDERR  ] 2017-06-06T19:58:33.637253621Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-06T19:58:33.689903998Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-06T19:58:33.690935905Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-06T19:58:33.711280171Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-06-06T19:58:55.02500759Z: write /dev/stdout: broken pipe
[STDERR  ] 2017-06-06T19:58:55.028028933Z: time="2017-06-06T19:58:55Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-06-06T19:58:55.028322155Z: + clean_up
[STDERR  ] 2017-06-06T19:58:55.028346907Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-06T19:58:55.071677258Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-06T19:58:55.071703346Z: Deleted: sha256:0fd30813158c5a4976515934276d5cb4a716be133ded36d155ff1ac993b360d9
[STDOUT  ] 2017-06-06T19:58:55.07171089Z: Deleted: sha256:4cd9a19c64c9e5352fd4908fc356dd89412642773b41fe24ef5a864228d31212
[STDOUT  ] 2017-06-06T19:58:55.071721494Z: Deleted: sha256:6bdc1ed4c331946028239c71818a3764e4bc79c33032d3bdf25320dd376ef532
[STDOUT  ] 2017-06-06T19:58:55.071740826Z: Deleted: sha256:a23510f739319cccf5af27478d5e5bef38efb05e74f248bf5e31f09c5952c353
[STDOUT  ] 2017-06-06T19:58:55.071747904Z: Deleted: sha256:3bb72e6b11c02834b597f9c481ee500da4d9f29a0a6c8af8de6277a5d98b1cf6
[STDERR  ] 2017-06-06T19:58:55.072595374Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 69.60s
