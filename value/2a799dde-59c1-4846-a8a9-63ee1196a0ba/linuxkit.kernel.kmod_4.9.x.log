[INFO    ] 2017-07-28T21:32:35.34219964Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/build/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-07-28T21:32:35.342285011Z: Running command: [/bin/sh -x /tmp/build/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-07-28T21:32:35.348438515Z: + set -e
[STDERR  ] 2017-07-28T21:32:35.348519118Z: + . /tmp/build/test/cases/_lib/lib.sh
[STDERR  ] 2017-07-28T21:32:35.348530545Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-07-28T21:32:35.348540819Z: + LINUXKIT_TMPDIR=/tmp/build/test/cases/_tmp
[STDERR  ] 2017-07-28T21:32:35.348550366Z: + [ -f /tmp/build/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-07-28T21:32:35.348560308Z: + . /tmp/build/test/cases/_tmp/env.sh
[STDERR  ] 2017-07-28T21:32:35.348573434Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/build/test/cases/../../examples
[STDERR  ] 2017-07-28T21:32:35.348585694Z: + export LINUXKIT_BLUEPRINTS_DIR=/tmp/build/test/cases/../../blueprints
[STDERR  ] 2017-07-28T21:32:35.348599352Z: + RT_CANCEL=253
[STDERR  ] 2017-07-28T21:32:35.348609045Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-07-28T21:32:35.348619222Z: + trap clean_up EXIT
[STDERR  ] 2017-07-28T21:32:35.348632628Z: + docker pull linuxkit/kernel:4.9.39
[STDOUT  ] 2017-07-28T21:32:36.503382855Z: 4.9.39: Pulling from linuxkit/kernel
[STDOUT  ] 2017-07-28T21:32:36.503484792Z: Digest: sha256:a409547705b00f4dbc6ba09ad67ae3d2c87e5a7a8d8955e310b834b2220b77b0
[STDOUT  ] 2017-07-28T21:32:36.503496552Z: Status: Image is up to date for linuxkit/kernel:4.9.39
[STDERR  ] 2017-07-28T21:32:36.504509655Z: + docker build -t kmod-test .
[STDOUT  ] 2017-07-28T21:32:36.644816808Z: Sending build context to Docker daemon  8.704kB
[STDOUT  ] 2017-07-28T21:32:36.794190022Z: Step 1/11 : FROM linuxkit/kernel:4.9.39 AS ksrc
[STDOUT  ] 2017-07-28T21:32:36.803067525Z:  ---> e626d2ce1db0
[STDOUT  ] 2017-07-28T21:32:36.803130961Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-07-28T21:32:37.953517031Z: 1b396c221af673757703258159ddc8539843b02b: Pulling from linuxkit/kernel-compile
[STDOUT  ] 2017-07-28T21:32:37.95405744Z: 627beaf3eaaf: Already exists
[STDOUT  ] 2017-07-28T21:32:37.97130386Z: 26dc4067def6: Pulling fs layer
[STDOUT  ] 2017-07-28T21:32:41.182755054Z: 26dc4067def6: Verifying Checksum
[STDOUT  ] 2017-07-28T21:32:41.182892828Z: 26dc4067def6: Download complete
[STDOUT  ] 2017-07-28T21:32:47.45297785Z: 26dc4067def6: Pull complete
[STDOUT  ] 2017-07-28T21:32:47.465672187Z: Digest: sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-28T21:32:47.471451089Z: Status: Downloaded newer image for linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b
[STDOUT  ] 2017-07-28T21:32:47.471994656Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-07-28T21:32:47.472020047Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-07-28T21:32:49.411608937Z:  ---> fab8e14a68ea
[STDOUT  ] 2017-07-28T21:32:49.433173315Z: Removing intermediate container 759eb83268a1
[STDOUT  ] 2017-07-28T21:32:49.433233529Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-07-28T21:32:49.505443173Z:  ---> Running in 40796c280465
[STDOUT  ] 2017-07-28T21:32:55.440046227Z:  ---> af79e6ae7f2e
[STDOUT  ] 2017-07-28T21:32:55.838479935Z: Removing intermediate container 40796c280465
[STDOUT  ] 2017-07-28T21:32:55.838544821Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-07-28T21:32:56.195636445Z:  ---> cbc8fca999d1
[STDOUT  ] 2017-07-28T21:32:56.205902453Z: Removing intermediate container b19b55ddf8b8
[STDOUT  ] 2017-07-28T21:32:56.205951282Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-07-28T21:32:56.72765942Z:  ---> 2b582f7d1075
[STDOUT  ] 2017-07-28T21:32:56.736180811Z: Removing intermediate container 4289d9ae5768
[STDOUT  ] 2017-07-28T21:32:56.736226686Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-07-28T21:32:56.830767121Z:  ---> Running in ff969d9fabaa
[STDOUT  ] 2017-07-28T21:32:57.158192985Z: make -C /usr/src/linux-headers-4.9.39-linuxkit M=/kmod modules
[STDOUT  ] 2017-07-28T21:32:57.15916377Z: make[1]: Entering directory '/usr/src/linux-headers-4.9.39-linuxkit'
[STDOUT  ] 2017-07-28T21:32:57.958001009Z:   CC [M]  /kmod/hello_world.o
[STDOUT  ] 2017-07-28T21:32:58.146102123Z:   Building modules, stage 2.
[STDOUT  ] 2017-07-28T21:32:58.154186335Z:   MODPOST 1 modules
[STDOUT  ] 2017-07-28T21:32:58.166140737Z:   CC      /kmod/hello_world.mod.o
[STDOUT  ] 2017-07-28T21:32:58.335743469Z:   LD [M]  /kmod/hello_world.ko
[STDOUT  ] 2017-07-28T21:32:58.338881392Z: make[1]: Leaving directory '/usr/src/linux-headers-4.9.39-linuxkit'
[STDOUT  ] 2017-07-28T21:32:58.744905057Z:  ---> b9d390f3d6da
[STDOUT  ] 2017-07-28T21:32:58.75517061Z: Removing intermediate container ff969d9fabaa
[STDOUT  ] 2017-07-28T21:32:58.7552203Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-07-28T21:32:59.862008747Z: 3.5: Pulling from library/alpine
[STDOUT  ] 2017-07-28T21:32:59.8620725Z: 019300c8a437: Pulling fs layer
[STDOUT  ] 2017-07-28T21:33:00.498888969Z: 019300c8a437: Verifying Checksum
[STDOUT  ] 2017-07-28T21:33:00.498937376Z: 019300c8a437: Download complete
[STDOUT  ] 2017-07-28T21:33:00.797316356Z: 019300c8a437: Pull complete
[STDOUT  ] 2017-07-28T21:33:00.823039181Z: Digest: sha256:af2a5bd2f8de8fc1ecabf1c76611cdc6a5f1ada1a2bdd7d3816e121b70300308
[STDOUT  ] 2017-07-28T21:33:00.837007201Z: Status: Downloaded newer image for alpine:3.5
[STDOUT  ] 2017-07-28T21:33:00.837551059Z:  ---> 074d602a59d7
[STDOUT  ] 2017-07-28T21:33:00.837692275Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-07-28T21:33:01.203768039Z:  ---> 72a45dde33c8
[STDOUT  ] 2017-07-28T21:33:01.20992797Z: Removing intermediate container e4ff52161cf7
[STDOUT  ] 2017-07-28T21:33:01.209970743Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-07-28T21:33:01.559653813Z:  ---> 8805d1708139
[STDOUT  ] 2017-07-28T21:33:01.566211339Z: Removing intermediate container 7da8335e113d
[STDOUT  ] 2017-07-28T21:33:01.566259698Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-07-28T21:33:01.642882615Z:  ---> Running in be3417dec3c9
[STDOUT  ] 2017-07-28T21:33:01.797460107Z:  ---> cbad178318ff
[STDOUT  ] 2017-07-28T21:33:01.80337392Z: Removing intermediate container be3417dec3c9
[STDOUT  ] 2017-07-28T21:33:01.803416257Z: Successfully built cbad178318ff
[STDOUT  ] 2017-07-28T21:33:01.80755818Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-07-28T21:33:01.841910078Z: + moby build -output kernel+initrd kmod.yml
[STDERR  ] 2017-07-28T21:33:01.852347482Z: Extract kernel image: linuxkit/kernel:4.9.39
[STDERR  ] 2017-07-28T21:33:03.508001142Z: Add init containers:
[STDERR  ] 2017-07-28T21:33:03.508087464Z: Process init image: linuxkit/init:4dcee04c04c900a5796dc719f8d16fea7e771059
[STDERR  ] 2017-07-28T21:33:04.691460659Z: Process init image: linuxkit/runc:f5960b83a8766ae083efc744fa63dbf877450e4f
[STDERR  ] 2017-07-28T21:33:05.928507111Z: Add onboot containers:
[STDERR  ] 2017-07-28T21:33:05.928580456Z:   Create OCI config for kmod-test
[STDERR  ] 2017-07-28T21:33:06.091256621Z:   Create OCI config for linuxkit/poweroff:3845c4d64d47a1ea367806be5547e44594b0fa91
[STDERR  ] 2017-07-28T21:33:07.314432155Z: Create outputs:
[STDERR  ] 2017-07-28T21:33:10.624034319Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-07-28T21:33:10.661237782Z: + linuxkit run kmod
[STDERR  ] 2017-07-28T21:33:10.679236306Z: Unable to find qemu-system-x86_64 within the $PATH. Using a container
[STDERR  ] 2017-07-28T21:33:11.140911482Z: qemu-system-x86_64: Device needs media, but drive is empty
[STDERR  ] 2017-07-28T21:33:11.140970022Z: qemu-system-x86_64: Initialization of device ide-hd failed: Device initialization failed.
[STDERR  ] 2017-07-28T21:33:11.480706063Z: time="2017-07-28T21:33:11Z" level=fatal msg="exit status 1" 
[STDERR  ] 2017-07-28T21:33:11.482740028Z: + RESULT=
[STDERR  ] 2017-07-28T21:33:11.482770032Z: + clean_up
[STDERR  ] 2017-07-28T21:33:11.482779755Z: + docker rmi kmod-test
[STDOUT  ] 2017-07-28T21:33:11.503675284Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-07-28T21:33:11.503735974Z: Deleted: sha256:cbad178318ff93b0d1d33a32fd2ac27cde9ad7190a075bbe96308039a4472f94
[STDOUT  ] 2017-07-28T21:33:11.503752931Z: Deleted: sha256:8805d1708139e222473af47b65f12a3f870b5648b49761f3f657b9bbd8135da5
[STDOUT  ] 2017-07-28T21:33:11.50376293Z: Deleted: sha256:bf1ecd63576142fe90c9eb734fe40033251f835a502ee7f1b57362ca44eca294
[STDOUT  ] 2017-07-28T21:33:11.503775271Z: Deleted: sha256:72a45dde33c89803b4076a70a223ec01761a5f0eb356ee5a272264f986d0c84e
[STDOUT  ] 2017-07-28T21:33:11.503789658Z: Deleted: sha256:0b15ec594ef59bb851d30456be63323e1f4545c8be6b577b7969b9786606321c
[STDERR  ] 2017-07-28T21:33:11.505806161Z: + find . -depth -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[FAIL    ] linuxkit.kernel.kmod_4.9.x 36.17s
