[INFO    ] 2017-06-07T23:25:11.640550605Z: Running Test linuxkit.kernel.kmod_4.9.x in /tmp/with_clone308c714a/test/cases/020_kernel/010_kmod_4.9.x
[INFO    ] 2017-06-07T23:25:11.640629005Z: Running command: [/bin/sh -x /tmp/with_clone308c714a/test/cases/020_kernel/010_kmod_4.9.x/test.sh]
[STDERR  ] 2017-06-07T23:25:11.646682734Z: + set -e
[STDERR  ] 2017-06-07T23:25:11.646692518Z: + . /tmp/with_clone308c714a/test/cases/_lib/lib.sh
[STDERR  ] 2017-06-07T23:25:11.646704605Z: + [ -f src/github.com/linuxkit/rtf/lib/lib.sh ]
[STDERR  ] 2017-06-07T23:25:11.646732925Z: + LINUXKIT_TMPDIR=/tmp/with_clone308c714a/test/cases/_tmp
[STDERR  ] 2017-06-07T23:25:11.646744925Z: + [ -f /tmp/with_clone308c714a/test/cases/_tmp/env.sh ]
[STDERR  ] 2017-06-07T23:25:11.646757037Z: + . /tmp/with_clone308c714a/test/cases/_tmp/env.sh
[STDERR  ] 2017-06-07T23:25:11.646779329Z: + export LINUXKIT_EXAMPLES_DIR=/tmp/with_clone308c714a/test/cases/../../examples
[STDERR  ] 2017-06-07T23:25:11.646792017Z: + RT_CANCEL=253
[STDERR  ] 2017-06-07T23:25:11.646804354Z: + IMAGE_NAME=kmod-test
[STDERR  ] 2017-06-07T23:25:11.646816983Z: + trap clean_up EXIT
[STDERR  ] 2017-06-07T23:25:11.646829616Z: + docker pull linuxkit/kernel:4.9.x
[STDOUT  ] 2017-06-07T23:25:13.341185035Z: 4.9.x: Pulling from linuxkit/kernel
[STDOUT  ] 2017-06-07T23:25:13.341260145Z: Digest: sha256:ae1b7926df08ea7451f1404e28bef8cf7ece2d342eeeecf007d6708e7abbbc16
[STDOUT  ] 2017-06-07T23:25:13.341274748Z: Status: Image is up to date for linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T23:25:13.408063006Z: + docker build -t kmod-test .
[STDOUT  ] 2017-06-07T23:25:13.420740093Z: Sending build context to Docker daemon 9.216 kB
[STDOUT  ] 2017-06-07T23:25:13.589043964Z: Step 1/11 : FROM linuxkit/kernel:4.9.x AS ksrc
[STDOUT  ] 2017-06-07T23:25:13.654384324Z:  ---> ae68c95b4122
[STDOUT  ] 2017-06-07T23:25:13.654471042Z: Step 2/11 : FROM linuxkit/kernel-compile:1b396c221af673757703258159ddc8539843b02b@sha256:6b32d205bfc6407568324337b707d195d027328dbfec554428ea93e7b0a8299b AS build
[STDOUT  ] 2017-06-07T23:25:13.654490079Z:  ---> 261c60c4eb02
[STDOUT  ] 2017-06-07T23:25:13.654504497Z: Step 3/11 : COPY --from=ksrc /kernel-dev.tar /
[STDOUT  ] 2017-06-07T23:25:14.093957238Z:  ---> Using cache
[STDOUT  ] 2017-06-07T23:25:14.093969864Z:  ---> 40e27cdb4406
[STDOUT  ] 2017-06-07T23:25:14.093978917Z: Step 4/11 : RUN tar xf kernel-dev.tar
[STDOUT  ] 2017-06-07T23:25:14.110764319Z:  ---> Using cache
[STDOUT  ] 2017-06-07T23:25:14.110776412Z:  ---> a5f107b71c51
[STDOUT  ] 2017-06-07T23:25:14.110780845Z: Step 5/11 : WORKDIR /kmod
[STDOUT  ] 2017-06-07T23:25:14.110792759Z:  ---> Using cache
[STDOUT  ] 2017-06-07T23:25:14.11079637Z:  ---> 751eac942ed8
[STDOUT  ] 2017-06-07T23:25:14.110808078Z: Step 6/11 : COPY ./src/* ./
[STDOUT  ] 2017-06-07T23:25:14.110815627Z:  ---> Using cache
[STDOUT  ] 2017-06-07T23:25:14.110831014Z:  ---> 6991dd3ee12c
[STDOUT  ] 2017-06-07T23:25:14.110838752Z: Step 7/11 : RUN make all
[STDOUT  ] 2017-06-07T23:25:14.11085759Z:  ---> Using cache
[STDOUT  ] 2017-06-07T23:25:14.110869748Z:  ---> 512c2cde15b2
[STDOUT  ] 2017-06-07T23:25:14.110873557Z: Step 8/11 : FROM alpine:3.5
[STDOUT  ] 2017-06-07T23:25:14.110885107Z:  ---> 75b63e430bd1
[STDOUT  ] 2017-06-07T23:25:14.110889313Z: Step 9/11 : COPY --from=build /kmod/hello_world.ko /
[STDOUT  ] 2017-06-07T23:25:14.574082841Z:  ---> 5d50cb241150
[STDOUT  ] 2017-06-07T23:25:14.590844541Z: Removing intermediate container 3454ebd630c3
[STDOUT  ] 2017-06-07T23:25:14.590885018Z: Step 10/11 : COPY check.sh /check.sh
[STDOUT  ] 2017-06-07T23:25:15.062290025Z:  ---> 97561b6af224
[STDOUT  ] 2017-06-07T23:25:15.078941178Z: Removing intermediate container 7f5281abad1c
[STDOUT  ] 2017-06-07T23:25:15.078953231Z: Step 11/11 : ENTRYPOINT /bin/sh /check.sh
[STDOUT  ] 2017-06-07T23:25:15.194795421Z:  ---> Running in 939c52b6a82b
[STDOUT  ] 2017-06-07T23:25:15.374657507Z:  ---> 6afd9fcfcc4b
[STDOUT  ] 2017-06-07T23:25:15.391382675Z: Removing intermediate container 939c52b6a82b
[STDOUT  ] 2017-06-07T23:25:15.391394517Z: Successfully built 6afd9fcfcc4b
[STDOUT  ] 2017-06-07T23:25:15.391407695Z: Successfully tagged kmod-test:latest
[STDERR  ] 2017-06-07T23:25:15.474630808Z: + moby build -output kernel+initrd kmod.yml
[STDERR  ] 2017-06-07T23:25:15.483707633Z: Extract kernel image: linuxkit/kernel:4.9.x
[STDERR  ] 2017-06-07T23:25:22.788865628Z: Add init containers:
[STDERR  ] 2017-06-07T23:25:22.788903266Z: Process init image: linuxkit/init:1b8a7e394d2ec2f1fdb4d67645829d1b5bdca037
[STDERR  ] 2017-06-07T23:25:24.492655249Z: Process init image: linuxkit/runc:3a4e6cbf15470f62501b019b55e1caac5ee7689f
[STDERR  ] 2017-06-07T23:25:26.622885401Z: Process init image: linuxkit/containerd:b50181bc6e0084e5fcd6b6ad3cf433c4f66cae5a
[STDERR  ] 2017-06-07T23:25:32.810809124Z: Add onboot containers:
[STDERR  ] 2017-06-07T23:25:32.810830283Z:   Create OCI config for kmod-test
[STDERR  ] 2017-06-07T23:25:33.348678499Z:   Create OCI config for linuxkit/poweroff:7404cf2295df89ccfa2dda41997a28307a90cf28
[STDERR  ] 2017-06-07T23:25:35.179973509Z: Create outputs:
[STDERR  ] 2017-06-07T23:25:41.124314464Z:   kmod-kernel kmod-initrd.img kmod-cmdline
[STDERR  ] 2017-06-07T23:25:41.361029914Z: + linuxkit run qemu kmod
[STDERR  ] 2017-06-07T23:25:41.361044399Z: + grep -q Hello LinuxKit
[STDERR  ] 2017-06-07T23:26:07.13538599Z: + clean_up
[STDERR  ] 2017-06-07T23:26:07.135403013Z: + docker rmi kmod-test
[STDOUT  ] 2017-06-07T23:26:07.188194817Z: Untagged: kmod-test:latest
[STDOUT  ] 2017-06-07T23:26:07.188262211Z: Deleted: sha256:6afd9fcfcc4b713ab25096a38a03b652097da07b3510252ed219ae12907a29f4
[STDOUT  ] 2017-06-07T23:26:07.188272698Z: Deleted: sha256:97561b6af224f01d57023ecfb646c91970b72acabb3d9f3699f29c2776882c2d
[STDOUT  ] 2017-06-07T23:26:07.188293483Z: Deleted: sha256:dc157e1e9ce426a7676b5795d8ca030d89b0ff1a880de63399942b2a470ab46d
[STDOUT  ] 2017-06-07T23:26:07.188308528Z: Deleted: sha256:5d50cb2411508e65d6d9788f3c49d1403c2d378f4cccedae45cf8f3630c99144
[STDOUT  ] 2017-06-07T23:26:07.188322339Z: Deleted: sha256:4b87c3a9d0e87dc41627c9a9e58fcdbd23a09b5693491edce13123ad3821f27f
[STDERR  ] 2017-06-07T23:26:07.19092194Z: + find . -iname kmod* -not -iname *.yml -exec rm -rf {} ;
[PASS    ] linuxkit.kernel.kmod_4.9.x 55.57s
